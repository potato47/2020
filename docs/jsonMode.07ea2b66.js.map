{"version":3,"sources":["node_modules/monaco-editor/esm/vs/language/json/workerManager.js","node_modules/monaco-editor/esm/vs/language/json/_deps/jsonc-parser/impl/scanner.js","node_modules/monaco-editor/esm/vs/language/json/_deps/jsonc-parser/impl/format.js","node_modules/monaco-editor/esm/vs/language/json/_deps/jsonc-parser/impl/parser.js","node_modules/monaco-editor/esm/vs/language/json/_deps/jsonc-parser/impl/edit.js","node_modules/monaco-editor/esm/vs/language/json/_deps/jsonc-parser/main.js","node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-json-languageservice/utils/objects.js","node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-languageserver-types/main.js","node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-languageserver-textdocument/lib/esm/main.js","node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-json-languageservice/jsonLanguageTypes.js","node_modules/monaco-editor/esm/vs/language/json/fillers/vscode-nls.js","node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-json-languageservice/parser/jsonParser.js","node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-json-languageservice/utils/json.js","node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-json-languageservice/utils/strings.js","node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-json-languageservice/services/jsonCompletion.js","node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-json-languageservice/services/jsonHover.js","node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-uri/index.js","node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-json-languageservice/services/jsonSchemaService.js","node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-json-languageservice/services/jsonValidation.js","node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-json-languageservice/utils/colors.js","node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-json-languageservice/services/jsonDocumentSymbols.js","node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-json-languageservice/services/configuration.js","node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-json-languageservice/services/jsonFolding.js","node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-json-languageservice/services/jsonSelectionRanges.js","node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-json-languageservice/services/jsonDefinition.js","node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-json-languageservice/jsonLanguageService.js","node_modules/monaco-editor/esm/vs/language/json/languageFeatures.js","node_modules/monaco-editor/esm/vs/language/json/tokenization.js","node_modules/monaco-editor/esm/vs/language/json/jsonMode.js","node_modules/parcel/src/builtins/hmr-runtime.js"],"names":["STOP_WHEN_IDLE_FOR","WorkerManager","defaults","_this","_defaults","_worker","_idleCheckInterval","setInterval","_checkIfIdle","_lastUsedTime","_configChangeListener","onDidChange","_stopWorker","prototype","dispose","_client","clearInterval","timePassedSinceLastUsed","Date","now","_getClient","editor","createWebWorker","moduleId","label","languageId","createData","languageSettings","diagnosticsOptions","enableSchemaRequest","getProxy","getLanguageServiceWorker","resources","_i","arguments","length","then","client","_","withSyncedResources","createScanner","text","ignoreTrivia","len","pos","value","tokenOffset","token","lineNumber","lineStartOffset","tokenLineStartOffset","prevTokenLineStartOffset","scanError","scanHexDigits","count","exact","digits","ch","charCodeAt","setPosition","newPosition","scanNumber","start","isDigit","substring","end","scanString","result","ch2","ch3","String","fromCharCode","isLineBreak","scanNext","code","isWhiteSpace","safeLength","commentClosed","isUnknownContentCharacter","scanNextNonTrivia","getPosition","scan","getToken","getTokenValue","getTokenOffset","getTokenLength","getTokenStartLine","getTokenStartCharacter","getTokenError","format","documentText","range","options","initialIndentLevel","formatText","formatTextStart","rangeStart","rangeEnd","offset","isEOL","endOffset","computeIndentLevel","eol","getEOL","lineBreak","indentLevel","indentValue","insertSpaces","repeat","tabSize","scanner","hasError","newLineAndIndent","editOperations","addEdit","startOffset","push","content","firstToken","firstTokenStart","initialIndent","firstTokenEnd","secondToken","replaceContent","commentTokenStart","secondTokenStart","s","i","nChars","charAt","Math","floor","indexOf","ParseOptions","DEFAULT","allowTrailingComma","getLocation","position","segments","earlyReturnException","Object","previousNode","undefined","previousNodeInst","type","parent","isAtPropertyKey","setPreviousNode","colonOffset","visit","onObjectBegin","onObjectProperty","name","onObjectEnd","pop","onArrayBegin","onArrayEnd","onLiteralValue","getNodeType","onSeparator","sep","last","e","path","matches","pattern","k","parse","errors","currentProperty","currentParent","previousParents","onValue","Array","isArray","visitor","object","array","onError","error","parseTree","children","ensurePropertyComplete","valueNode","findNodeAtLocation","root","node","path_1","segment","found","_a","_b","propertyNode","index","getNodePath","key","getNodeValue","map","obj","create","prop","contains","includeRightBound","findNodeAtOffset","item","_scanner","toNoArgVisit","visitFunction","toOneArgVisit","arg","onComment","disallowComments","handleError","skipUntilAfter","skipUntil","parseString","isValue","parseLiteral","JSON","parseProperty","parseValue","parseObject","needsComma","parseArray","allowEmptyContent","stripComments","replaceCh","parts","kind","replace","join","removeProperty","setProperty","originalPath","slice","lastSegment","Error","withFormatting","stringify","existing","propertyIndex","removeBegin","removeEnd","previous","next","newProperty","getInsertionIndex","p","edit","insertIndex","removalIndex","toRemove","parentEndOffset","isArrayInsertion","toModify","formattingOptions","newText","applyEdit","begin","edits","edit_1","min","max","editLength","isWS","parser","printParseErrorCode","formatter","modify","applyEdits","equals","one","other","oneKeys","sort","otherKeys","isNumber","val","isDefined","isBoolean","isString","Position","line","character","is","candidate","Is","objectLiteral","number","Range","two","three","four","Location","uri","defined","string","LocationLink","targetUri","targetRange","targetSelectionRange","originSelectionRange","Color","red","green","blue","alpha","ColorInformation","color","ColorPresentation","textEdit","additionalTextEdits","TextEdit","typedArray","FoldingRangeKind","FoldingRange","startLine","endLine","startCharacter","endCharacter","DiagnosticRelatedInformation","location","message","DiagnosticSeverity","Warning","Information","Hint","DiagnosticTag","Unnecessary","Deprecated","Diagnostic","severity","source","relatedInformation","Command","title","command","args","insert","del","TextDocumentEdit","textDocument","VersionedTextDocumentIdentifier","CreateFile","overwrite","ignoreIfExists","boolean","RenameFile","oldUri","newUri","DeleteFile","recursive","ignoreIfNotExists","WorkspaceEdit","changes","documentChanges","every","change","TextEditChangeImpl","delete","add","all","clear","splice","WorkspaceChange","workspaceEdit","_textEditChanges","_workspaceEdit","forEach","textEditChange","keys","defineProperty","get","enumerable","configurable","getTextEditChange","textDocumentEdit","createFile","checkDocumentChanges","renameFile","deleteFile","TextDocumentIdentifier","version","TextDocumentItem","MarkupKind","PlainText","Markdown","MarkupContent","CompletionItemKind","Text","Method","Function","Constructor","Field","Variable","Class","Interface","Module","Property","Unit","Value","Enum","Keyword","Snippet","File","Reference","Folder","EnumMember","Constant","Struct","Event","Operator","TypeParameter","InsertTextFormat","CompletionItemTag","CompletionItem","CompletionList","items","isIncomplete","MarkedString","fromPlainText","plainText","language","Hover","contents","ParameterInformation","documentation","SignatureInformation","parameters","DocumentHighlightKind","Read","Write","DocumentHighlight","SymbolKind","Namespace","Package","Number","Boolean","Key","Null","SymbolTag","SymbolInformation","containerName","DocumentSymbol","detail","selectionRange","deprecated","CodeActionKind","Empty","QuickFix","Refactor","RefactorExtract","RefactorInline","RefactorRewrite","Source","SourceOrganizeImports","SourceFixAll","CodeActionContext","diagnostics","only","CodeAction","commandOrEdit","isPreferred","CodeLens","data","FormattingOptions","DocumentLink","target","SelectionRange","EOL","TextDocument","FullTextDocument","lineCount","func","getText","positionAt","offsetAt","document","sortedEdits","mergeSort","a","b","diff","lastModifiedOffset","compare","left","right","leftIdx","rightIdx","ret","_uri","_languageId","_version","_content","_lineOffsets","update","event","getLineOffsets","lineOffsets","isLineStart","low","high","mid","lineOffset","nextLineOffset","toString","call","check","changes_1","isIncremental","getWellformedRange","addedLineOffsets","computeLineOffsets","apply","concat","isFull","rangeLength","getWellformedEdit","spans","sortedEdits_1","substr","isAtLineStart","textOffset","ErrorCode","ClientCapabilities","LATEST","completion","completionItem","documentationFormat","commitCharactersSupport","match","rest","localize","loadMessageBundle","file","config","opt","__extends","extendStatics","d","setPrototypeOf","__proto__","hasOwnProperty","__","constructor","nls","formats","errorMessage","ASTNodeImpl","NullASTNodeImpl","_super","BooleanASTNodeImpl","boolValue","ArrayASTNodeImpl","NumberASTNodeImpl","isInteger","NaN","StringASTNodeImpl","PropertyASTNodeImpl","keyNode","ObjectASTNodeImpl","properties","asSchema","schema","EnumMatch","SchemaCollector","focusOffset","exclude","schemas","merge","include","newSub","NoOpSchemaCollector","instance","ValidationResult","problems","propertiesMatches","propertiesValueMatches","primaryValueMatches","enumValueMatch","enumValues","hasProblems","mergeAll","validationResults","validationResults_1","validationResult","mergeEnumValues","EnumValueMismatch","v","mergePropertyMatch","propertyValidationResult","newJSONDocument","JSONDocument","Json","syntaxErrors","comments","getNodeFromOffset","doVisit_1","ctn","validate","getMatchingSchemas","matchingSchemas","n","_validateObjectNode","_validateArrayNode","_validateStringNode","_validateNumberNode","_validateNode","matchesType","some","allOf","subSchemaRef","notSchema","not","subValidationResult","subMatchingSchemas","_c","ms","inverted","testAlternatives","alternatives","maxOneMatch","bestMatch","alternatives_1","subSchema","compareResult","anyOf","oneOf","testBranch","testCondition","ifSchema","thenSchema","elseSchema","if","else","enum","_d","_e","const","deprecationMessage","normalizeFloats","float","exec","multiplier","parseInt","multipleOf","remainder","normMultipleOf","normValue","pow","abs","getExclusiveLimit","limit","exclusive","getLimit","exclusiveMinimum","minimum","exclusiveMaximum","maximum","minLength","maxLength","regex","RegExp","test","patternErrorMessage","subSchemas","itemValidationResult","additionalItems","itemSchema","containsSchema","doesContain","minItems","maxItems","uniqueItems","values_1","duplicates","lastIndexOf","seenKeys","unprocessedProperties","required","propertyName","propertyProcessed","propertySchema","child","patternProperties","_f","_g","propertyPattern","_h","_j","additionalProperties","_k","unprocessedProperties_1","_l","unprocessedProperties_2","maxProperties","minProperties","dependencies","_m","_o","propertyDep","_p","propertyDep_1","requiredProp","propertyNames","_q","_r","f","lastProblemOffset","commentRanges","collectComments","_scanNext","token_1","_checkScanError","_accept","_errorAtRange","_error","_finalize","token_2","InvalidUnicode","InvalidEscapeCharacter","UnexpectedEndOfNumber","UnexpectedEndOfComment","UnexpectedEndOfString","InvalidCharacter","_parseArray","ValueExpected","commaOffset","TrailingComma","CommaExpected","_parseValue","CommaOrCloseBacketExpected","keyPlaceholder","_parseProperty","keysSeen","_parseString","Undefined","seen","DuplicateKey","ColonExpected","_parseObject","PropertyExpected","property","CommaOrCloseBraceExpected","_parseNumber","tokenValue","numberValue","_parseLiteral","_root","stringifyObject","indent","stringifyLiteral","newIndent","startsWith","haystack","needle","endsWith","convertSimple2RegExpPattern","valueCommitCharacters","propertyCommitCharacters","JSONCompletion","schemaService","contributions","promiseConstructor","clientCapabilities","Promise","doResolve","resolveCompletion","resolver","resolve","doComplete","doc","isInComment","currentWord","getCurrentWord","overwriteRange","overwriteStart","supportsCommitCharacters","proposed","collector","suggestion","shortendedLabel","trim","insertText","commitCharacters","setAsIncomplete","console","log","getNumberOfProposals","getSchemaForResource","collectionPromises","addValue","currentKey","separatorAfter_1","evaluateSeparatorAfter","getPropertyCompletions","getSchemaLessPropertyCompletions","location_1","Parser","contribution","collectPromise","collectPropertyCompletions","getLabelForValue","getInsertTextForProperty","insertTextFormat","types","getValueCompletions","getSchemaLessValueCompletions","getContributedValueCompletions","offsetForSeparator","separatorAfter","addFillerValueCompletions","schemaProperties_1","doNotSuggest","proposal","filterText","getFilterTextForValue","fromMarkup","markdownDescription","description","suggestSortText","sortText","schemaPropertyNames_1","propertyNameCompletionItem","enumDescription","markdownEnumDescriptions","enumDescriptions","collectCompletionsForSimilarObject","getInsertTextForValue","parentKey_1","getSuggestionKind","collectSuggestionsForValues","getLabelTextForMatchingNode","getInsertTextForMatchingNode","addBooleanValueCompletion","parentKey_2","addDollarSchemaCompletions","parentKey_3","parentKey","addSchemaValueCompletions","valueNode_1","matchingSchemas_1","findItemAtOffset","propertyMatched","addNullValueCompletion","collectDefaultCompletions","parentKey_4","location_2","collectValueCompletions","addEnumValueCompletions","addDefaultValueCompletions","collectTypes","arrayDepth","hasProposals","default","examples","example","defaultSnippets","body","type_1","getInsertTextForSnippetValue","getFilterTextForSnippetValue","getLabelForSnippetValue","bodyText","prefix","suffix","split","enm","doesSupportMarkdown","t","getInsertTextForGuessedValue","schemaIds","getRegisteredSchemaIds","schemaId","getInsertTextForPlainText","replacer","snippetValue","propertyText","resultText","nValueProposals","markupString","supportsMarkdown","doesSupportsCommitCharacters","JSONHover","promise","doHover","hoverRangeNode","hoverRange","createHover","getInfoContribution","htmlContent","title_1","markdownDescription_1","markdownEnumValueDescription_1","enumValue_1","toMarkdown","idx","toMarkdownCodeBlock","plain","res","isWindows","process","platform","navigator","userAgent","isHighSurrogate","charCode","isLowSurrogate","isLowerAsciiHex","isLowerAsciiLetter","isUpperAsciiLetter","isAsciiLetter","_schemePattern","_singleSlashStart","_doubleSlashStart","_validateUri","_strict","scheme","authority","query","fragment","_schemeFix","_referenceResolution","_slash","_empty","_regexp","URI","schemeOrData","isUri","thing","fsPath","with","uriToFsPath","_URI","percentDecode","from","components","skipEncoding","_asFormatted","toJSON","revive","_formatted","external","_fsPath","_sep","_pathSepMarker","$mid","encodeTable","encodeURIComponentFast","uriComponent","allowSlash","nativeEncodePos","encodeURIComponent","escaped","encodeURIComponentMinimal","keepDriveLetterCasing","toLowerCase","encoder","userinfo","decodeURIComponentGraceful","str","decodeURIComponent","_rEncodedAsHex","FilePatternAssociation","uris","patternRegExps","isInclude","pattern_1","Strings","matchesPattern","fileName","regExp","getURIs","SchemaHandle","service","url","unresolvedSchemaContent","unresolvedSchema","UnresolvedSchema","getUnresolvedSchema","loadSchema","getResolvedSchema","resolvedSchema","unresolved","resolveSchemaContent","clearSchema","ResolvedSchema","getSection","schemaRef","getSectionRecursive","shift","isNaN","JSONSchemaService","requestService","contextService","callOnDispose","contributionSchemas","contributionAssociations","schemasById","filePatternAssociations","registeredSchemasIds","filter","id","onResourceChange","hasChanges","normalizeId","toWalk","curr","handle","setSchemaContributions","schemaContributions","normalizedId","addSchemaHandle","schemaAssociations","schemaAssociations_1","schemaAssociation","association","addFilePatternAssociation","schemaHandle","getOrAddSchemaHandle","fpa","registerExternalSchema","filePatterns","cachedSchemaForResource","clearExternalSchemas","contributionAssociation","toDisplayString","schemaContent","jsonErrors","errorSplit","schemaToResolve","schemaURL","resolveErrors","$schema","findSection","current","part","sourceRoot","sourceURI","refSegment","section","resolveExternalLink","parentSchemaURL","parentSchemaDependencies","resolveRelativePath","referencedHandle","loc","resolveRefs","parentSchema","openPromises","collectEntries","entries","entries_1","entry","collectMapEntries","maps","maps_1","collectArrayEntries","arrays","arrays_1","array_1","handleRef","seenRefs","$ref","ref","definitions","resource","schemaProperties","schemeId","createCombinedSchema","combinedSchemaId","combinedSchema","jsonDocument","idCounter","JSONValidation","jsonSchemaService","validationEnabled","configure","raw","commentSeverity","allowComments","doValidation","documentSettings","added","addProblem","problem","signature","getDiagnostics","trailingCommaSeverity","toDiagnosticSeverity","trailingCommas","astRoot","SchemaResolveError","semanticErrors","schemaAllowsComments","schemaAllowsTrailingCommas","message_1","c","CommentNotPermitted","allow","allowTrailingCommas","deprSchemaRef","severityLevel","Digit0","Digit9","A","hexDigit","colorFromHex","colorFrom256RGB","JSONDocumentSymbols","findDocumentSymbols","context","resultLimit","MAX_VALUE","resourceString","result_1","getRange","onResultLimitExceeded","toVisit","nextToVisit","limitExceeded","collectOutlineEntries","childContainerName","getKeyLabel","getSymbolKind","findDocumentSymbols2","result_2","symbol","nodeType","findDocumentColors","visitedNode","nodeId","getColorPresentations","red256","round","green256","blue256","toTwoDigitHex","r","descriptions","$id","$comment","readOnly","contentMediaType","contentEncoding","schemaName","propertyObject","getFoldingRanges","ranges","nestingLevels","stack","prevStart","addRange","Comment","m","Region","rangeLimit","onRangeLimitExceeded","counts","nestingLevels_1","level","maxLevel","getSelectionRanges","positions","getSelectionRange","cStart","cEnd","newRange","afterCommaOffset","getOffsetAfterNextToken","expectedToken","findDefinition","isRef","targetNode","findTargetNode","definition","createRange","tokens","parseJSONPointer","findNode","pointer","find","arrayItem","unescape","getLanguageService","params","schemaRequestService","workspaceContext","jsonCompletion","jsonHover","jsonDocumentSymbols","jsonValidation","settings","fileMatch","resetSchema","bind","parseJSONDocument","findColorSymbols","o","DiagnosticsAdapter","_disposables","_listener","onModelAdd","model","modeId","getModeId","onDidChangeContent","clearTimeout","setTimeout","_doValidate","onModelRemoved","setModelMarkers","uriStr","listener","onDidCreateModel","onWillDisposeModel","_resetSchema","onDidChangeModelLanguage","getModels","worker","markers","toDiagnostics","getModel","err","toSeverity","lsSeverity","jsonService","MarkerSeverity","Info","diag","startLineNumber","startColumn","endLineNumber","endColumn","fromPosition","column","fromRange","toRange","isInsertReplaceEdit","toCompletionItemKind","mItemKind","languages","fromCompletionItemKind","toTextEdit","CompletionAdapter","provideCompletionItems","info","wordInfo","getWordUntilPosition","wordRange","insertTextRules","CompletionItemInsertTextRule","InsertAsSnippet","suggestions","isMarkupContent","toMarkdownString","toMarkedStringArray","HoverAdapter","provideHover","toLocation","Uri","toSymbolKind","mKind","DocumentSymbolAdapter","provideDocumentSymbols","tags","fromFormattingOptions","DocumentFormattingEditProvider","provideDocumentFormattingEdits","DocumentRangeFormattingEditProvider","provideDocumentRangeFormattingEdits","DocumentColorAdapter","provideDocumentColors","infos","provideColorPresentations","presentations","presentation","FoldingRangeAdapter","provideFoldingRanges","toFoldingRangeKind","Imports","SelectionRangeAdapter","provideSelectionRanges","selectionRanges","createTokenizationSupport","supportComments","getInitialState","JSONState","tokenize","state","offsetDelta","stopAtOffset","TOKEN_DELIM_OBJECT","TOKEN_DELIM_ARRAY","TOKEN_DELIM_COLON","TOKEN_DELIM_COMMA","TOKEN_VALUE_BOOLEAN","TOKEN_VALUE_NULL","TOKEN_VALUE_STRING","TOKEN_VALUE_NUMBER","TOKEN_PROPERTY_NAME","TOKEN_COMMENT_BLOCK","TOKEN_COMMENT_LINE","ParentsStack","parents","lastWasColon","_state","clone","getStateData","setStateData","numberOfInsertedCharacters","adjustOffset","json","endState","inArray","startIndex","scopes","setupMode","disposables","providers","registerProviders","modeConfiguration","disposeAll","documentFormattingEdits","registerDocumentFormattingEditProvider","languageFeatures","documentRangeFormattingEdits","registerDocumentRangeFormattingEditProvider","completionItems","registerCompletionItemProvider","hovers","registerHoverProvider","documentSymbols","registerDocumentSymbolProvider","setTokensProvider","colors","registerColorProvider","foldingRanges","registerFoldingRangeProvider","registerSelectionRangeProvider","setLanguageConfiguration","richEditConfiguration","newDefaults","asDisposable","wordPattern","lineComment","blockComment","brackets","autoClosingPairs","open","close","notIn","OVERLAY_ID","OldModule","module","bundle","moduleName","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","checkedAssets","assetsToAccept","isParcelRequire","WebSocket","hostname","protocol","ws","onmessage","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","generated","js","hmrApply","hmrAcceptRun","reload","onclose","removeErrorOverlay","overlay","createErrorOverlay","appendChild","getElementById","remove","createElement","stackTrace","innerText","innerHTML","getParents","modules","dep","deps","cached","cache","cb"],"mappings":"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","file":"jsonMode.07ea2b66.js","sourceRoot":"..","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { editor } from './fillers/monaco-editor-core.js';\nvar STOP_WHEN_IDLE_FOR = 2 * 60 * 1000; // 2min\nvar WorkerManager = /** @class */ (function () {\n    function WorkerManager(defaults) {\n        var _this = this;\n        this._defaults = defaults;\n        this._worker = null;\n        this._idleCheckInterval = setInterval(function () { return _this._checkIfIdle(); }, 30 * 1000);\n        this._lastUsedTime = 0;\n        this._configChangeListener = this._defaults.onDidChange(function () { return _this._stopWorker(); });\n    }\n    WorkerManager.prototype._stopWorker = function () {\n        if (this._worker) {\n            this._worker.dispose();\n            this._worker = null;\n        }\n        this._client = null;\n    };\n    WorkerManager.prototype.dispose = function () {\n        clearInterval(this._idleCheckInterval);\n        this._configChangeListener.dispose();\n        this._stopWorker();\n    };\n    WorkerManager.prototype._checkIfIdle = function () {\n        if (!this._worker) {\n            return;\n        }\n        var timePassedSinceLastUsed = Date.now() - this._lastUsedTime;\n        if (timePassedSinceLastUsed > STOP_WHEN_IDLE_FOR) {\n            this._stopWorker();\n        }\n    };\n    WorkerManager.prototype._getClient = function () {\n        this._lastUsedTime = Date.now();\n        if (!this._client) {\n            this._worker = editor.createWebWorker({\n                // module that exports the create() method and returns a `JSONWorker` instance\n                moduleId: 'vs/language/json/jsonWorker',\n                label: this._defaults.languageId,\n                // passed in to the create() method\n                createData: {\n                    languageSettings: this._defaults.diagnosticsOptions,\n                    languageId: this._defaults.languageId,\n                    enableSchemaRequest: this._defaults.diagnosticsOptions.enableSchemaRequest\n                }\n            });\n            this._client = this._worker.getProxy();\n        }\n        return this._client;\n    };\n    WorkerManager.prototype.getLanguageServiceWorker = function () {\n        var _this = this;\n        var resources = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            resources[_i] = arguments[_i];\n        }\n        var _client;\n        return this._getClient()\n            .then(function (client) {\n            _client = client;\n        })\n            .then(function (_) {\n            return _this._worker.withSyncedResources(resources);\n        })\n            .then(function (_) { return _client; });\n    };\n    return WorkerManager;\n}());\nexport { WorkerManager };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n/**\n * Creates a JSON scanner on the given text.\n * If ignoreTrivia is set, whitespaces or comments are ignored.\n */\nexport function createScanner(text, ignoreTrivia) {\n    if (ignoreTrivia === void 0) { ignoreTrivia = false; }\n    var len = text.length;\n    var pos = 0, value = '', tokenOffset = 0, token = 16 /* Unknown */, lineNumber = 0, lineStartOffset = 0, tokenLineStartOffset = 0, prevTokenLineStartOffset = 0, scanError = 0 /* None */;\n    function scanHexDigits(count, exact) {\n        var digits = 0;\n        var value = 0;\n        while (digits < count || !exact) {\n            var ch = text.charCodeAt(pos);\n            if (ch >= 48 /* _0 */ && ch <= 57 /* _9 */) {\n                value = value * 16 + ch - 48 /* _0 */;\n            }\n            else if (ch >= 65 /* A */ && ch <= 70 /* F */) {\n                value = value * 16 + ch - 65 /* A */ + 10;\n            }\n            else if (ch >= 97 /* a */ && ch <= 102 /* f */) {\n                value = value * 16 + ch - 97 /* a */ + 10;\n            }\n            else {\n                break;\n            }\n            pos++;\n            digits++;\n        }\n        if (digits < count) {\n            value = -1;\n        }\n        return value;\n    }\n    function setPosition(newPosition) {\n        pos = newPosition;\n        value = '';\n        tokenOffset = 0;\n        token = 16 /* Unknown */;\n        scanError = 0 /* None */;\n    }\n    function scanNumber() {\n        var start = pos;\n        if (text.charCodeAt(pos) === 48 /* _0 */) {\n            pos++;\n        }\n        else {\n            pos++;\n            while (pos < text.length && isDigit(text.charCodeAt(pos))) {\n                pos++;\n            }\n        }\n        if (pos < text.length && text.charCodeAt(pos) === 46 /* dot */) {\n            pos++;\n            if (pos < text.length && isDigit(text.charCodeAt(pos))) {\n                pos++;\n                while (pos < text.length && isDigit(text.charCodeAt(pos))) {\n                    pos++;\n                }\n            }\n            else {\n                scanError = 3 /* UnexpectedEndOfNumber */;\n                return text.substring(start, pos);\n            }\n        }\n        var end = pos;\n        if (pos < text.length && (text.charCodeAt(pos) === 69 /* E */ || text.charCodeAt(pos) === 101 /* e */)) {\n            pos++;\n            if (pos < text.length && text.charCodeAt(pos) === 43 /* plus */ || text.charCodeAt(pos) === 45 /* minus */) {\n                pos++;\n            }\n            if (pos < text.length && isDigit(text.charCodeAt(pos))) {\n                pos++;\n                while (pos < text.length && isDigit(text.charCodeAt(pos))) {\n                    pos++;\n                }\n                end = pos;\n            }\n            else {\n                scanError = 3 /* UnexpectedEndOfNumber */;\n            }\n        }\n        return text.substring(start, end);\n    }\n    function scanString() {\n        var result = '', start = pos;\n        while (true) {\n            if (pos >= len) {\n                result += text.substring(start, pos);\n                scanError = 2 /* UnexpectedEndOfString */;\n                break;\n            }\n            var ch = text.charCodeAt(pos);\n            if (ch === 34 /* doubleQuote */) {\n                result += text.substring(start, pos);\n                pos++;\n                break;\n            }\n            if (ch === 92 /* backslash */) {\n                result += text.substring(start, pos);\n                pos++;\n                if (pos >= len) {\n                    scanError = 2 /* UnexpectedEndOfString */;\n                    break;\n                }\n                var ch2 = text.charCodeAt(pos++);\n                switch (ch2) {\n                    case 34 /* doubleQuote */:\n                        result += '\\\"';\n                        break;\n                    case 92 /* backslash */:\n                        result += '\\\\';\n                        break;\n                    case 47 /* slash */:\n                        result += '/';\n                        break;\n                    case 98 /* b */:\n                        result += '\\b';\n                        break;\n                    case 102 /* f */:\n                        result += '\\f';\n                        break;\n                    case 110 /* n */:\n                        result += '\\n';\n                        break;\n                    case 114 /* r */:\n                        result += '\\r';\n                        break;\n                    case 116 /* t */:\n                        result += '\\t';\n                        break;\n                    case 117 /* u */:\n                        var ch3 = scanHexDigits(4, true);\n                        if (ch3 >= 0) {\n                            result += String.fromCharCode(ch3);\n                        }\n                        else {\n                            scanError = 4 /* InvalidUnicode */;\n                        }\n                        break;\n                    default:\n                        scanError = 5 /* InvalidEscapeCharacter */;\n                }\n                start = pos;\n                continue;\n            }\n            if (ch >= 0 && ch <= 0x1f) {\n                if (isLineBreak(ch)) {\n                    result += text.substring(start, pos);\n                    scanError = 2 /* UnexpectedEndOfString */;\n                    break;\n                }\n                else {\n                    scanError = 6 /* InvalidCharacter */;\n                    // mark as error but continue with string\n                }\n            }\n            pos++;\n        }\n        return result;\n    }\n    function scanNext() {\n        value = '';\n        scanError = 0 /* None */;\n        tokenOffset = pos;\n        lineStartOffset = lineNumber;\n        prevTokenLineStartOffset = tokenLineStartOffset;\n        if (pos >= len) {\n            // at the end\n            tokenOffset = len;\n            return token = 17 /* EOF */;\n        }\n        var code = text.charCodeAt(pos);\n        // trivia: whitespace\n        if (isWhiteSpace(code)) {\n            do {\n                pos++;\n                value += String.fromCharCode(code);\n                code = text.charCodeAt(pos);\n            } while (isWhiteSpace(code));\n            return token = 15 /* Trivia */;\n        }\n        // trivia: newlines\n        if (isLineBreak(code)) {\n            pos++;\n            value += String.fromCharCode(code);\n            if (code === 13 /* carriageReturn */ && text.charCodeAt(pos) === 10 /* lineFeed */) {\n                pos++;\n                value += '\\n';\n            }\n            lineNumber++;\n            tokenLineStartOffset = pos;\n            return token = 14 /* LineBreakTrivia */;\n        }\n        switch (code) {\n            // tokens: []{}:,\n            case 123 /* openBrace */:\n                pos++;\n                return token = 1 /* OpenBraceToken */;\n            case 125 /* closeBrace */:\n                pos++;\n                return token = 2 /* CloseBraceToken */;\n            case 91 /* openBracket */:\n                pos++;\n                return token = 3 /* OpenBracketToken */;\n            case 93 /* closeBracket */:\n                pos++;\n                return token = 4 /* CloseBracketToken */;\n            case 58 /* colon */:\n                pos++;\n                return token = 6 /* ColonToken */;\n            case 44 /* comma */:\n                pos++;\n                return token = 5 /* CommaToken */;\n            // strings\n            case 34 /* doubleQuote */:\n                pos++;\n                value = scanString();\n                return token = 10 /* StringLiteral */;\n            // comments\n            case 47 /* slash */:\n                var start = pos - 1;\n                // Single-line comment\n                if (text.charCodeAt(pos + 1) === 47 /* slash */) {\n                    pos += 2;\n                    while (pos < len) {\n                        if (isLineBreak(text.charCodeAt(pos))) {\n                            break;\n                        }\n                        pos++;\n                    }\n                    value = text.substring(start, pos);\n                    return token = 12 /* LineCommentTrivia */;\n                }\n                // Multi-line comment\n                if (text.charCodeAt(pos + 1) === 42 /* asterisk */) {\n                    pos += 2;\n                    var safeLength = len - 1; // For lookahead.\n                    var commentClosed = false;\n                    while (pos < safeLength) {\n                        var ch = text.charCodeAt(pos);\n                        if (ch === 42 /* asterisk */ && text.charCodeAt(pos + 1) === 47 /* slash */) {\n                            pos += 2;\n                            commentClosed = true;\n                            break;\n                        }\n                        pos++;\n                        if (isLineBreak(ch)) {\n                            if (ch === 13 /* carriageReturn */ && text.charCodeAt(pos) === 10 /* lineFeed */) {\n                                pos++;\n                            }\n                            lineNumber++;\n                            tokenLineStartOffset = pos;\n                        }\n                    }\n                    if (!commentClosed) {\n                        pos++;\n                        scanError = 1 /* UnexpectedEndOfComment */;\n                    }\n                    value = text.substring(start, pos);\n                    return token = 13 /* BlockCommentTrivia */;\n                }\n                // just a single slash\n                value += String.fromCharCode(code);\n                pos++;\n                return token = 16 /* Unknown */;\n            // numbers\n            case 45 /* minus */:\n                value += String.fromCharCode(code);\n                pos++;\n                if (pos === len || !isDigit(text.charCodeAt(pos))) {\n                    return token = 16 /* Unknown */;\n                }\n            // found a minus, followed by a number so\n            // we fall through to proceed with scanning\n            // numbers\n            case 48 /* _0 */:\n            case 49 /* _1 */:\n            case 50 /* _2 */:\n            case 51 /* _3 */:\n            case 52 /* _4 */:\n            case 53 /* _5 */:\n            case 54 /* _6 */:\n            case 55 /* _7 */:\n            case 56 /* _8 */:\n            case 57 /* _9 */:\n                value += scanNumber();\n                return token = 11 /* NumericLiteral */;\n            // literals and unknown symbols\n            default:\n                // is a literal? Read the full word.\n                while (pos < len && isUnknownContentCharacter(code)) {\n                    pos++;\n                    code = text.charCodeAt(pos);\n                }\n                if (tokenOffset !== pos) {\n                    value = text.substring(tokenOffset, pos);\n                    // keywords: true, false, null\n                    switch (value) {\n                        case 'true': return token = 8 /* TrueKeyword */;\n                        case 'false': return token = 9 /* FalseKeyword */;\n                        case 'null': return token = 7 /* NullKeyword */;\n                    }\n                    return token = 16 /* Unknown */;\n                }\n                // some\n                value += String.fromCharCode(code);\n                pos++;\n                return token = 16 /* Unknown */;\n        }\n    }\n    function isUnknownContentCharacter(code) {\n        if (isWhiteSpace(code) || isLineBreak(code)) {\n            return false;\n        }\n        switch (code) {\n            case 125 /* closeBrace */:\n            case 93 /* closeBracket */:\n            case 123 /* openBrace */:\n            case 91 /* openBracket */:\n            case 34 /* doubleQuote */:\n            case 58 /* colon */:\n            case 44 /* comma */:\n            case 47 /* slash */:\n                return false;\n        }\n        return true;\n    }\n    function scanNextNonTrivia() {\n        var result;\n        do {\n            result = scanNext();\n        } while (result >= 12 /* LineCommentTrivia */ && result <= 15 /* Trivia */);\n        return result;\n    }\n    return {\n        setPosition: setPosition,\n        getPosition: function () { return pos; },\n        scan: ignoreTrivia ? scanNextNonTrivia : scanNext,\n        getToken: function () { return token; },\n        getTokenValue: function () { return value; },\n        getTokenOffset: function () { return tokenOffset; },\n        getTokenLength: function () { return pos - tokenOffset; },\n        getTokenStartLine: function () { return lineStartOffset; },\n        getTokenStartCharacter: function () { return tokenOffset - prevTokenLineStartOffset; },\n        getTokenError: function () { return scanError; },\n    };\n}\nfunction isWhiteSpace(ch) {\n    return ch === 32 /* space */ || ch === 9 /* tab */ || ch === 11 /* verticalTab */ || ch === 12 /* formFeed */ ||\n        ch === 160 /* nonBreakingSpace */ || ch === 5760 /* ogham */ || ch >= 8192 /* enQuad */ && ch <= 8203 /* zeroWidthSpace */ ||\n        ch === 8239 /* narrowNoBreakSpace */ || ch === 8287 /* mathematicalSpace */ || ch === 12288 /* ideographicSpace */ || ch === 65279 /* byteOrderMark */;\n}\nfunction isLineBreak(ch) {\n    return ch === 10 /* lineFeed */ || ch === 13 /* carriageReturn */ || ch === 8232 /* lineSeparator */ || ch === 8233 /* paragraphSeparator */;\n}\nfunction isDigit(ch) {\n    return ch >= 48 /* _0 */ && ch <= 57 /* _9 */;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nimport { createScanner } from './scanner.js';\nexport function format(documentText, range, options) {\n    var initialIndentLevel;\n    var formatText;\n    var formatTextStart;\n    var rangeStart;\n    var rangeEnd;\n    if (range) {\n        rangeStart = range.offset;\n        rangeEnd = rangeStart + range.length;\n        formatTextStart = rangeStart;\n        while (formatTextStart > 0 && !isEOL(documentText, formatTextStart - 1)) {\n            formatTextStart--;\n        }\n        var endOffset = rangeEnd;\n        while (endOffset < documentText.length && !isEOL(documentText, endOffset)) {\n            endOffset++;\n        }\n        formatText = documentText.substring(formatTextStart, endOffset);\n        initialIndentLevel = computeIndentLevel(formatText, options);\n    }\n    else {\n        formatText = documentText;\n        initialIndentLevel = 0;\n        formatTextStart = 0;\n        rangeStart = 0;\n        rangeEnd = documentText.length;\n    }\n    var eol = getEOL(options, documentText);\n    var lineBreak = false;\n    var indentLevel = 0;\n    var indentValue;\n    if (options.insertSpaces) {\n        indentValue = repeat(' ', options.tabSize || 4);\n    }\n    else {\n        indentValue = '\\t';\n    }\n    var scanner = createScanner(formatText, false);\n    var hasError = false;\n    function newLineAndIndent() {\n        return eol + repeat(indentValue, initialIndentLevel + indentLevel);\n    }\n    function scanNext() {\n        var token = scanner.scan();\n        lineBreak = false;\n        while (token === 15 /* Trivia */ || token === 14 /* LineBreakTrivia */) {\n            lineBreak = lineBreak || (token === 14 /* LineBreakTrivia */);\n            token = scanner.scan();\n        }\n        hasError = token === 16 /* Unknown */ || scanner.getTokenError() !== 0 /* None */;\n        return token;\n    }\n    var editOperations = [];\n    function addEdit(text, startOffset, endOffset) {\n        if (!hasError && startOffset < rangeEnd && endOffset > rangeStart && documentText.substring(startOffset, endOffset) !== text) {\n            editOperations.push({ offset: startOffset, length: endOffset - startOffset, content: text });\n        }\n    }\n    var firstToken = scanNext();\n    if (firstToken !== 17 /* EOF */) {\n        var firstTokenStart = scanner.getTokenOffset() + formatTextStart;\n        var initialIndent = repeat(indentValue, initialIndentLevel);\n        addEdit(initialIndent, formatTextStart, firstTokenStart);\n    }\n    while (firstToken !== 17 /* EOF */) {\n        var firstTokenEnd = scanner.getTokenOffset() + scanner.getTokenLength() + formatTextStart;\n        var secondToken = scanNext();\n        var replaceContent = '';\n        while (!lineBreak && (secondToken === 12 /* LineCommentTrivia */ || secondToken === 13 /* BlockCommentTrivia */)) {\n            // comments on the same line: keep them on the same line, but ignore them otherwise\n            var commentTokenStart = scanner.getTokenOffset() + formatTextStart;\n            addEdit(' ', firstTokenEnd, commentTokenStart);\n            firstTokenEnd = scanner.getTokenOffset() + scanner.getTokenLength() + formatTextStart;\n            replaceContent = secondToken === 12 /* LineCommentTrivia */ ? newLineAndIndent() : '';\n            secondToken = scanNext();\n        }\n        if (secondToken === 2 /* CloseBraceToken */) {\n            if (firstToken !== 1 /* OpenBraceToken */) {\n                indentLevel--;\n                replaceContent = newLineAndIndent();\n            }\n        }\n        else if (secondToken === 4 /* CloseBracketToken */) {\n            if (firstToken !== 3 /* OpenBracketToken */) {\n                indentLevel--;\n                replaceContent = newLineAndIndent();\n            }\n        }\n        else {\n            switch (firstToken) {\n                case 3 /* OpenBracketToken */:\n                case 1 /* OpenBraceToken */:\n                    indentLevel++;\n                    replaceContent = newLineAndIndent();\n                    break;\n                case 5 /* CommaToken */:\n                case 12 /* LineCommentTrivia */:\n                    replaceContent = newLineAndIndent();\n                    break;\n                case 13 /* BlockCommentTrivia */:\n                    if (lineBreak) {\n                        replaceContent = newLineAndIndent();\n                    }\n                    else {\n                        // symbol following comment on the same line: keep on same line, separate with ' '\n                        replaceContent = ' ';\n                    }\n                    break;\n                case 6 /* ColonToken */:\n                    replaceContent = ' ';\n                    break;\n                case 10 /* StringLiteral */:\n                    if (secondToken === 6 /* ColonToken */) {\n                        replaceContent = '';\n                        break;\n                    }\n                // fall through\n                case 7 /* NullKeyword */:\n                case 8 /* TrueKeyword */:\n                case 9 /* FalseKeyword */:\n                case 11 /* NumericLiteral */:\n                case 2 /* CloseBraceToken */:\n                case 4 /* CloseBracketToken */:\n                    if (secondToken === 12 /* LineCommentTrivia */ || secondToken === 13 /* BlockCommentTrivia */) {\n                        replaceContent = ' ';\n                    }\n                    else if (secondToken !== 5 /* CommaToken */ && secondToken !== 17 /* EOF */) {\n                        hasError = true;\n                    }\n                    break;\n                case 16 /* Unknown */:\n                    hasError = true;\n                    break;\n            }\n            if (lineBreak && (secondToken === 12 /* LineCommentTrivia */ || secondToken === 13 /* BlockCommentTrivia */)) {\n                replaceContent = newLineAndIndent();\n            }\n        }\n        var secondTokenStart = scanner.getTokenOffset() + formatTextStart;\n        addEdit(replaceContent, firstTokenEnd, secondTokenStart);\n        firstToken = secondToken;\n    }\n    return editOperations;\n}\nfunction repeat(s, count) {\n    var result = '';\n    for (var i = 0; i < count; i++) {\n        result += s;\n    }\n    return result;\n}\nfunction computeIndentLevel(content, options) {\n    var i = 0;\n    var nChars = 0;\n    var tabSize = options.tabSize || 4;\n    while (i < content.length) {\n        var ch = content.charAt(i);\n        if (ch === ' ') {\n            nChars++;\n        }\n        else if (ch === '\\t') {\n            nChars += tabSize;\n        }\n        else {\n            break;\n        }\n        i++;\n    }\n    return Math.floor(nChars / tabSize);\n}\nfunction getEOL(options, text) {\n    for (var i = 0; i < text.length; i++) {\n        var ch = text.charAt(i);\n        if (ch === '\\r') {\n            if (i + 1 < text.length && text.charAt(i + 1) === '\\n') {\n                return '\\r\\n';\n            }\n            return '\\r';\n        }\n        else if (ch === '\\n') {\n            return '\\n';\n        }\n    }\n    return (options && options.eol) || '\\n';\n}\nexport function isEOL(text, offset) {\n    return '\\r\\n'.indexOf(text.charAt(offset)) !== -1;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nimport { createScanner } from './scanner.js';\nvar ParseOptions;\n(function (ParseOptions) {\n    ParseOptions.DEFAULT = {\n        allowTrailingComma: false\n    };\n})(ParseOptions || (ParseOptions = {}));\n/**\n * For a given offset, evaluate the location in the JSON document. Each segment in the location path is either a property name or an array index.\n */\nexport function getLocation(text, position) {\n    var segments = []; // strings or numbers\n    var earlyReturnException = new Object();\n    var previousNode = undefined;\n    var previousNodeInst = {\n        value: {},\n        offset: 0,\n        length: 0,\n        type: 'object',\n        parent: undefined\n    };\n    var isAtPropertyKey = false;\n    function setPreviousNode(value, offset, length, type) {\n        previousNodeInst.value = value;\n        previousNodeInst.offset = offset;\n        previousNodeInst.length = length;\n        previousNodeInst.type = type;\n        previousNodeInst.colonOffset = undefined;\n        previousNode = previousNodeInst;\n    }\n    try {\n        visit(text, {\n            onObjectBegin: function (offset, length) {\n                if (position <= offset) {\n                    throw earlyReturnException;\n                }\n                previousNode = undefined;\n                isAtPropertyKey = position > offset;\n                segments.push(''); // push a placeholder (will be replaced)\n            },\n            onObjectProperty: function (name, offset, length) {\n                if (position < offset) {\n                    throw earlyReturnException;\n                }\n                setPreviousNode(name, offset, length, 'property');\n                segments[segments.length - 1] = name;\n                if (position <= offset + length) {\n                    throw earlyReturnException;\n                }\n            },\n            onObjectEnd: function (offset, length) {\n                if (position <= offset) {\n                    throw earlyReturnException;\n                }\n                previousNode = undefined;\n                segments.pop();\n            },\n            onArrayBegin: function (offset, length) {\n                if (position <= offset) {\n                    throw earlyReturnException;\n                }\n                previousNode = undefined;\n                segments.push(0);\n            },\n            onArrayEnd: function (offset, length) {\n                if (position <= offset) {\n                    throw earlyReturnException;\n                }\n                previousNode = undefined;\n                segments.pop();\n            },\n            onLiteralValue: function (value, offset, length) {\n                if (position < offset) {\n                    throw earlyReturnException;\n                }\n                setPreviousNode(value, offset, length, getNodeType(value));\n                if (position <= offset + length) {\n                    throw earlyReturnException;\n                }\n            },\n            onSeparator: function (sep, offset, length) {\n                if (position <= offset) {\n                    throw earlyReturnException;\n                }\n                if (sep === ':' && previousNode && previousNode.type === 'property') {\n                    previousNode.colonOffset = offset;\n                    isAtPropertyKey = false;\n                    previousNode = undefined;\n                }\n                else if (sep === ',') {\n                    var last = segments[segments.length - 1];\n                    if (typeof last === 'number') {\n                        segments[segments.length - 1] = last + 1;\n                    }\n                    else {\n                        isAtPropertyKey = true;\n                        segments[segments.length - 1] = '';\n                    }\n                    previousNode = undefined;\n                }\n            }\n        });\n    }\n    catch (e) {\n        if (e !== earlyReturnException) {\n            throw e;\n        }\n    }\n    return {\n        path: segments,\n        previousNode: previousNode,\n        isAtPropertyKey: isAtPropertyKey,\n        matches: function (pattern) {\n            var k = 0;\n            for (var i = 0; k < pattern.length && i < segments.length; i++) {\n                if (pattern[k] === segments[i] || pattern[k] === '*') {\n                    k++;\n                }\n                else if (pattern[k] !== '**') {\n                    return false;\n                }\n            }\n            return k === pattern.length;\n        }\n    };\n}\n/**\n * Parses the given text and returns the object the JSON content represents. On invalid input, the parser tries to be as fault tolerant as possible, but still return a result.\n * Therefore always check the errors list to find out if the input was valid.\n */\nexport function parse(text, errors, options) {\n    if (errors === void 0) { errors = []; }\n    if (options === void 0) { options = ParseOptions.DEFAULT; }\n    var currentProperty = null;\n    var currentParent = [];\n    var previousParents = [];\n    function onValue(value) {\n        if (Array.isArray(currentParent)) {\n            currentParent.push(value);\n        }\n        else if (currentProperty !== null) {\n            currentParent[currentProperty] = value;\n        }\n    }\n    var visitor = {\n        onObjectBegin: function () {\n            var object = {};\n            onValue(object);\n            previousParents.push(currentParent);\n            currentParent = object;\n            currentProperty = null;\n        },\n        onObjectProperty: function (name) {\n            currentProperty = name;\n        },\n        onObjectEnd: function () {\n            currentParent = previousParents.pop();\n        },\n        onArrayBegin: function () {\n            var array = [];\n            onValue(array);\n            previousParents.push(currentParent);\n            currentParent = array;\n            currentProperty = null;\n        },\n        onArrayEnd: function () {\n            currentParent = previousParents.pop();\n        },\n        onLiteralValue: onValue,\n        onError: function (error, offset, length) {\n            errors.push({ error: error, offset: offset, length: length });\n        }\n    };\n    visit(text, visitor, options);\n    return currentParent[0];\n}\n/**\n * Parses the given text and returns a tree representation the JSON content. On invalid input, the parser tries to be as fault tolerant as possible, but still return a result.\n */\nexport function parseTree(text, errors, options) {\n    if (errors === void 0) { errors = []; }\n    if (options === void 0) { options = ParseOptions.DEFAULT; }\n    var currentParent = { type: 'array', offset: -1, length: -1, children: [], parent: undefined }; // artificial root\n    function ensurePropertyComplete(endOffset) {\n        if (currentParent.type === 'property') {\n            currentParent.length = endOffset - currentParent.offset;\n            currentParent = currentParent.parent;\n        }\n    }\n    function onValue(valueNode) {\n        currentParent.children.push(valueNode);\n        return valueNode;\n    }\n    var visitor = {\n        onObjectBegin: function (offset) {\n            currentParent = onValue({ type: 'object', offset: offset, length: -1, parent: currentParent, children: [] });\n        },\n        onObjectProperty: function (name, offset, length) {\n            currentParent = onValue({ type: 'property', offset: offset, length: -1, parent: currentParent, children: [] });\n            currentParent.children.push({ type: 'string', value: name, offset: offset, length: length, parent: currentParent });\n        },\n        onObjectEnd: function (offset, length) {\n            ensurePropertyComplete(offset + length); // in case of a missing value for a property: make sure property is complete\n            currentParent.length = offset + length - currentParent.offset;\n            currentParent = currentParent.parent;\n            ensurePropertyComplete(offset + length);\n        },\n        onArrayBegin: function (offset, length) {\n            currentParent = onValue({ type: 'array', offset: offset, length: -1, parent: currentParent, children: [] });\n        },\n        onArrayEnd: function (offset, length) {\n            currentParent.length = offset + length - currentParent.offset;\n            currentParent = currentParent.parent;\n            ensurePropertyComplete(offset + length);\n        },\n        onLiteralValue: function (value, offset, length) {\n            onValue({ type: getNodeType(value), offset: offset, length: length, parent: currentParent, value: value });\n            ensurePropertyComplete(offset + length);\n        },\n        onSeparator: function (sep, offset, length) {\n            if (currentParent.type === 'property') {\n                if (sep === ':') {\n                    currentParent.colonOffset = offset;\n                }\n                else if (sep === ',') {\n                    ensurePropertyComplete(offset);\n                }\n            }\n        },\n        onError: function (error, offset, length) {\n            errors.push({ error: error, offset: offset, length: length });\n        }\n    };\n    visit(text, visitor, options);\n    var result = currentParent.children[0];\n    if (result) {\n        delete result.parent;\n    }\n    return result;\n}\n/**\n * Finds the node at the given path in a JSON DOM.\n */\nexport function findNodeAtLocation(root, path) {\n    if (!root) {\n        return undefined;\n    }\n    var node = root;\n    for (var _i = 0, path_1 = path; _i < path_1.length; _i++) {\n        var segment = path_1[_i];\n        if (typeof segment === 'string') {\n            if (node.type !== 'object' || !Array.isArray(node.children)) {\n                return undefined;\n            }\n            var found = false;\n            for (var _a = 0, _b = node.children; _a < _b.length; _a++) {\n                var propertyNode = _b[_a];\n                if (Array.isArray(propertyNode.children) && propertyNode.children[0].value === segment) {\n                    node = propertyNode.children[1];\n                    found = true;\n                    break;\n                }\n            }\n            if (!found) {\n                return undefined;\n            }\n        }\n        else {\n            var index = segment;\n            if (node.type !== 'array' || index < 0 || !Array.isArray(node.children) || index >= node.children.length) {\n                return undefined;\n            }\n            node = node.children[index];\n        }\n    }\n    return node;\n}\n/**\n * Gets the JSON path of the given JSON DOM node\n */\nexport function getNodePath(node) {\n    if (!node.parent || !node.parent.children) {\n        return [];\n    }\n    var path = getNodePath(node.parent);\n    if (node.parent.type === 'property') {\n        var key = node.parent.children[0].value;\n        path.push(key);\n    }\n    else if (node.parent.type === 'array') {\n        var index = node.parent.children.indexOf(node);\n        if (index !== -1) {\n            path.push(index);\n        }\n    }\n    return path;\n}\n/**\n * Evaluates the JavaScript object of the given JSON DOM node\n */\nexport function getNodeValue(node) {\n    switch (node.type) {\n        case 'array':\n            return node.children.map(getNodeValue);\n        case 'object':\n            var obj = Object.create(null);\n            for (var _i = 0, _a = node.children; _i < _a.length; _i++) {\n                var prop = _a[_i];\n                var valueNode = prop.children[1];\n                if (valueNode) {\n                    obj[prop.children[0].value] = getNodeValue(valueNode);\n                }\n            }\n            return obj;\n        case 'null':\n        case 'string':\n        case 'number':\n        case 'boolean':\n            return node.value;\n        default:\n            return undefined;\n    }\n}\nexport function contains(node, offset, includeRightBound) {\n    if (includeRightBound === void 0) { includeRightBound = false; }\n    return (offset >= node.offset && offset < (node.offset + node.length)) || includeRightBound && (offset === (node.offset + node.length));\n}\n/**\n * Finds the most inner node at the given offset. If includeRightBound is set, also finds nodes that end at the given offset.\n */\nexport function findNodeAtOffset(node, offset, includeRightBound) {\n    if (includeRightBound === void 0) { includeRightBound = false; }\n    if (contains(node, offset, includeRightBound)) {\n        var children = node.children;\n        if (Array.isArray(children)) {\n            for (var i = 0; i < children.length && children[i].offset <= offset; i++) {\n                var item = findNodeAtOffset(children[i], offset, includeRightBound);\n                if (item) {\n                    return item;\n                }\n            }\n        }\n        return node;\n    }\n    return undefined;\n}\n/**\n * Parses the given text and invokes the visitor functions for each object, array and literal reached.\n */\nexport function visit(text, visitor, options) {\n    if (options === void 0) { options = ParseOptions.DEFAULT; }\n    var _scanner = createScanner(text, false);\n    function toNoArgVisit(visitFunction) {\n        return visitFunction ? function () { return visitFunction(_scanner.getTokenOffset(), _scanner.getTokenLength(), _scanner.getTokenStartLine(), _scanner.getTokenStartCharacter()); } : function () { return true; };\n    }\n    function toOneArgVisit(visitFunction) {\n        return visitFunction ? function (arg) { return visitFunction(arg, _scanner.getTokenOffset(), _scanner.getTokenLength(), _scanner.getTokenStartLine(), _scanner.getTokenStartCharacter()); } : function () { return true; };\n    }\n    var onObjectBegin = toNoArgVisit(visitor.onObjectBegin), onObjectProperty = toOneArgVisit(visitor.onObjectProperty), onObjectEnd = toNoArgVisit(visitor.onObjectEnd), onArrayBegin = toNoArgVisit(visitor.onArrayBegin), onArrayEnd = toNoArgVisit(visitor.onArrayEnd), onLiteralValue = toOneArgVisit(visitor.onLiteralValue), onSeparator = toOneArgVisit(visitor.onSeparator), onComment = toNoArgVisit(visitor.onComment), onError = toOneArgVisit(visitor.onError);\n    var disallowComments = options && options.disallowComments;\n    var allowTrailingComma = options && options.allowTrailingComma;\n    function scanNext() {\n        while (true) {\n            var token = _scanner.scan();\n            switch (_scanner.getTokenError()) {\n                case 4 /* InvalidUnicode */:\n                    handleError(14 /* InvalidUnicode */);\n                    break;\n                case 5 /* InvalidEscapeCharacter */:\n                    handleError(15 /* InvalidEscapeCharacter */);\n                    break;\n                case 3 /* UnexpectedEndOfNumber */:\n                    handleError(13 /* UnexpectedEndOfNumber */);\n                    break;\n                case 1 /* UnexpectedEndOfComment */:\n                    if (!disallowComments) {\n                        handleError(11 /* UnexpectedEndOfComment */);\n                    }\n                    break;\n                case 2 /* UnexpectedEndOfString */:\n                    handleError(12 /* UnexpectedEndOfString */);\n                    break;\n                case 6 /* InvalidCharacter */:\n                    handleError(16 /* InvalidCharacter */);\n                    break;\n            }\n            switch (token) {\n                case 12 /* LineCommentTrivia */:\n                case 13 /* BlockCommentTrivia */:\n                    if (disallowComments) {\n                        handleError(10 /* InvalidCommentToken */);\n                    }\n                    else {\n                        onComment();\n                    }\n                    break;\n                case 16 /* Unknown */:\n                    handleError(1 /* InvalidSymbol */);\n                    break;\n                case 15 /* Trivia */:\n                case 14 /* LineBreakTrivia */:\n                    break;\n                default:\n                    return token;\n            }\n        }\n    }\n    function handleError(error, skipUntilAfter, skipUntil) {\n        if (skipUntilAfter === void 0) { skipUntilAfter = []; }\n        if (skipUntil === void 0) { skipUntil = []; }\n        onError(error);\n        if (skipUntilAfter.length + skipUntil.length > 0) {\n            var token = _scanner.getToken();\n            while (token !== 17 /* EOF */) {\n                if (skipUntilAfter.indexOf(token) !== -1) {\n                    scanNext();\n                    break;\n                }\n                else if (skipUntil.indexOf(token) !== -1) {\n                    break;\n                }\n                token = scanNext();\n            }\n        }\n    }\n    function parseString(isValue) {\n        var value = _scanner.getTokenValue();\n        if (isValue) {\n            onLiteralValue(value);\n        }\n        else {\n            onObjectProperty(value);\n        }\n        scanNext();\n        return true;\n    }\n    function parseLiteral() {\n        switch (_scanner.getToken()) {\n            case 11 /* NumericLiteral */:\n                var value = 0;\n                try {\n                    value = JSON.parse(_scanner.getTokenValue());\n                    if (typeof value !== 'number') {\n                        handleError(2 /* InvalidNumberFormat */);\n                        value = 0;\n                    }\n                }\n                catch (e) {\n                    handleError(2 /* InvalidNumberFormat */);\n                }\n                onLiteralValue(value);\n                break;\n            case 7 /* NullKeyword */:\n                onLiteralValue(null);\n                break;\n            case 8 /* TrueKeyword */:\n                onLiteralValue(true);\n                break;\n            case 9 /* FalseKeyword */:\n                onLiteralValue(false);\n                break;\n            default:\n                return false;\n        }\n        scanNext();\n        return true;\n    }\n    function parseProperty() {\n        if (_scanner.getToken() !== 10 /* StringLiteral */) {\n            handleError(3 /* PropertyNameExpected */, [], [2 /* CloseBraceToken */, 5 /* CommaToken */]);\n            return false;\n        }\n        parseString(false);\n        if (_scanner.getToken() === 6 /* ColonToken */) {\n            onSeparator(':');\n            scanNext(); // consume colon\n            if (!parseValue()) {\n                handleError(4 /* ValueExpected */, [], [2 /* CloseBraceToken */, 5 /* CommaToken */]);\n            }\n        }\n        else {\n            handleError(5 /* ColonExpected */, [], [2 /* CloseBraceToken */, 5 /* CommaToken */]);\n        }\n        return true;\n    }\n    function parseObject() {\n        onObjectBegin();\n        scanNext(); // consume open brace\n        var needsComma = false;\n        while (_scanner.getToken() !== 2 /* CloseBraceToken */ && _scanner.getToken() !== 17 /* EOF */) {\n            if (_scanner.getToken() === 5 /* CommaToken */) {\n                if (!needsComma) {\n                    handleError(4 /* ValueExpected */, [], []);\n                }\n                onSeparator(',');\n                scanNext(); // consume comma\n                if (_scanner.getToken() === 2 /* CloseBraceToken */ && allowTrailingComma) {\n                    break;\n                }\n            }\n            else if (needsComma) {\n                handleError(6 /* CommaExpected */, [], []);\n            }\n            if (!parseProperty()) {\n                handleError(4 /* ValueExpected */, [], [2 /* CloseBraceToken */, 5 /* CommaToken */]);\n            }\n            needsComma = true;\n        }\n        onObjectEnd();\n        if (_scanner.getToken() !== 2 /* CloseBraceToken */) {\n            handleError(7 /* CloseBraceExpected */, [2 /* CloseBraceToken */], []);\n        }\n        else {\n            scanNext(); // consume close brace\n        }\n        return true;\n    }\n    function parseArray() {\n        onArrayBegin();\n        scanNext(); // consume open bracket\n        var needsComma = false;\n        while (_scanner.getToken() !== 4 /* CloseBracketToken */ && _scanner.getToken() !== 17 /* EOF */) {\n            if (_scanner.getToken() === 5 /* CommaToken */) {\n                if (!needsComma) {\n                    handleError(4 /* ValueExpected */, [], []);\n                }\n                onSeparator(',');\n                scanNext(); // consume comma\n                if (_scanner.getToken() === 4 /* CloseBracketToken */ && allowTrailingComma) {\n                    break;\n                }\n            }\n            else if (needsComma) {\n                handleError(6 /* CommaExpected */, [], []);\n            }\n            if (!parseValue()) {\n                handleError(4 /* ValueExpected */, [], [4 /* CloseBracketToken */, 5 /* CommaToken */]);\n            }\n            needsComma = true;\n        }\n        onArrayEnd();\n        if (_scanner.getToken() !== 4 /* CloseBracketToken */) {\n            handleError(8 /* CloseBracketExpected */, [4 /* CloseBracketToken */], []);\n        }\n        else {\n            scanNext(); // consume close bracket\n        }\n        return true;\n    }\n    function parseValue() {\n        switch (_scanner.getToken()) {\n            case 3 /* OpenBracketToken */:\n                return parseArray();\n            case 1 /* OpenBraceToken */:\n                return parseObject();\n            case 10 /* StringLiteral */:\n                return parseString(true);\n            default:\n                return parseLiteral();\n        }\n    }\n    scanNext();\n    if (_scanner.getToken() === 17 /* EOF */) {\n        if (options.allowEmptyContent) {\n            return true;\n        }\n        handleError(4 /* ValueExpected */, [], []);\n        return false;\n    }\n    if (!parseValue()) {\n        handleError(4 /* ValueExpected */, [], []);\n        return false;\n    }\n    if (_scanner.getToken() !== 17 /* EOF */) {\n        handleError(9 /* EndOfFileExpected */, [], []);\n    }\n    return true;\n}\n/**\n * Takes JSON with JavaScript-style comments and remove\n * them. Optionally replaces every none-newline character\n * of comments with a replaceCharacter\n */\nexport function stripComments(text, replaceCh) {\n    var _scanner = createScanner(text), parts = [], kind, offset = 0, pos;\n    do {\n        pos = _scanner.getPosition();\n        kind = _scanner.scan();\n        switch (kind) {\n            case 12 /* LineCommentTrivia */:\n            case 13 /* BlockCommentTrivia */:\n            case 17 /* EOF */:\n                if (offset !== pos) {\n                    parts.push(text.substring(offset, pos));\n                }\n                if (replaceCh !== undefined) {\n                    parts.push(_scanner.getTokenValue().replace(/[^\\r\\n]/g, replaceCh));\n                }\n                offset = _scanner.getPosition();\n                break;\n        }\n    } while (kind !== 17 /* EOF */);\n    return parts.join('');\n}\nexport function getNodeType(value) {\n    switch (typeof value) {\n        case 'boolean': return 'boolean';\n        case 'number': return 'number';\n        case 'string': return 'string';\n        case 'object': {\n            if (!value) {\n                return 'null';\n            }\n            else if (Array.isArray(value)) {\n                return 'array';\n            }\n            return 'object';\n        }\n        default: return 'null';\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nimport { format, isEOL } from './format.js';\nimport { parseTree, findNodeAtLocation } from './parser.js';\nexport function removeProperty(text, path, options) {\n    return setProperty(text, path, void 0, options);\n}\nexport function setProperty(text, originalPath, value, options) {\n    var _a;\n    var path = originalPath.slice();\n    var errors = [];\n    var root = parseTree(text, errors);\n    var parent = void 0;\n    var lastSegment = void 0;\n    while (path.length > 0) {\n        lastSegment = path.pop();\n        parent = findNodeAtLocation(root, path);\n        if (parent === void 0 && value !== void 0) {\n            if (typeof lastSegment === 'string') {\n                value = (_a = {}, _a[lastSegment] = value, _a);\n            }\n            else {\n                value = [value];\n            }\n        }\n        else {\n            break;\n        }\n    }\n    if (!parent) {\n        // empty document\n        if (value === void 0) { // delete\n            throw new Error('Can not delete in empty document');\n        }\n        return withFormatting(text, { offset: root ? root.offset : 0, length: root ? root.length : 0, content: JSON.stringify(value) }, options);\n    }\n    else if (parent.type === 'object' && typeof lastSegment === 'string' && Array.isArray(parent.children)) {\n        var existing = findNodeAtLocation(parent, [lastSegment]);\n        if (existing !== void 0) {\n            if (value === void 0) { // delete\n                if (!existing.parent) {\n                    throw new Error('Malformed AST');\n                }\n                var propertyIndex = parent.children.indexOf(existing.parent);\n                var removeBegin = void 0;\n                var removeEnd = existing.parent.offset + existing.parent.length;\n                if (propertyIndex > 0) {\n                    // remove the comma of the previous node\n                    var previous = parent.children[propertyIndex - 1];\n                    removeBegin = previous.offset + previous.length;\n                }\n                else {\n                    removeBegin = parent.offset + 1;\n                    if (parent.children.length > 1) {\n                        // remove the comma of the next node\n                        var next = parent.children[1];\n                        removeEnd = next.offset;\n                    }\n                }\n                return withFormatting(text, { offset: removeBegin, length: removeEnd - removeBegin, content: '' }, options);\n            }\n            else {\n                // set value of existing property\n                return withFormatting(text, { offset: existing.offset, length: existing.length, content: JSON.stringify(value) }, options);\n            }\n        }\n        else {\n            if (value === void 0) { // delete\n                return []; // property does not exist, nothing to do\n            }\n            var newProperty = JSON.stringify(lastSegment) + \": \" + JSON.stringify(value);\n            var index = options.getInsertionIndex ? options.getInsertionIndex(parent.children.map(function (p) { return p.children[0].value; })) : parent.children.length;\n            var edit = void 0;\n            if (index > 0) {\n                var previous = parent.children[index - 1];\n                edit = { offset: previous.offset + previous.length, length: 0, content: ',' + newProperty };\n            }\n            else if (parent.children.length === 0) {\n                edit = { offset: parent.offset + 1, length: 0, content: newProperty };\n            }\n            else {\n                edit = { offset: parent.offset + 1, length: 0, content: newProperty + ',' };\n            }\n            return withFormatting(text, edit, options);\n        }\n    }\n    else if (parent.type === 'array' && typeof lastSegment === 'number' && Array.isArray(parent.children)) {\n        var insertIndex = lastSegment;\n        if (insertIndex === -1) {\n            // Insert\n            var newProperty = \"\" + JSON.stringify(value);\n            var edit = void 0;\n            if (parent.children.length === 0) {\n                edit = { offset: parent.offset + 1, length: 0, content: newProperty };\n            }\n            else {\n                var previous = parent.children[parent.children.length - 1];\n                edit = { offset: previous.offset + previous.length, length: 0, content: ',' + newProperty };\n            }\n            return withFormatting(text, edit, options);\n        }\n        else if (value === void 0 && parent.children.length >= 0) {\n            // Removal\n            var removalIndex = lastSegment;\n            var toRemove = parent.children[removalIndex];\n            var edit = void 0;\n            if (parent.children.length === 1) {\n                // only item\n                edit = { offset: parent.offset + 1, length: parent.length - 2, content: '' };\n            }\n            else if (parent.children.length - 1 === removalIndex) {\n                // last item\n                var previous = parent.children[removalIndex - 1];\n                var offset = previous.offset + previous.length;\n                var parentEndOffset = parent.offset + parent.length;\n                edit = { offset: offset, length: parentEndOffset - 2 - offset, content: '' };\n            }\n            else {\n                edit = { offset: toRemove.offset, length: parent.children[removalIndex + 1].offset - toRemove.offset, content: '' };\n            }\n            return withFormatting(text, edit, options);\n        }\n        else if (value !== void 0) {\n            var edit = void 0;\n            var newProperty = \"\" + JSON.stringify(value);\n            if (!options.isArrayInsertion && parent.children.length > lastSegment) {\n                var toModify = parent.children[lastSegment];\n                edit = { offset: toModify.offset, length: toModify.length, content: newProperty };\n            }\n            else if (parent.children.length === 0 || lastSegment === 0) {\n                edit = { offset: parent.offset + 1, length: 0, content: parent.children.length === 0 ? newProperty : newProperty + ',' };\n            }\n            else {\n                var index = lastSegment > parent.children.length ? parent.children.length : lastSegment;\n                var previous = parent.children[index - 1];\n                edit = { offset: previous.offset + previous.length, length: 0, content: ',' + newProperty };\n            }\n            return withFormatting(text, edit, options);\n        }\n        else {\n            throw new Error(\"Can not \" + (value === void 0 ? 'remove' : (options.isArrayInsertion ? 'insert' : 'modify')) + \" Array index \" + insertIndex + \" as length is not sufficient\");\n        }\n    }\n    else {\n        throw new Error(\"Can not add \" + (typeof lastSegment !== 'number' ? 'index' : 'property') + \" to parent of type \" + parent.type);\n    }\n}\nfunction withFormatting(text, edit, options) {\n    if (!options.formattingOptions) {\n        return [edit];\n    }\n    // apply the edit\n    var newText = applyEdit(text, edit);\n    // format the new text\n    var begin = edit.offset;\n    var end = edit.offset + edit.content.length;\n    if (edit.length === 0 || edit.content.length === 0) { // insert or remove\n        while (begin > 0 && !isEOL(newText, begin - 1)) {\n            begin--;\n        }\n        while (end < newText.length && !isEOL(newText, end)) {\n            end++;\n        }\n    }\n    var edits = format(newText, { offset: begin, length: end - begin }, options.formattingOptions);\n    // apply the formatting edits and track the begin and end offsets of the changes\n    for (var i = edits.length - 1; i >= 0; i--) {\n        var edit_1 = edits[i];\n        newText = applyEdit(newText, edit_1);\n        begin = Math.min(begin, edit_1.offset);\n        end = Math.max(end, edit_1.offset + edit_1.length);\n        end += edit_1.content.length - edit_1.length;\n    }\n    // create a single edit with all changes\n    var editLength = text.length - (newText.length - end) - begin;\n    return [{ offset: begin, length: editLength, content: newText.substring(begin, end) }];\n}\nexport function applyEdit(text, edit) {\n    return text.substring(0, edit.offset) + edit.content + text.substring(edit.offset + edit.length);\n}\nexport function isWS(text, offset) {\n    return '\\r\\n \\t'.indexOf(text.charAt(offset)) !== -1;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nimport * as formatter from './impl/format.js';\nimport * as edit from './impl/edit.js';\nimport * as scanner from './impl/scanner.js';\nimport * as parser from './impl/parser.js';\n/**\n * Creates a JSON scanner on the given text.\n * If ignoreTrivia is set, whitespaces or comments are ignored.\n */\nexport var createScanner = scanner.createScanner;\n/**\n * For a given offset, evaluate the location in the JSON document. Each segment in the location path is either a property name or an array index.\n */\nexport var getLocation = parser.getLocation;\n/**\n * Parses the given text and returns the object the JSON content represents. On invalid input, the parser tries to be as fault tolerant as possible, but still return a result.\n * Therefore, always check the errors list to find out if the input was valid.\n */\nexport var parse = parser.parse;\n/**\n * Parses the given text and returns a tree representation the JSON content. On invalid input, the parser tries to be as fault tolerant as possible, but still return a result.\n */\nexport var parseTree = parser.parseTree;\n/**\n * Finds the node at the given path in a JSON DOM.\n */\nexport var findNodeAtLocation = parser.findNodeAtLocation;\n/**\n * Finds the innermost node at the given offset. If includeRightBound is set, also finds nodes that end at the given offset.\n */\nexport var findNodeAtOffset = parser.findNodeAtOffset;\n/**\n * Gets the JSON path of the given JSON DOM node\n */\nexport var getNodePath = parser.getNodePath;\n/**\n * Evaluates the JavaScript object of the given JSON DOM node\n */\nexport var getNodeValue = parser.getNodeValue;\n/**\n * Parses the given text and invokes the visitor functions for each object, array and literal reached.\n */\nexport var visit = parser.visit;\n/**\n * Takes JSON with JavaScript-style comments and remove\n * them. Optionally replaces every none-newline character\n * of comments with a replaceCharacter\n */\nexport var stripComments = parser.stripComments;\nexport function printParseErrorCode(code) {\n    switch (code) {\n        case 1 /* InvalidSymbol */: return 'InvalidSymbol';\n        case 2 /* InvalidNumberFormat */: return 'InvalidNumberFormat';\n        case 3 /* PropertyNameExpected */: return 'PropertyNameExpected';\n        case 4 /* ValueExpected */: return 'ValueExpected';\n        case 5 /* ColonExpected */: return 'ColonExpected';\n        case 6 /* CommaExpected */: return 'CommaExpected';\n        case 7 /* CloseBraceExpected */: return 'CloseBraceExpected';\n        case 8 /* CloseBracketExpected */: return 'CloseBracketExpected';\n        case 9 /* EndOfFileExpected */: return 'EndOfFileExpected';\n        case 10 /* InvalidCommentToken */: return 'InvalidCommentToken';\n        case 11 /* UnexpectedEndOfComment */: return 'UnexpectedEndOfComment';\n        case 12 /* UnexpectedEndOfString */: return 'UnexpectedEndOfString';\n        case 13 /* UnexpectedEndOfNumber */: return 'UnexpectedEndOfNumber';\n        case 14 /* InvalidUnicode */: return 'InvalidUnicode';\n        case 15 /* InvalidEscapeCharacter */: return 'InvalidEscapeCharacter';\n        case 16 /* InvalidCharacter */: return 'InvalidCharacter';\n    }\n    return '<unknown ParseErrorCode>';\n}\n/**\n * Computes the edits needed to format a JSON document.\n *\n * @param documentText The input text\n * @param range The range to format or `undefined` to format the full content\n * @param options The formatting options\n * @returns A list of edit operations describing the formatting changes to the original document. Edits can be either inserts, replacements or\n * removals of text segments. All offsets refer to the original state of the document. No two edits must change or remove the same range of\n * text in the original document. However, multiple edits can have\n * the same offset, for example multiple inserts, or an insert followed by a remove or replace. The order in the array defines which edit is applied first.\n * To apply edits to an input, you can use `applyEdits`.\n */\nexport function format(documentText, range, options) {\n    return formatter.format(documentText, range, options);\n}\n/**\n * Computes the edits needed to modify a value in the JSON document.\n *\n * @param documentText The input text\n * @param path The path of the value to change. The path represents either to the document root, a property or an array item.\n * If the path points to an non-existing property or item, it will be created.\n * @param value The new value for the specified property or item. If the value is undefined,\n * the property or item will be removed.\n * @param options Options\n * @returns A list of edit operations describing the formatting changes to the original document. Edits can be either inserts, replacements or\n * removals of text segments. All offsets refer to the original state of the document. No two edits must change or remove the same range of\n * text in the original document. However, multiple edits can have\n * the same offset, for example multiple inserts, or an insert followed by a remove or replace. The order in the array defines which edit is applied first.\n * To apply edits to an input, you can use `applyEdits`.\n */\nexport function modify(text, path, value, options) {\n    return edit.setProperty(text, path, value, options);\n}\n/**\n * Applies edits to a input string.\n */\nexport function applyEdits(text, edits) {\n    for (var i = edits.length - 1; i >= 0; i--) {\n        text = edit.applyEdit(text, edits[i]);\n    }\n    return text;\n}\n","/*---------------------------------------------------------------------------------------------\n*  Copyright (c) Microsoft Corporation. All rights reserved.\n*  Licensed under the MIT License. See License.txt in the project root for license information.\n*--------------------------------------------------------------------------------------------*/\nexport function equals(one, other) {\n    if (one === other) {\n        return true;\n    }\n    if (one === null || one === undefined || other === null || other === undefined) {\n        return false;\n    }\n    if (typeof one !== typeof other) {\n        return false;\n    }\n    if (typeof one !== 'object') {\n        return false;\n    }\n    if ((Array.isArray(one)) !== (Array.isArray(other))) {\n        return false;\n    }\n    var i, key;\n    if (Array.isArray(one)) {\n        if (one.length !== other.length) {\n            return false;\n        }\n        for (i = 0; i < one.length; i++) {\n            if (!equals(one[i], other[i])) {\n                return false;\n            }\n        }\n    }\n    else {\n        var oneKeys = [];\n        for (key in one) {\n            oneKeys.push(key);\n        }\n        oneKeys.sort();\n        var otherKeys = [];\n        for (key in other) {\n            otherKeys.push(key);\n        }\n        otherKeys.sort();\n        if (!equals(oneKeys, otherKeys)) {\n            return false;\n        }\n        for (i = 0; i < oneKeys.length; i++) {\n            if (!equals(one[oneKeys[i]], other[oneKeys[i]])) {\n                return false;\n            }\n        }\n    }\n    return true;\n}\nexport function isNumber(val) {\n    return typeof val === 'number';\n}\nexport function isDefined(val) {\n    return typeof val !== 'undefined';\n}\nexport function isBoolean(val) {\n    return typeof val === 'boolean';\n}\nexport function isString(val) {\n    return typeof val === 'string';\n}\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\n/**\r\n * The Position namespace provides helper functions to work with\r\n * [Position](#Position) literals.\r\n */\r\nexport var Position;\r\n(function (Position) {\r\n    /**\r\n     * Creates a new Position literal from the given line and character.\r\n     * @param line The position's line.\r\n     * @param character The position's character.\r\n     */\r\n    function create(line, character) {\r\n        return { line: line, character: character };\r\n    }\r\n    Position.create = create;\r\n    /**\r\n     * Checks whether the given liternal conforms to the [Position](#Position) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(candidate) && Is.number(candidate.line) && Is.number(candidate.character);\r\n    }\r\n    Position.is = is;\r\n})(Position || (Position = {}));\r\n/**\r\n * The Range namespace provides helper functions to work with\r\n * [Range](#Range) literals.\r\n */\r\nexport var Range;\r\n(function (Range) {\r\n    function create(one, two, three, four) {\r\n        if (Is.number(one) && Is.number(two) && Is.number(three) && Is.number(four)) {\r\n            return { start: Position.create(one, two), end: Position.create(three, four) };\r\n        }\r\n        else if (Position.is(one) && Position.is(two)) {\r\n            return { start: one, end: two };\r\n        }\r\n        else {\r\n            throw new Error(\"Range#create called with invalid arguments[\" + one + \", \" + two + \", \" + three + \", \" + four + \"]\");\r\n        }\r\n    }\r\n    Range.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Range](#Range) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(candidate) && Position.is(candidate.start) && Position.is(candidate.end);\r\n    }\r\n    Range.is = is;\r\n})(Range || (Range = {}));\r\n/**\r\n * The Location namespace provides helper functions to work with\r\n * [Location](#Location) literals.\r\n */\r\nexport var Location;\r\n(function (Location) {\r\n    /**\r\n     * Creates a Location literal.\r\n     * @param uri The location's uri.\r\n     * @param range The location's range.\r\n     */\r\n    function create(uri, range) {\r\n        return { uri: uri, range: range };\r\n    }\r\n    Location.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Location](#Location) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.string(candidate.uri) || Is.undefined(candidate.uri));\r\n    }\r\n    Location.is = is;\r\n})(Location || (Location = {}));\r\n/**\r\n * The LocationLink namespace provides helper functions to work with\r\n * [LocationLink](#LocationLink) literals.\r\n */\r\nexport var LocationLink;\r\n(function (LocationLink) {\r\n    /**\r\n     * Creates a LocationLink literal.\r\n     * @param targetUri The definition's uri.\r\n     * @param targetRange The full range of the definition.\r\n     * @param targetSelectionRange The span of the symbol definition at the target.\r\n     * @param originSelectionRange The span of the symbol being defined in the originating source file.\r\n     */\r\n    function create(targetUri, targetRange, targetSelectionRange, originSelectionRange) {\r\n        return { targetUri: targetUri, targetRange: targetRange, targetSelectionRange: targetSelectionRange, originSelectionRange: originSelectionRange };\r\n    }\r\n    LocationLink.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [LocationLink](#LocationLink) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.targetRange) && Is.string(candidate.targetUri)\r\n            && (Range.is(candidate.targetSelectionRange) || Is.undefined(candidate.targetSelectionRange))\r\n            && (Range.is(candidate.originSelectionRange) || Is.undefined(candidate.originSelectionRange));\r\n    }\r\n    LocationLink.is = is;\r\n})(LocationLink || (LocationLink = {}));\r\n/**\r\n * The Color namespace provides helper functions to work with\r\n * [Color](#Color) literals.\r\n */\r\nexport var Color;\r\n(function (Color) {\r\n    /**\r\n     * Creates a new Color literal.\r\n     */\r\n    function create(red, green, blue, alpha) {\r\n        return {\r\n            red: red,\r\n            green: green,\r\n            blue: blue,\r\n            alpha: alpha,\r\n        };\r\n    }\r\n    Color.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Color](#Color) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.number(candidate.red)\r\n            && Is.number(candidate.green)\r\n            && Is.number(candidate.blue)\r\n            && Is.number(candidate.alpha);\r\n    }\r\n    Color.is = is;\r\n})(Color || (Color = {}));\r\n/**\r\n * The ColorInformation namespace provides helper functions to work with\r\n * [ColorInformation](#ColorInformation) literals.\r\n */\r\nexport var ColorInformation;\r\n(function (ColorInformation) {\r\n    /**\r\n     * Creates a new ColorInformation literal.\r\n     */\r\n    function create(range, color) {\r\n        return {\r\n            range: range,\r\n            color: color,\r\n        };\r\n    }\r\n    ColorInformation.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [ColorInformation](#ColorInformation) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Range.is(candidate.range) && Color.is(candidate.color);\r\n    }\r\n    ColorInformation.is = is;\r\n})(ColorInformation || (ColorInformation = {}));\r\n/**\r\n * The Color namespace provides helper functions to work with\r\n * [ColorPresentation](#ColorPresentation) literals.\r\n */\r\nexport var ColorPresentation;\r\n(function (ColorPresentation) {\r\n    /**\r\n     * Creates a new ColorInformation literal.\r\n     */\r\n    function create(label, textEdit, additionalTextEdits) {\r\n        return {\r\n            label: label,\r\n            textEdit: textEdit,\r\n            additionalTextEdits: additionalTextEdits,\r\n        };\r\n    }\r\n    ColorPresentation.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [ColorInformation](#ColorInformation) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.string(candidate.label)\r\n            && (Is.undefined(candidate.textEdit) || TextEdit.is(candidate))\r\n            && (Is.undefined(candidate.additionalTextEdits) || Is.typedArray(candidate.additionalTextEdits, TextEdit.is));\r\n    }\r\n    ColorPresentation.is = is;\r\n})(ColorPresentation || (ColorPresentation = {}));\r\n/**\r\n * Enum of known range kinds\r\n */\r\nexport var FoldingRangeKind;\r\n(function (FoldingRangeKind) {\r\n    /**\r\n     * Folding range for a comment\r\n     */\r\n    FoldingRangeKind[\"Comment\"] = \"comment\";\r\n    /**\r\n     * Folding range for a imports or includes\r\n     */\r\n    FoldingRangeKind[\"Imports\"] = \"imports\";\r\n    /**\r\n     * Folding range for a region (e.g. `#region`)\r\n     */\r\n    FoldingRangeKind[\"Region\"] = \"region\";\r\n})(FoldingRangeKind || (FoldingRangeKind = {}));\r\n/**\r\n * The folding range namespace provides helper functions to work with\r\n * [FoldingRange](#FoldingRange) literals.\r\n */\r\nexport var FoldingRange;\r\n(function (FoldingRange) {\r\n    /**\r\n     * Creates a new FoldingRange literal.\r\n     */\r\n    function create(startLine, endLine, startCharacter, endCharacter, kind) {\r\n        var result = {\r\n            startLine: startLine,\r\n            endLine: endLine\r\n        };\r\n        if (Is.defined(startCharacter)) {\r\n            result.startCharacter = startCharacter;\r\n        }\r\n        if (Is.defined(endCharacter)) {\r\n            result.endCharacter = endCharacter;\r\n        }\r\n        if (Is.defined(kind)) {\r\n            result.kind = kind;\r\n        }\r\n        return result;\r\n    }\r\n    FoldingRange.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [FoldingRange](#FoldingRange) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.number(candidate.startLine) && Is.number(candidate.startLine)\r\n            && (Is.undefined(candidate.startCharacter) || Is.number(candidate.startCharacter))\r\n            && (Is.undefined(candidate.endCharacter) || Is.number(candidate.endCharacter))\r\n            && (Is.undefined(candidate.kind) || Is.string(candidate.kind));\r\n    }\r\n    FoldingRange.is = is;\r\n})(FoldingRange || (FoldingRange = {}));\r\n/**\r\n * The DiagnosticRelatedInformation namespace provides helper functions to work with\r\n * [DiagnosticRelatedInformation](#DiagnosticRelatedInformation) literals.\r\n */\r\nexport var DiagnosticRelatedInformation;\r\n(function (DiagnosticRelatedInformation) {\r\n    /**\r\n     * Creates a new DiagnosticRelatedInformation literal.\r\n     */\r\n    function create(location, message) {\r\n        return {\r\n            location: location,\r\n            message: message\r\n        };\r\n    }\r\n    DiagnosticRelatedInformation.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [DiagnosticRelatedInformation](#DiagnosticRelatedInformation) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Location.is(candidate.location) && Is.string(candidate.message);\r\n    }\r\n    DiagnosticRelatedInformation.is = is;\r\n})(DiagnosticRelatedInformation || (DiagnosticRelatedInformation = {}));\r\n/**\r\n * The diagnostic's severity.\r\n */\r\nexport var DiagnosticSeverity;\r\n(function (DiagnosticSeverity) {\r\n    /**\r\n     * Reports an error.\r\n     */\r\n    DiagnosticSeverity.Error = 1;\r\n    /**\r\n     * Reports a warning.\r\n     */\r\n    DiagnosticSeverity.Warning = 2;\r\n    /**\r\n     * Reports an information.\r\n     */\r\n    DiagnosticSeverity.Information = 3;\r\n    /**\r\n     * Reports a hint.\r\n     */\r\n    DiagnosticSeverity.Hint = 4;\r\n})(DiagnosticSeverity || (DiagnosticSeverity = {}));\r\n/**\r\n * The diagnostic tags.\r\n *\r\n * @since 3.15.0\r\n */\r\nexport var DiagnosticTag;\r\n(function (DiagnosticTag) {\r\n    /**\r\n     * Unused or unnecessary code.\r\n     *\r\n     * Clients are allowed to render diagnostics with this tag faded out instead of having\r\n     * an error squiggle.\r\n     */\r\n    DiagnosticTag.Unnecessary = 1;\r\n    /**\r\n     * Deprecated or obsolete code.\r\n     *\r\n     * Clients are allowed to rendered diagnostics with this tag strike through.\r\n     */\r\n    DiagnosticTag.Deprecated = 2;\r\n})(DiagnosticTag || (DiagnosticTag = {}));\r\n/**\r\n * The Diagnostic namespace provides helper functions to work with\r\n * [Diagnostic](#Diagnostic) literals.\r\n */\r\nexport var Diagnostic;\r\n(function (Diagnostic) {\r\n    /**\r\n     * Creates a new Diagnostic literal.\r\n     */\r\n    function create(range, message, severity, code, source, relatedInformation) {\r\n        var result = { range: range, message: message };\r\n        if (Is.defined(severity)) {\r\n            result.severity = severity;\r\n        }\r\n        if (Is.defined(code)) {\r\n            result.code = code;\r\n        }\r\n        if (Is.defined(source)) {\r\n            result.source = source;\r\n        }\r\n        if (Is.defined(relatedInformation)) {\r\n            result.relatedInformation = relatedInformation;\r\n        }\r\n        return result;\r\n    }\r\n    Diagnostic.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Diagnostic](#Diagnostic) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate)\r\n            && Range.is(candidate.range)\r\n            && Is.string(candidate.message)\r\n            && (Is.number(candidate.severity) || Is.undefined(candidate.severity))\r\n            && (Is.number(candidate.code) || Is.string(candidate.code) || Is.undefined(candidate.code))\r\n            && (Is.string(candidate.source) || Is.undefined(candidate.source))\r\n            && (Is.undefined(candidate.relatedInformation) || Is.typedArray(candidate.relatedInformation, DiagnosticRelatedInformation.is));\r\n    }\r\n    Diagnostic.is = is;\r\n})(Diagnostic || (Diagnostic = {}));\r\n/**\r\n * The Command namespace provides helper functions to work with\r\n * [Command](#Command) literals.\r\n */\r\nexport var Command;\r\n(function (Command) {\r\n    /**\r\n     * Creates a new Command literal.\r\n     */\r\n    function create(title, command) {\r\n        var args = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            args[_i - 2] = arguments[_i];\r\n        }\r\n        var result = { title: title, command: command };\r\n        if (Is.defined(args) && args.length > 0) {\r\n            result.arguments = args;\r\n        }\r\n        return result;\r\n    }\r\n    Command.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Command](#Command) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.title) && Is.string(candidate.command);\r\n    }\r\n    Command.is = is;\r\n})(Command || (Command = {}));\r\n/**\r\n * The TextEdit namespace provides helper function to create replace,\r\n * insert and delete edits more easily.\r\n */\r\nexport var TextEdit;\r\n(function (TextEdit) {\r\n    /**\r\n     * Creates a replace text edit.\r\n     * @param range The range of text to be replaced.\r\n     * @param newText The new text.\r\n     */\r\n    function replace(range, newText) {\r\n        return { range: range, newText: newText };\r\n    }\r\n    TextEdit.replace = replace;\r\n    /**\r\n     * Creates a insert text edit.\r\n     * @param position The position to insert the text at.\r\n     * @param newText The text to be inserted.\r\n     */\r\n    function insert(position, newText) {\r\n        return { range: { start: position, end: position }, newText: newText };\r\n    }\r\n    TextEdit.insert = insert;\r\n    /**\r\n     * Creates a delete text edit.\r\n     * @param range The range of text to be deleted.\r\n     */\r\n    function del(range) {\r\n        return { range: range, newText: '' };\r\n    }\r\n    TextEdit.del = del;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(candidate)\r\n            && Is.string(candidate.newText)\r\n            && Range.is(candidate.range);\r\n    }\r\n    TextEdit.is = is;\r\n})(TextEdit || (TextEdit = {}));\r\n/**\r\n * The TextDocumentEdit namespace provides helper function to create\r\n * an edit that manipulates a text document.\r\n */\r\nexport var TextDocumentEdit;\r\n(function (TextDocumentEdit) {\r\n    /**\r\n     * Creates a new `TextDocumentEdit`\r\n     */\r\n    function create(textDocument, edits) {\r\n        return { textDocument: textDocument, edits: edits };\r\n    }\r\n    TextDocumentEdit.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate)\r\n            && VersionedTextDocumentIdentifier.is(candidate.textDocument)\r\n            && Array.isArray(candidate.edits);\r\n    }\r\n    TextDocumentEdit.is = is;\r\n})(TextDocumentEdit || (TextDocumentEdit = {}));\r\nexport var CreateFile;\r\n(function (CreateFile) {\r\n    function create(uri, options) {\r\n        var result = {\r\n            kind: 'create',\r\n            uri: uri\r\n        };\r\n        if (options !== void 0 && (options.overwrite !== void 0 || options.ignoreIfExists !== void 0)) {\r\n            result.options = options;\r\n        }\r\n        return result;\r\n    }\r\n    CreateFile.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && candidate.kind === 'create' && Is.string(candidate.uri) &&\r\n            (candidate.options === void 0 ||\r\n                ((candidate.options.overwrite === void 0 || Is.boolean(candidate.options.overwrite)) && (candidate.options.ignoreIfExists === void 0 || Is.boolean(candidate.options.ignoreIfExists))));\r\n    }\r\n    CreateFile.is = is;\r\n})(CreateFile || (CreateFile = {}));\r\nexport var RenameFile;\r\n(function (RenameFile) {\r\n    function create(oldUri, newUri, options) {\r\n        var result = {\r\n            kind: 'rename',\r\n            oldUri: oldUri,\r\n            newUri: newUri\r\n        };\r\n        if (options !== void 0 && (options.overwrite !== void 0 || options.ignoreIfExists !== void 0)) {\r\n            result.options = options;\r\n        }\r\n        return result;\r\n    }\r\n    RenameFile.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && candidate.kind === 'rename' && Is.string(candidate.oldUri) && Is.string(candidate.newUri) &&\r\n            (candidate.options === void 0 ||\r\n                ((candidate.options.overwrite === void 0 || Is.boolean(candidate.options.overwrite)) && (candidate.options.ignoreIfExists === void 0 || Is.boolean(candidate.options.ignoreIfExists))));\r\n    }\r\n    RenameFile.is = is;\r\n})(RenameFile || (RenameFile = {}));\r\nexport var DeleteFile;\r\n(function (DeleteFile) {\r\n    function create(uri, options) {\r\n        var result = {\r\n            kind: 'delete',\r\n            uri: uri\r\n        };\r\n        if (options !== void 0 && (options.recursive !== void 0 || options.ignoreIfNotExists !== void 0)) {\r\n            result.options = options;\r\n        }\r\n        return result;\r\n    }\r\n    DeleteFile.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && candidate.kind === 'delete' && Is.string(candidate.uri) &&\r\n            (candidate.options === void 0 ||\r\n                ((candidate.options.recursive === void 0 || Is.boolean(candidate.options.recursive)) && (candidate.options.ignoreIfNotExists === void 0 || Is.boolean(candidate.options.ignoreIfNotExists))));\r\n    }\r\n    DeleteFile.is = is;\r\n})(DeleteFile || (DeleteFile = {}));\r\nexport var WorkspaceEdit;\r\n(function (WorkspaceEdit) {\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate &&\r\n            (candidate.changes !== void 0 || candidate.documentChanges !== void 0) &&\r\n            (candidate.documentChanges === void 0 || candidate.documentChanges.every(function (change) {\r\n                if (Is.string(change.kind)) {\r\n                    return CreateFile.is(change) || RenameFile.is(change) || DeleteFile.is(change);\r\n                }\r\n                else {\r\n                    return TextDocumentEdit.is(change);\r\n                }\r\n            }));\r\n    }\r\n    WorkspaceEdit.is = is;\r\n})(WorkspaceEdit || (WorkspaceEdit = {}));\r\nvar TextEditChangeImpl = /** @class */ (function () {\r\n    function TextEditChangeImpl(edits) {\r\n        this.edits = edits;\r\n    }\r\n    TextEditChangeImpl.prototype.insert = function (position, newText) {\r\n        this.edits.push(TextEdit.insert(position, newText));\r\n    };\r\n    TextEditChangeImpl.prototype.replace = function (range, newText) {\r\n        this.edits.push(TextEdit.replace(range, newText));\r\n    };\r\n    TextEditChangeImpl.prototype.delete = function (range) {\r\n        this.edits.push(TextEdit.del(range));\r\n    };\r\n    TextEditChangeImpl.prototype.add = function (edit) {\r\n        this.edits.push(edit);\r\n    };\r\n    TextEditChangeImpl.prototype.all = function () {\r\n        return this.edits;\r\n    };\r\n    TextEditChangeImpl.prototype.clear = function () {\r\n        this.edits.splice(0, this.edits.length);\r\n    };\r\n    return TextEditChangeImpl;\r\n}());\r\n/**\r\n * A workspace change helps constructing changes to a workspace.\r\n */\r\nvar WorkspaceChange = /** @class */ (function () {\r\n    function WorkspaceChange(workspaceEdit) {\r\n        var _this = this;\r\n        this._textEditChanges = Object.create(null);\r\n        if (workspaceEdit) {\r\n            this._workspaceEdit = workspaceEdit;\r\n            if (workspaceEdit.documentChanges) {\r\n                workspaceEdit.documentChanges.forEach(function (change) {\r\n                    if (TextDocumentEdit.is(change)) {\r\n                        var textEditChange = new TextEditChangeImpl(change.edits);\r\n                        _this._textEditChanges[change.textDocument.uri] = textEditChange;\r\n                    }\r\n                });\r\n            }\r\n            else if (workspaceEdit.changes) {\r\n                Object.keys(workspaceEdit.changes).forEach(function (key) {\r\n                    var textEditChange = new TextEditChangeImpl(workspaceEdit.changes[key]);\r\n                    _this._textEditChanges[key] = textEditChange;\r\n                });\r\n            }\r\n        }\r\n    }\r\n    Object.defineProperty(WorkspaceChange.prototype, \"edit\", {\r\n        /**\r\n         * Returns the underlying [WorkspaceEdit](#WorkspaceEdit) literal\r\n         * use to be returned from a workspace edit operation like rename.\r\n         */\r\n        get: function () {\r\n            return this._workspaceEdit;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    WorkspaceChange.prototype.getTextEditChange = function (key) {\r\n        if (VersionedTextDocumentIdentifier.is(key)) {\r\n            if (!this._workspaceEdit) {\r\n                this._workspaceEdit = {\r\n                    documentChanges: []\r\n                };\r\n            }\r\n            if (!this._workspaceEdit.documentChanges) {\r\n                throw new Error('Workspace edit is not configured for document changes.');\r\n            }\r\n            var textDocument = key;\r\n            var result = this._textEditChanges[textDocument.uri];\r\n            if (!result) {\r\n                var edits = [];\r\n                var textDocumentEdit = {\r\n                    textDocument: textDocument,\r\n                    edits: edits\r\n                };\r\n                this._workspaceEdit.documentChanges.push(textDocumentEdit);\r\n                result = new TextEditChangeImpl(edits);\r\n                this._textEditChanges[textDocument.uri] = result;\r\n            }\r\n            return result;\r\n        }\r\n        else {\r\n            if (!this._workspaceEdit) {\r\n                this._workspaceEdit = {\r\n                    changes: Object.create(null)\r\n                };\r\n            }\r\n            if (!this._workspaceEdit.changes) {\r\n                throw new Error('Workspace edit is not configured for normal text edit changes.');\r\n            }\r\n            var result = this._textEditChanges[key];\r\n            if (!result) {\r\n                var edits = [];\r\n                this._workspaceEdit.changes[key] = edits;\r\n                result = new TextEditChangeImpl(edits);\r\n                this._textEditChanges[key] = result;\r\n            }\r\n            return result;\r\n        }\r\n    };\r\n    WorkspaceChange.prototype.createFile = function (uri, options) {\r\n        this.checkDocumentChanges();\r\n        this._workspaceEdit.documentChanges.push(CreateFile.create(uri, options));\r\n    };\r\n    WorkspaceChange.prototype.renameFile = function (oldUri, newUri, options) {\r\n        this.checkDocumentChanges();\r\n        this._workspaceEdit.documentChanges.push(RenameFile.create(oldUri, newUri, options));\r\n    };\r\n    WorkspaceChange.prototype.deleteFile = function (uri, options) {\r\n        this.checkDocumentChanges();\r\n        this._workspaceEdit.documentChanges.push(DeleteFile.create(uri, options));\r\n    };\r\n    WorkspaceChange.prototype.checkDocumentChanges = function () {\r\n        if (!this._workspaceEdit || !this._workspaceEdit.documentChanges) {\r\n            throw new Error('Workspace edit is not configured for document changes.');\r\n        }\r\n    };\r\n    return WorkspaceChange;\r\n}());\r\nexport { WorkspaceChange };\r\n/**\r\n * The TextDocumentIdentifier namespace provides helper functions to work with\r\n * [TextDocumentIdentifier](#TextDocumentIdentifier) literals.\r\n */\r\nexport var TextDocumentIdentifier;\r\n(function (TextDocumentIdentifier) {\r\n    /**\r\n     * Creates a new TextDocumentIdentifier literal.\r\n     * @param uri The document's uri.\r\n     */\r\n    function create(uri) {\r\n        return { uri: uri };\r\n    }\r\n    TextDocumentIdentifier.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [TextDocumentIdentifier](#TextDocumentIdentifier) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri);\r\n    }\r\n    TextDocumentIdentifier.is = is;\r\n})(TextDocumentIdentifier || (TextDocumentIdentifier = {}));\r\n/**\r\n * The VersionedTextDocumentIdentifier namespace provides helper functions to work with\r\n * [VersionedTextDocumentIdentifier](#VersionedTextDocumentIdentifier) literals.\r\n */\r\nexport var VersionedTextDocumentIdentifier;\r\n(function (VersionedTextDocumentIdentifier) {\r\n    /**\r\n     * Creates a new VersionedTextDocumentIdentifier literal.\r\n     * @param uri The document's uri.\r\n     * @param uri The document's text.\r\n     */\r\n    function create(uri, version) {\r\n        return { uri: uri, version: version };\r\n    }\r\n    VersionedTextDocumentIdentifier.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [VersionedTextDocumentIdentifier](#VersionedTextDocumentIdentifier) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri) && (candidate.version === null || Is.number(candidate.version));\r\n    }\r\n    VersionedTextDocumentIdentifier.is = is;\r\n})(VersionedTextDocumentIdentifier || (VersionedTextDocumentIdentifier = {}));\r\n/**\r\n * The TextDocumentItem namespace provides helper functions to work with\r\n * [TextDocumentItem](#TextDocumentItem) literals.\r\n */\r\nexport var TextDocumentItem;\r\n(function (TextDocumentItem) {\r\n    /**\r\n     * Creates a new TextDocumentItem literal.\r\n     * @param uri The document's uri.\r\n     * @param languageId The document's language identifier.\r\n     * @param version The document's version number.\r\n     * @param text The document's text.\r\n     */\r\n    function create(uri, languageId, version, text) {\r\n        return { uri: uri, languageId: languageId, version: version, text: text };\r\n    }\r\n    TextDocumentItem.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [TextDocumentItem](#TextDocumentItem) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri) && Is.string(candidate.languageId) && Is.number(candidate.version) && Is.string(candidate.text);\r\n    }\r\n    TextDocumentItem.is = is;\r\n})(TextDocumentItem || (TextDocumentItem = {}));\r\n/**\r\n * Describes the content type that a client supports in various\r\n * result literals like `Hover`, `ParameterInfo` or `CompletionItem`.\r\n *\r\n * Please note that `MarkupKinds` must not start with a `$`. This kinds\r\n * are reserved for internal usage.\r\n */\r\nexport var MarkupKind;\r\n(function (MarkupKind) {\r\n    /**\r\n     * Plain text is supported as a content format\r\n     */\r\n    MarkupKind.PlainText = 'plaintext';\r\n    /**\r\n     * Markdown is supported as a content format\r\n     */\r\n    MarkupKind.Markdown = 'markdown';\r\n})(MarkupKind || (MarkupKind = {}));\r\n(function (MarkupKind) {\r\n    /**\r\n     * Checks whether the given value is a value of the [MarkupKind](#MarkupKind) type.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate === MarkupKind.PlainText || candidate === MarkupKind.Markdown;\r\n    }\r\n    MarkupKind.is = is;\r\n})(MarkupKind || (MarkupKind = {}));\r\nexport var MarkupContent;\r\n(function (MarkupContent) {\r\n    /**\r\n     * Checks whether the given value conforms to the [MarkupContent](#MarkupContent) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(value) && MarkupKind.is(candidate.kind) && Is.string(candidate.value);\r\n    }\r\n    MarkupContent.is = is;\r\n})(MarkupContent || (MarkupContent = {}));\r\n/**\r\n * The kind of a completion entry.\r\n */\r\nexport var CompletionItemKind;\r\n(function (CompletionItemKind) {\r\n    CompletionItemKind.Text = 1;\r\n    CompletionItemKind.Method = 2;\r\n    CompletionItemKind.Function = 3;\r\n    CompletionItemKind.Constructor = 4;\r\n    CompletionItemKind.Field = 5;\r\n    CompletionItemKind.Variable = 6;\r\n    CompletionItemKind.Class = 7;\r\n    CompletionItemKind.Interface = 8;\r\n    CompletionItemKind.Module = 9;\r\n    CompletionItemKind.Property = 10;\r\n    CompletionItemKind.Unit = 11;\r\n    CompletionItemKind.Value = 12;\r\n    CompletionItemKind.Enum = 13;\r\n    CompletionItemKind.Keyword = 14;\r\n    CompletionItemKind.Snippet = 15;\r\n    CompletionItemKind.Color = 16;\r\n    CompletionItemKind.File = 17;\r\n    CompletionItemKind.Reference = 18;\r\n    CompletionItemKind.Folder = 19;\r\n    CompletionItemKind.EnumMember = 20;\r\n    CompletionItemKind.Constant = 21;\r\n    CompletionItemKind.Struct = 22;\r\n    CompletionItemKind.Event = 23;\r\n    CompletionItemKind.Operator = 24;\r\n    CompletionItemKind.TypeParameter = 25;\r\n})(CompletionItemKind || (CompletionItemKind = {}));\r\n/**\r\n * Defines whether the insert text in a completion item should be interpreted as\r\n * plain text or a snippet.\r\n */\r\nexport var InsertTextFormat;\r\n(function (InsertTextFormat) {\r\n    /**\r\n     * The primary text to be inserted is treated as a plain string.\r\n     */\r\n    InsertTextFormat.PlainText = 1;\r\n    /**\r\n     * The primary text to be inserted is treated as a snippet.\r\n     *\r\n     * A snippet can define tab stops and placeholders with `$1`, `$2`\r\n     * and `${3:foo}`. `$0` defines the final tab stop, it defaults to\r\n     * the end of the snippet. Placeholders with equal identifiers are linked,\r\n     * that is typing in one will update others too.\r\n     *\r\n     * See also: https://github.com/Microsoft/vscode/blob/master/src/vs/editor/contrib/snippet/common/snippet.md\r\n     */\r\n    InsertTextFormat.Snippet = 2;\r\n})(InsertTextFormat || (InsertTextFormat = {}));\r\n/**\r\n * Completion item tags are extra annotations that tweak the rendering of a completion\r\n * item.\r\n *\r\n * @since 3.15.0\r\n */\r\nexport var CompletionItemTag;\r\n(function (CompletionItemTag) {\r\n    /**\r\n     * Render a completion as obsolete, usually using a strike-out.\r\n     */\r\n    CompletionItemTag.Deprecated = 1;\r\n})(CompletionItemTag || (CompletionItemTag = {}));\r\n/**\r\n * The CompletionItem namespace provides functions to deal with\r\n * completion items.\r\n */\r\nexport var CompletionItem;\r\n(function (CompletionItem) {\r\n    /**\r\n     * Create a completion item and seed it with a label.\r\n     * @param label The completion item's label\r\n     */\r\n    function create(label) {\r\n        return { label: label };\r\n    }\r\n    CompletionItem.create = create;\r\n})(CompletionItem || (CompletionItem = {}));\r\n/**\r\n * The CompletionList namespace provides functions to deal with\r\n * completion lists.\r\n */\r\nexport var CompletionList;\r\n(function (CompletionList) {\r\n    /**\r\n     * Creates a new completion list.\r\n     *\r\n     * @param items The completion items.\r\n     * @param isIncomplete The list is not complete.\r\n     */\r\n    function create(items, isIncomplete) {\r\n        return { items: items ? items : [], isIncomplete: !!isIncomplete };\r\n    }\r\n    CompletionList.create = create;\r\n})(CompletionList || (CompletionList = {}));\r\nexport var MarkedString;\r\n(function (MarkedString) {\r\n    /**\r\n     * Creates a marked string from plain text.\r\n     *\r\n     * @param plainText The plain text.\r\n     */\r\n    function fromPlainText(plainText) {\r\n        return plainText.replace(/[\\\\`*_{}[\\]()#+\\-.!]/g, '\\\\$&'); // escape markdown syntax tokens: http://daringfireball.net/projects/markdown/syntax#backslash\r\n    }\r\n    MarkedString.fromPlainText = fromPlainText;\r\n    /**\r\n     * Checks whether the given value conforms to the [MarkedString](#MarkedString) type.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.string(candidate) || (Is.objectLiteral(candidate) && Is.string(candidate.language) && Is.string(candidate.value));\r\n    }\r\n    MarkedString.is = is;\r\n})(MarkedString || (MarkedString = {}));\r\nexport var Hover;\r\n(function (Hover) {\r\n    /**\r\n     * Checks whether the given value conforms to the [Hover](#Hover) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return !!candidate && Is.objectLiteral(candidate) && (MarkupContent.is(candidate.contents) ||\r\n            MarkedString.is(candidate.contents) ||\r\n            Is.typedArray(candidate.contents, MarkedString.is)) && (value.range === void 0 || Range.is(value.range));\r\n    }\r\n    Hover.is = is;\r\n})(Hover || (Hover = {}));\r\n/**\r\n * The ParameterInformation namespace provides helper functions to work with\r\n * [ParameterInformation](#ParameterInformation) literals.\r\n */\r\nexport var ParameterInformation;\r\n(function (ParameterInformation) {\r\n    /**\r\n     * Creates a new parameter information literal.\r\n     *\r\n     * @param label A label string.\r\n     * @param documentation A doc string.\r\n     */\r\n    function create(label, documentation) {\r\n        return documentation ? { label: label, documentation: documentation } : { label: label };\r\n    }\r\n    ParameterInformation.create = create;\r\n})(ParameterInformation || (ParameterInformation = {}));\r\n/**\r\n * The SignatureInformation namespace provides helper functions to work with\r\n * [SignatureInformation](#SignatureInformation) literals.\r\n */\r\nexport var SignatureInformation;\r\n(function (SignatureInformation) {\r\n    function create(label, documentation) {\r\n        var parameters = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            parameters[_i - 2] = arguments[_i];\r\n        }\r\n        var result = { label: label };\r\n        if (Is.defined(documentation)) {\r\n            result.documentation = documentation;\r\n        }\r\n        if (Is.defined(parameters)) {\r\n            result.parameters = parameters;\r\n        }\r\n        else {\r\n            result.parameters = [];\r\n        }\r\n        return result;\r\n    }\r\n    SignatureInformation.create = create;\r\n})(SignatureInformation || (SignatureInformation = {}));\r\n/**\r\n * A document highlight kind.\r\n */\r\nexport var DocumentHighlightKind;\r\n(function (DocumentHighlightKind) {\r\n    /**\r\n     * A textual occurrence.\r\n     */\r\n    DocumentHighlightKind.Text = 1;\r\n    /**\r\n     * Read-access of a symbol, like reading a variable.\r\n     */\r\n    DocumentHighlightKind.Read = 2;\r\n    /**\r\n     * Write-access of a symbol, like writing to a variable.\r\n     */\r\n    DocumentHighlightKind.Write = 3;\r\n})(DocumentHighlightKind || (DocumentHighlightKind = {}));\r\n/**\r\n * DocumentHighlight namespace to provide helper functions to work with\r\n * [DocumentHighlight](#DocumentHighlight) literals.\r\n */\r\nexport var DocumentHighlight;\r\n(function (DocumentHighlight) {\r\n    /**\r\n     * Create a DocumentHighlight object.\r\n     * @param range The range the highlight applies to.\r\n     */\r\n    function create(range, kind) {\r\n        var result = { range: range };\r\n        if (Is.number(kind)) {\r\n            result.kind = kind;\r\n        }\r\n        return result;\r\n    }\r\n    DocumentHighlight.create = create;\r\n})(DocumentHighlight || (DocumentHighlight = {}));\r\n/**\r\n * A symbol kind.\r\n */\r\nexport var SymbolKind;\r\n(function (SymbolKind) {\r\n    SymbolKind.File = 1;\r\n    SymbolKind.Module = 2;\r\n    SymbolKind.Namespace = 3;\r\n    SymbolKind.Package = 4;\r\n    SymbolKind.Class = 5;\r\n    SymbolKind.Method = 6;\r\n    SymbolKind.Property = 7;\r\n    SymbolKind.Field = 8;\r\n    SymbolKind.Constructor = 9;\r\n    SymbolKind.Enum = 10;\r\n    SymbolKind.Interface = 11;\r\n    SymbolKind.Function = 12;\r\n    SymbolKind.Variable = 13;\r\n    SymbolKind.Constant = 14;\r\n    SymbolKind.String = 15;\r\n    SymbolKind.Number = 16;\r\n    SymbolKind.Boolean = 17;\r\n    SymbolKind.Array = 18;\r\n    SymbolKind.Object = 19;\r\n    SymbolKind.Key = 20;\r\n    SymbolKind.Null = 21;\r\n    SymbolKind.EnumMember = 22;\r\n    SymbolKind.Struct = 23;\r\n    SymbolKind.Event = 24;\r\n    SymbolKind.Operator = 25;\r\n    SymbolKind.TypeParameter = 26;\r\n})(SymbolKind || (SymbolKind = {}));\r\n/**\r\n * Symbol tags are extra annotations that tweak the rendering of a symbol.\r\n * @since 3.15\r\n */\r\nexport var SymbolTag;\r\n(function (SymbolTag) {\r\n    /**\r\n     * Render a symbol as obsolete, usually using a strike-out.\r\n     */\r\n    SymbolTag.Deprecated = 1;\r\n})(SymbolTag || (SymbolTag = {}));\r\nexport var SymbolInformation;\r\n(function (SymbolInformation) {\r\n    /**\r\n     * Creates a new symbol information literal.\r\n     *\r\n     * @param name The name of the symbol.\r\n     * @param kind The kind of the symbol.\r\n     * @param range The range of the location of the symbol.\r\n     * @param uri The resource of the location of symbol, defaults to the current document.\r\n     * @param containerName The name of the symbol containing the symbol.\r\n     */\r\n    function create(name, kind, range, uri, containerName) {\r\n        var result = {\r\n            name: name,\r\n            kind: kind,\r\n            location: { uri: uri, range: range }\r\n        };\r\n        if (containerName) {\r\n            result.containerName = containerName;\r\n        }\r\n        return result;\r\n    }\r\n    SymbolInformation.create = create;\r\n})(SymbolInformation || (SymbolInformation = {}));\r\nexport var DocumentSymbol;\r\n(function (DocumentSymbol) {\r\n    /**\r\n     * Creates a new symbol information literal.\r\n     *\r\n     * @param name The name of the symbol.\r\n     * @param detail The detail of the symbol.\r\n     * @param kind The kind of the symbol.\r\n     * @param range The range of the symbol.\r\n     * @param selectionRange The selectionRange of the symbol.\r\n     * @param children Children of the symbol.\r\n     */\r\n    function create(name, detail, kind, range, selectionRange, children) {\r\n        var result = {\r\n            name: name,\r\n            detail: detail,\r\n            kind: kind,\r\n            range: range,\r\n            selectionRange: selectionRange\r\n        };\r\n        if (children !== void 0) {\r\n            result.children = children;\r\n        }\r\n        return result;\r\n    }\r\n    DocumentSymbol.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [DocumentSymbol](#DocumentSymbol) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate &&\r\n            Is.string(candidate.name) && Is.number(candidate.kind) &&\r\n            Range.is(candidate.range) && Range.is(candidate.selectionRange) &&\r\n            (candidate.detail === void 0 || Is.string(candidate.detail)) &&\r\n            (candidate.deprecated === void 0 || Is.boolean(candidate.deprecated)) &&\r\n            (candidate.children === void 0 || Array.isArray(candidate.children));\r\n    }\r\n    DocumentSymbol.is = is;\r\n})(DocumentSymbol || (DocumentSymbol = {}));\r\n/**\r\n * A set of predefined code action kinds\r\n */\r\nexport var CodeActionKind;\r\n(function (CodeActionKind) {\r\n    /**\r\n     * Empty kind.\r\n     */\r\n    CodeActionKind.Empty = '';\r\n    /**\r\n     * Base kind for quickfix actions: 'quickfix'\r\n     */\r\n    CodeActionKind.QuickFix = 'quickfix';\r\n    /**\r\n     * Base kind for refactoring actions: 'refactor'\r\n     */\r\n    CodeActionKind.Refactor = 'refactor';\r\n    /**\r\n     * Base kind for refactoring extraction actions: 'refactor.extract'\r\n     *\r\n     * Example extract actions:\r\n     *\r\n     * - Extract method\r\n     * - Extract function\r\n     * - Extract variable\r\n     * - Extract interface from class\r\n     * - ...\r\n     */\r\n    CodeActionKind.RefactorExtract = 'refactor.extract';\r\n    /**\r\n     * Base kind for refactoring inline actions: 'refactor.inline'\r\n     *\r\n     * Example inline actions:\r\n     *\r\n     * - Inline function\r\n     * - Inline variable\r\n     * - Inline constant\r\n     * - ...\r\n     */\r\n    CodeActionKind.RefactorInline = 'refactor.inline';\r\n    /**\r\n     * Base kind for refactoring rewrite actions: 'refactor.rewrite'\r\n     *\r\n     * Example rewrite actions:\r\n     *\r\n     * - Convert JavaScript function to class\r\n     * - Add or remove parameter\r\n     * - Encapsulate field\r\n     * - Make method static\r\n     * - Move method to base class\r\n     * - ...\r\n     */\r\n    CodeActionKind.RefactorRewrite = 'refactor.rewrite';\r\n    /**\r\n     * Base kind for source actions: `source`\r\n     *\r\n     * Source code actions apply to the entire file.\r\n     */\r\n    CodeActionKind.Source = 'source';\r\n    /**\r\n     * Base kind for an organize imports source action: `source.organizeImports`\r\n     */\r\n    CodeActionKind.SourceOrganizeImports = 'source.organizeImports';\r\n    /**\r\n     * Base kind for auto-fix source actions: `source.fixAll`.\r\n     *\r\n     * Fix all actions automatically fix errors that have a clear fix that do not require user input.\r\n     * They should not suppress errors or perform unsafe fixes such as generating new types or classes.\r\n     *\r\n     * @since 3.15.0\r\n     */\r\n    CodeActionKind.SourceFixAll = 'source.fixAll';\r\n})(CodeActionKind || (CodeActionKind = {}));\r\n/**\r\n * The CodeActionContext namespace provides helper functions to work with\r\n * [CodeActionContext](#CodeActionContext) literals.\r\n */\r\nexport var CodeActionContext;\r\n(function (CodeActionContext) {\r\n    /**\r\n     * Creates a new CodeActionContext literal.\r\n     */\r\n    function create(diagnostics, only) {\r\n        var result = { diagnostics: diagnostics };\r\n        if (only !== void 0 && only !== null) {\r\n            result.only = only;\r\n        }\r\n        return result;\r\n    }\r\n    CodeActionContext.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [CodeActionContext](#CodeActionContext) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.typedArray(candidate.diagnostics, Diagnostic.is) && (candidate.only === void 0 || Is.typedArray(candidate.only, Is.string));\r\n    }\r\n    CodeActionContext.is = is;\r\n})(CodeActionContext || (CodeActionContext = {}));\r\nexport var CodeAction;\r\n(function (CodeAction) {\r\n    function create(title, commandOrEdit, kind) {\r\n        var result = { title: title };\r\n        if (Command.is(commandOrEdit)) {\r\n            result.command = commandOrEdit;\r\n        }\r\n        else {\r\n            result.edit = commandOrEdit;\r\n        }\r\n        if (kind !== void 0) {\r\n            result.kind = kind;\r\n        }\r\n        return result;\r\n    }\r\n    CodeAction.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && Is.string(candidate.title) &&\r\n            (candidate.diagnostics === void 0 || Is.typedArray(candidate.diagnostics, Diagnostic.is)) &&\r\n            (candidate.kind === void 0 || Is.string(candidate.kind)) &&\r\n            (candidate.edit !== void 0 || candidate.command !== void 0) &&\r\n            (candidate.command === void 0 || Command.is(candidate.command)) &&\r\n            (candidate.isPreferred === void 0 || Is.boolean(candidate.isPreferred)) &&\r\n            (candidate.edit === void 0 || WorkspaceEdit.is(candidate.edit));\r\n    }\r\n    CodeAction.is = is;\r\n})(CodeAction || (CodeAction = {}));\r\n/**\r\n * The CodeLens namespace provides helper functions to work with\r\n * [CodeLens](#CodeLens) literals.\r\n */\r\nexport var CodeLens;\r\n(function (CodeLens) {\r\n    /**\r\n     * Creates a new CodeLens literal.\r\n     */\r\n    function create(range, data) {\r\n        var result = { range: range };\r\n        if (Is.defined(data)) {\r\n            result.data = data;\r\n        }\r\n        return result;\r\n    }\r\n    CodeLens.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [CodeLens](#CodeLens) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.command) || Command.is(candidate.command));\r\n    }\r\n    CodeLens.is = is;\r\n})(CodeLens || (CodeLens = {}));\r\n/**\r\n * The FormattingOptions namespace provides helper functions to work with\r\n * [FormattingOptions](#FormattingOptions) literals.\r\n */\r\nexport var FormattingOptions;\r\n(function (FormattingOptions) {\r\n    /**\r\n     * Creates a new FormattingOptions literal.\r\n     */\r\n    function create(tabSize, insertSpaces) {\r\n        return { tabSize: tabSize, insertSpaces: insertSpaces };\r\n    }\r\n    FormattingOptions.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [FormattingOptions](#FormattingOptions) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.number(candidate.tabSize) && Is.boolean(candidate.insertSpaces);\r\n    }\r\n    FormattingOptions.is = is;\r\n})(FormattingOptions || (FormattingOptions = {}));\r\n/**\r\n * The DocumentLink namespace provides helper functions to work with\r\n * [DocumentLink](#DocumentLink) literals.\r\n */\r\nexport var DocumentLink;\r\n(function (DocumentLink) {\r\n    /**\r\n     * Creates a new DocumentLink literal.\r\n     */\r\n    function create(range, target, data) {\r\n        return { range: range, target: target, data: data };\r\n    }\r\n    DocumentLink.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [DocumentLink](#DocumentLink) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.target) || Is.string(candidate.target));\r\n    }\r\n    DocumentLink.is = is;\r\n})(DocumentLink || (DocumentLink = {}));\r\n/**\r\n * The SelectionRange namespace provides helper function to work with\r\n * SelectionRange literals.\r\n */\r\nexport var SelectionRange;\r\n(function (SelectionRange) {\r\n    /**\r\n     * Creates a new SelectionRange\r\n     * @param range the range.\r\n     * @param parent an optional parent.\r\n     */\r\n    function create(range, parent) {\r\n        return { range: range, parent: parent };\r\n    }\r\n    SelectionRange.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate !== undefined && Range.is(candidate.range) && (candidate.parent === undefined || SelectionRange.is(candidate.parent));\r\n    }\r\n    SelectionRange.is = is;\r\n})(SelectionRange || (SelectionRange = {}));\r\nexport var EOL = ['\\n', '\\r\\n', '\\r'];\r\n/**\r\n * @deprecated Use the text document from the new vscode-languageserver-textdocument package.\r\n */\r\nexport var TextDocument;\r\n(function (TextDocument) {\r\n    /**\r\n     * Creates a new ITextDocument literal from the given uri and content.\r\n     * @param uri The document's uri.\r\n     * @param languageId  The document's language Id.\r\n     * @param content The document's content.\r\n     */\r\n    function create(uri, languageId, version, content) {\r\n        return new FullTextDocument(uri, languageId, version, content);\r\n    }\r\n    TextDocument.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [ITextDocument](#ITextDocument) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri) && (Is.undefined(candidate.languageId) || Is.string(candidate.languageId)) && Is.number(candidate.lineCount)\r\n            && Is.func(candidate.getText) && Is.func(candidate.positionAt) && Is.func(candidate.offsetAt) ? true : false;\r\n    }\r\n    TextDocument.is = is;\r\n    function applyEdits(document, edits) {\r\n        var text = document.getText();\r\n        var sortedEdits = mergeSort(edits, function (a, b) {\r\n            var diff = a.range.start.line - b.range.start.line;\r\n            if (diff === 0) {\r\n                return a.range.start.character - b.range.start.character;\r\n            }\r\n            return diff;\r\n        });\r\n        var lastModifiedOffset = text.length;\r\n        for (var i = sortedEdits.length - 1; i >= 0; i--) {\r\n            var e = sortedEdits[i];\r\n            var startOffset = document.offsetAt(e.range.start);\r\n            var endOffset = document.offsetAt(e.range.end);\r\n            if (endOffset <= lastModifiedOffset) {\r\n                text = text.substring(0, startOffset) + e.newText + text.substring(endOffset, text.length);\r\n            }\r\n            else {\r\n                throw new Error('Overlapping edit');\r\n            }\r\n            lastModifiedOffset = startOffset;\r\n        }\r\n        return text;\r\n    }\r\n    TextDocument.applyEdits = applyEdits;\r\n    function mergeSort(data, compare) {\r\n        if (data.length <= 1) {\r\n            // sorted\r\n            return data;\r\n        }\r\n        var p = (data.length / 2) | 0;\r\n        var left = data.slice(0, p);\r\n        var right = data.slice(p);\r\n        mergeSort(left, compare);\r\n        mergeSort(right, compare);\r\n        var leftIdx = 0;\r\n        var rightIdx = 0;\r\n        var i = 0;\r\n        while (leftIdx < left.length && rightIdx < right.length) {\r\n            var ret = compare(left[leftIdx], right[rightIdx]);\r\n            if (ret <= 0) {\r\n                // smaller_equal -> take left to preserve order\r\n                data[i++] = left[leftIdx++];\r\n            }\r\n            else {\r\n                // greater -> take right\r\n                data[i++] = right[rightIdx++];\r\n            }\r\n        }\r\n        while (leftIdx < left.length) {\r\n            data[i++] = left[leftIdx++];\r\n        }\r\n        while (rightIdx < right.length) {\r\n            data[i++] = right[rightIdx++];\r\n        }\r\n        return data;\r\n    }\r\n})(TextDocument || (TextDocument = {}));\r\nvar FullTextDocument = /** @class */ (function () {\r\n    function FullTextDocument(uri, languageId, version, content) {\r\n        this._uri = uri;\r\n        this._languageId = languageId;\r\n        this._version = version;\r\n        this._content = content;\r\n        this._lineOffsets = undefined;\r\n    }\r\n    Object.defineProperty(FullTextDocument.prototype, \"uri\", {\r\n        get: function () {\r\n            return this._uri;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FullTextDocument.prototype, \"languageId\", {\r\n        get: function () {\r\n            return this._languageId;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FullTextDocument.prototype, \"version\", {\r\n        get: function () {\r\n            return this._version;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    FullTextDocument.prototype.getText = function (range) {\r\n        if (range) {\r\n            var start = this.offsetAt(range.start);\r\n            var end = this.offsetAt(range.end);\r\n            return this._content.substring(start, end);\r\n        }\r\n        return this._content;\r\n    };\r\n    FullTextDocument.prototype.update = function (event, version) {\r\n        this._content = event.text;\r\n        this._version = version;\r\n        this._lineOffsets = undefined;\r\n    };\r\n    FullTextDocument.prototype.getLineOffsets = function () {\r\n        if (this._lineOffsets === undefined) {\r\n            var lineOffsets = [];\r\n            var text = this._content;\r\n            var isLineStart = true;\r\n            for (var i = 0; i < text.length; i++) {\r\n                if (isLineStart) {\r\n                    lineOffsets.push(i);\r\n                    isLineStart = false;\r\n                }\r\n                var ch = text.charAt(i);\r\n                isLineStart = (ch === '\\r' || ch === '\\n');\r\n                if (ch === '\\r' && i + 1 < text.length && text.charAt(i + 1) === '\\n') {\r\n                    i++;\r\n                }\r\n            }\r\n            if (isLineStart && text.length > 0) {\r\n                lineOffsets.push(text.length);\r\n            }\r\n            this._lineOffsets = lineOffsets;\r\n        }\r\n        return this._lineOffsets;\r\n    };\r\n    FullTextDocument.prototype.positionAt = function (offset) {\r\n        offset = Math.max(Math.min(offset, this._content.length), 0);\r\n        var lineOffsets = this.getLineOffsets();\r\n        var low = 0, high = lineOffsets.length;\r\n        if (high === 0) {\r\n            return Position.create(0, offset);\r\n        }\r\n        while (low < high) {\r\n            var mid = Math.floor((low + high) / 2);\r\n            if (lineOffsets[mid] > offset) {\r\n                high = mid;\r\n            }\r\n            else {\r\n                low = mid + 1;\r\n            }\r\n        }\r\n        // low is the least x for which the line offset is larger than the current offset\r\n        // or array.length if no line offset is larger than the current offset\r\n        var line = low - 1;\r\n        return Position.create(line, offset - lineOffsets[line]);\r\n    };\r\n    FullTextDocument.prototype.offsetAt = function (position) {\r\n        var lineOffsets = this.getLineOffsets();\r\n        if (position.line >= lineOffsets.length) {\r\n            return this._content.length;\r\n        }\r\n        else if (position.line < 0) {\r\n            return 0;\r\n        }\r\n        var lineOffset = lineOffsets[position.line];\r\n        var nextLineOffset = (position.line + 1 < lineOffsets.length) ? lineOffsets[position.line + 1] : this._content.length;\r\n        return Math.max(Math.min(lineOffset + position.character, nextLineOffset), lineOffset);\r\n    };\r\n    Object.defineProperty(FullTextDocument.prototype, \"lineCount\", {\r\n        get: function () {\r\n            return this.getLineOffsets().length;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return FullTextDocument;\r\n}());\r\nvar Is;\r\n(function (Is) {\r\n    var toString = Object.prototype.toString;\r\n    function defined(value) {\r\n        return typeof value !== 'undefined';\r\n    }\r\n    Is.defined = defined;\r\n    function undefined(value) {\r\n        return typeof value === 'undefined';\r\n    }\r\n    Is.undefined = undefined;\r\n    function boolean(value) {\r\n        return value === true || value === false;\r\n    }\r\n    Is.boolean = boolean;\r\n    function string(value) {\r\n        return toString.call(value) === '[object String]';\r\n    }\r\n    Is.string = string;\r\n    function number(value) {\r\n        return toString.call(value) === '[object Number]';\r\n    }\r\n    Is.number = number;\r\n    function func(value) {\r\n        return toString.call(value) === '[object Function]';\r\n    }\r\n    Is.func = func;\r\n    function objectLiteral(value) {\r\n        // Strictly speaking class instances pass this check as well. Since the LSP\r\n        // doesn't use classes we ignore this for now. If we do we need to add something\r\n        // like this: `Object.getPrototypeOf(Object.getPrototypeOf(x)) === null`\r\n        return value !== null && typeof value === 'object';\r\n    }\r\n    Is.objectLiteral = objectLiteral;\r\n    function typedArray(value, check) {\r\n        return Array.isArray(value) && value.every(check);\r\n    }\r\n    Is.typedArray = typedArray;\r\n})(Is || (Is = {}));\r\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nvar FullTextDocument = /** @class */ (function () {\n    function FullTextDocument(uri, languageId, version, content) {\n        this._uri = uri;\n        this._languageId = languageId;\n        this._version = version;\n        this._content = content;\n        this._lineOffsets = undefined;\n    }\n    Object.defineProperty(FullTextDocument.prototype, \"uri\", {\n        get: function () {\n            return this._uri;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(FullTextDocument.prototype, \"languageId\", {\n        get: function () {\n            return this._languageId;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(FullTextDocument.prototype, \"version\", {\n        get: function () {\n            return this._version;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    FullTextDocument.prototype.getText = function (range) {\n        if (range) {\n            var start = this.offsetAt(range.start);\n            var end = this.offsetAt(range.end);\n            return this._content.substring(start, end);\n        }\n        return this._content;\n    };\n    FullTextDocument.prototype.update = function (changes, version) {\n        for (var _i = 0, changes_1 = changes; _i < changes_1.length; _i++) {\n            var change = changes_1[_i];\n            if (FullTextDocument.isIncremental(change)) {\n                // makes sure start is before end\n                var range = getWellformedRange(change.range);\n                // update content\n                var startOffset = this.offsetAt(range.start);\n                var endOffset = this.offsetAt(range.end);\n                this._content = this._content.substring(0, startOffset) + change.text + this._content.substring(endOffset, this._content.length);\n                // update the offsets\n                var startLine = Math.max(range.start.line, 0);\n                var endLine = Math.max(range.end.line, 0);\n                var lineOffsets = this._lineOffsets;\n                var addedLineOffsets = computeLineOffsets(change.text, false, startOffset);\n                if (endLine - startLine === addedLineOffsets.length) {\n                    for (var i = 0, len = addedLineOffsets.length; i < len; i++) {\n                        lineOffsets[i + startLine + 1] = addedLineOffsets[i];\n                    }\n                }\n                else {\n                    if (addedLineOffsets.length < 10000) {\n                        lineOffsets.splice.apply(lineOffsets, [startLine + 1, endLine - startLine].concat(addedLineOffsets));\n                    }\n                    else { // avoid too many arguments for splice\n                        this._lineOffsets = lineOffsets = lineOffsets.slice(0, startLine + 1).concat(addedLineOffsets, lineOffsets.slice(endLine + 1));\n                    }\n                }\n                var diff = change.text.length - (endOffset - startOffset);\n                if (diff !== 0) {\n                    for (var i = startLine + 1 + addedLineOffsets.length, len = lineOffsets.length; i < len; i++) {\n                        lineOffsets[i] = lineOffsets[i] + diff;\n                    }\n                }\n            }\n            else if (FullTextDocument.isFull(change)) {\n                this._content = change.text;\n                this._lineOffsets = undefined;\n            }\n            else {\n                throw new Error('Unknown change event received');\n            }\n        }\n        this._version = version;\n    };\n    FullTextDocument.prototype.getLineOffsets = function () {\n        if (this._lineOffsets === undefined) {\n            this._lineOffsets = computeLineOffsets(this._content, true);\n        }\n        return this._lineOffsets;\n    };\n    FullTextDocument.prototype.positionAt = function (offset) {\n        offset = Math.max(Math.min(offset, this._content.length), 0);\n        var lineOffsets = this.getLineOffsets();\n        var low = 0, high = lineOffsets.length;\n        if (high === 0) {\n            return { line: 0, character: offset };\n        }\n        while (low < high) {\n            var mid = Math.floor((low + high) / 2);\n            if (lineOffsets[mid] > offset) {\n                high = mid;\n            }\n            else {\n                low = mid + 1;\n            }\n        }\n        // low is the least x for which the line offset is larger than the current offset\n        // or array.length if no line offset is larger than the current offset\n        var line = low - 1;\n        return { line: line, character: offset - lineOffsets[line] };\n    };\n    FullTextDocument.prototype.offsetAt = function (position) {\n        var lineOffsets = this.getLineOffsets();\n        if (position.line >= lineOffsets.length) {\n            return this._content.length;\n        }\n        else if (position.line < 0) {\n            return 0;\n        }\n        var lineOffset = lineOffsets[position.line];\n        var nextLineOffset = (position.line + 1 < lineOffsets.length) ? lineOffsets[position.line + 1] : this._content.length;\n        return Math.max(Math.min(lineOffset + position.character, nextLineOffset), lineOffset);\n    };\n    Object.defineProperty(FullTextDocument.prototype, \"lineCount\", {\n        get: function () {\n            return this.getLineOffsets().length;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    FullTextDocument.isIncremental = function (event) {\n        var candidate = event;\n        return candidate !== undefined && candidate !== null &&\n            typeof candidate.text === 'string' && candidate.range !== undefined &&\n            (candidate.rangeLength === undefined || typeof candidate.rangeLength === 'number');\n    };\n    FullTextDocument.isFull = function (event) {\n        var candidate = event;\n        return candidate !== undefined && candidate !== null &&\n            typeof candidate.text === 'string' && candidate.range === undefined && candidate.rangeLength === undefined;\n    };\n    return FullTextDocument;\n}());\nexport var TextDocument;\n(function (TextDocument) {\n    /**\n     * Creates a new text document.\n     *\n     * @param uri The document's uri.\n     * @param languageId  The document's language Id.\n     * @param version The document's initial version number.\n     * @param content The document's content.\n     */\n    function create(uri, languageId, version, content) {\n        return new FullTextDocument(uri, languageId, version, content);\n    }\n    TextDocument.create = create;\n    /**\n     * Updates a TextDocument by modifing its content.\n     *\n     * @param document the document to update. Only documents created by TextDocument.create are valid inputs.\n     * @param changes the changes to apply to the document.\n     * @returns The updated TextDocument. Note: That's the same document instance passed in as first parameter.\n     *\n     */\n    function update(document, changes, version) {\n        if (document instanceof FullTextDocument) {\n            document.update(changes, version);\n            return document;\n        }\n        else {\n            throw new Error('TextDocument.update: document must be created by TextDocument.create');\n        }\n    }\n    TextDocument.update = update;\n    function applyEdits(document, edits) {\n        var text = document.getText();\n        var sortedEdits = mergeSort(edits.map(getWellformedEdit), function (a, b) {\n            var diff = a.range.start.line - b.range.start.line;\n            if (diff === 0) {\n                return a.range.start.character - b.range.start.character;\n            }\n            return diff;\n        });\n        var lastModifiedOffset = 0;\n        var spans = [];\n        for (var _i = 0, sortedEdits_1 = sortedEdits; _i < sortedEdits_1.length; _i++) {\n            var e = sortedEdits_1[_i];\n            var startOffset = document.offsetAt(e.range.start);\n            if (startOffset < lastModifiedOffset) {\n                throw new Error('Overlapping edit');\n            }\n            else if (startOffset > lastModifiedOffset) {\n                spans.push(text.substring(lastModifiedOffset, startOffset));\n            }\n            if (e.newText.length) {\n                spans.push(e.newText);\n            }\n            lastModifiedOffset = document.offsetAt(e.range.end);\n        }\n        spans.push(text.substr(lastModifiedOffset));\n        return spans.join('');\n    }\n    TextDocument.applyEdits = applyEdits;\n})(TextDocument || (TextDocument = {}));\nfunction mergeSort(data, compare) {\n    if (data.length <= 1) {\n        // sorted\n        return data;\n    }\n    var p = (data.length / 2) | 0;\n    var left = data.slice(0, p);\n    var right = data.slice(p);\n    mergeSort(left, compare);\n    mergeSort(right, compare);\n    var leftIdx = 0;\n    var rightIdx = 0;\n    var i = 0;\n    while (leftIdx < left.length && rightIdx < right.length) {\n        var ret = compare(left[leftIdx], right[rightIdx]);\n        if (ret <= 0) {\n            // smaller_equal -> take left to preserve order\n            data[i++] = left[leftIdx++];\n        }\n        else {\n            // greater -> take right\n            data[i++] = right[rightIdx++];\n        }\n    }\n    while (leftIdx < left.length) {\n        data[i++] = left[leftIdx++];\n    }\n    while (rightIdx < right.length) {\n        data[i++] = right[rightIdx++];\n    }\n    return data;\n}\nfunction computeLineOffsets(text, isAtLineStart, textOffset) {\n    if (textOffset === void 0) { textOffset = 0; }\n    var result = isAtLineStart ? [textOffset] : [];\n    for (var i = 0; i < text.length; i++) {\n        var ch = text.charCodeAt(i);\n        if (ch === 13 /* CarriageReturn */ || ch === 10 /* LineFeed */) {\n            if (ch === 13 /* CarriageReturn */ && i + 1 < text.length && text.charCodeAt(i + 1) === 10 /* LineFeed */) {\n                i++;\n            }\n            result.push(textOffset + i + 1);\n        }\n    }\n    return result;\n}\nfunction getWellformedRange(range) {\n    var start = range.start;\n    var end = range.end;\n    if (start.line > end.line || (start.line === end.line && start.character > end.character)) {\n        return { start: end, end: start };\n    }\n    return range;\n}\nfunction getWellformedEdit(textEdit) {\n    var range = getWellformedRange(textEdit.range);\n    if (range !== textEdit.range) {\n        return { newText: textEdit.newText, range: range };\n    }\n    return textEdit;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Range, TextEdit, Color, ColorInformation, ColorPresentation, FoldingRange, FoldingRangeKind, MarkupKind, SelectionRange, Diagnostic, DiagnosticSeverity, CompletionItem, CompletionItemKind, CompletionList, Position, InsertTextFormat, MarkupContent, SymbolInformation, SymbolKind, DocumentSymbol, Location, Hover, MarkedString, FormattingOptions } from '../vscode-languageserver-types/main.js';\nimport { TextDocument } from '../vscode-languageserver-textdocument/lib/esm/main.js';\nexport { TextDocument, Range, TextEdit, Color, ColorInformation, ColorPresentation, FoldingRange, FoldingRangeKind, SelectionRange, Diagnostic, DiagnosticSeverity, CompletionItem, CompletionItemKind, CompletionList, Position, InsertTextFormat, MarkupContent, MarkupKind, SymbolInformation, SymbolKind, DocumentSymbol, Location, Hover, MarkedString, FormattingOptions };\n/**\n * Error codes used by diagnostics\n */\nexport var ErrorCode;\n(function (ErrorCode) {\n    ErrorCode[ErrorCode[\"Undefined\"] = 0] = \"Undefined\";\n    ErrorCode[ErrorCode[\"EnumValueMismatch\"] = 1] = \"EnumValueMismatch\";\n    ErrorCode[ErrorCode[\"UnexpectedEndOfComment\"] = 257] = \"UnexpectedEndOfComment\";\n    ErrorCode[ErrorCode[\"UnexpectedEndOfString\"] = 258] = \"UnexpectedEndOfString\";\n    ErrorCode[ErrorCode[\"UnexpectedEndOfNumber\"] = 259] = \"UnexpectedEndOfNumber\";\n    ErrorCode[ErrorCode[\"InvalidUnicode\"] = 260] = \"InvalidUnicode\";\n    ErrorCode[ErrorCode[\"InvalidEscapeCharacter\"] = 261] = \"InvalidEscapeCharacter\";\n    ErrorCode[ErrorCode[\"InvalidCharacter\"] = 262] = \"InvalidCharacter\";\n    ErrorCode[ErrorCode[\"PropertyExpected\"] = 513] = \"PropertyExpected\";\n    ErrorCode[ErrorCode[\"CommaExpected\"] = 514] = \"CommaExpected\";\n    ErrorCode[ErrorCode[\"ColonExpected\"] = 515] = \"ColonExpected\";\n    ErrorCode[ErrorCode[\"ValueExpected\"] = 516] = \"ValueExpected\";\n    ErrorCode[ErrorCode[\"CommaOrCloseBacketExpected\"] = 517] = \"CommaOrCloseBacketExpected\";\n    ErrorCode[ErrorCode[\"CommaOrCloseBraceExpected\"] = 518] = \"CommaOrCloseBraceExpected\";\n    ErrorCode[ErrorCode[\"TrailingComma\"] = 519] = \"TrailingComma\";\n    ErrorCode[ErrorCode[\"DuplicateKey\"] = 520] = \"DuplicateKey\";\n    ErrorCode[ErrorCode[\"CommentNotPermitted\"] = 521] = \"CommentNotPermitted\";\n    ErrorCode[ErrorCode[\"SchemaResolveError\"] = 768] = \"SchemaResolveError\";\n})(ErrorCode || (ErrorCode = {}));\nexport var ClientCapabilities;\n(function (ClientCapabilities) {\n    ClientCapabilities.LATEST = {\n        textDocument: {\n            completion: {\n                completionItem: {\n                    documentationFormat: [MarkupKind.Markdown, MarkupKind.PlainText],\n                    commitCharactersSupport: true\n                }\n            }\n        }\n    };\n})(ClientCapabilities || (ClientCapabilities = {}));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nfunction format(message, args) {\n    var result;\n    if (args.length === 0) {\n        result = message;\n    }\n    else {\n        result = message.replace(/\\{(\\d+)\\}/g, function (match, rest) {\n            var index = rest[0];\n            return typeof args[index] !== 'undefined' ? args[index] : match;\n        });\n    }\n    return result;\n}\nfunction localize(key, message) {\n    var args = [];\n    for (var _i = 2; _i < arguments.length; _i++) {\n        args[_i - 2] = arguments[_i];\n    }\n    return format(message, args);\n}\nexport function loadMessageBundle(file) {\n    return localize;\n}\nexport function config(opt) {\n    return loadMessageBundle;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport * as Json from '../../jsonc-parser/main.js';\nimport { isNumber, equals, isBoolean, isString, isDefined } from '../utils/objects.js';\nimport { ErrorCode, Diagnostic, DiagnosticSeverity, Range } from '../jsonLanguageTypes.js';\nimport * as nls from '../../../fillers/vscode-nls.js';\nvar localize = nls.loadMessageBundle();\nvar formats = {\n    'color-hex': { errorMessage: localize('colorHexFormatWarning', 'Invalid color format. Use #RGB, #RGBA, #RRGGBB or #RRGGBBAA.'), pattern: /^#([0-9A-Fa-f]{3,4}|([0-9A-Fa-f]{2}){3,4})$/ },\n    'date-time': { errorMessage: localize('dateTimeFormatWarning', 'String is not a RFC3339 date-time.'), pattern: /^(\\d{4})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])T([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\\.[0-9]+)?(Z|(\\+|-)([01][0-9]|2[0-3]):([0-5][0-9]))$/i },\n    'date': { errorMessage: localize('dateFormatWarning', 'String is not a RFC3339 date.'), pattern: /^(\\d{4})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])$/i },\n    'time': { errorMessage: localize('timeFormatWarning', 'String is not a RFC3339 time.'), pattern: /^([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\\.[0-9]+)?(Z|(\\+|-)([01][0-9]|2[0-3]):([0-5][0-9]))$/i },\n    'email': { errorMessage: localize('emailFormatWarning', 'String is not an e-mail address.'), pattern: /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/ }\n};\nvar ASTNodeImpl = /** @class */ (function () {\n    function ASTNodeImpl(parent, offset, length) {\n        if (length === void 0) { length = 0; }\n        this.offset = offset;\n        this.length = length;\n        this.parent = parent;\n    }\n    Object.defineProperty(ASTNodeImpl.prototype, \"children\", {\n        get: function () {\n            return [];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ASTNodeImpl.prototype.toString = function () {\n        return 'type: ' + this.type + ' (' + this.offset + '/' + this.length + ')' + (this.parent ? ' parent: {' + this.parent.toString() + '}' : '');\n    };\n    return ASTNodeImpl;\n}());\nexport { ASTNodeImpl };\nvar NullASTNodeImpl = /** @class */ (function (_super) {\n    __extends(NullASTNodeImpl, _super);\n    function NullASTNodeImpl(parent, offset) {\n        var _this = _super.call(this, parent, offset) || this;\n        _this.type = 'null';\n        _this.value = null;\n        return _this;\n    }\n    return NullASTNodeImpl;\n}(ASTNodeImpl));\nexport { NullASTNodeImpl };\nvar BooleanASTNodeImpl = /** @class */ (function (_super) {\n    __extends(BooleanASTNodeImpl, _super);\n    function BooleanASTNodeImpl(parent, boolValue, offset) {\n        var _this = _super.call(this, parent, offset) || this;\n        _this.type = 'boolean';\n        _this.value = boolValue;\n        return _this;\n    }\n    return BooleanASTNodeImpl;\n}(ASTNodeImpl));\nexport { BooleanASTNodeImpl };\nvar ArrayASTNodeImpl = /** @class */ (function (_super) {\n    __extends(ArrayASTNodeImpl, _super);\n    function ArrayASTNodeImpl(parent, offset) {\n        var _this = _super.call(this, parent, offset) || this;\n        _this.type = 'array';\n        _this.items = [];\n        return _this;\n    }\n    Object.defineProperty(ArrayASTNodeImpl.prototype, \"children\", {\n        get: function () {\n            return this.items;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return ArrayASTNodeImpl;\n}(ASTNodeImpl));\nexport { ArrayASTNodeImpl };\nvar NumberASTNodeImpl = /** @class */ (function (_super) {\n    __extends(NumberASTNodeImpl, _super);\n    function NumberASTNodeImpl(parent, offset) {\n        var _this = _super.call(this, parent, offset) || this;\n        _this.type = 'number';\n        _this.isInteger = true;\n        _this.value = Number.NaN;\n        return _this;\n    }\n    return NumberASTNodeImpl;\n}(ASTNodeImpl));\nexport { NumberASTNodeImpl };\nvar StringASTNodeImpl = /** @class */ (function (_super) {\n    __extends(StringASTNodeImpl, _super);\n    function StringASTNodeImpl(parent, offset, length) {\n        var _this = _super.call(this, parent, offset, length) || this;\n        _this.type = 'string';\n        _this.value = '';\n        return _this;\n    }\n    return StringASTNodeImpl;\n}(ASTNodeImpl));\nexport { StringASTNodeImpl };\nvar PropertyASTNodeImpl = /** @class */ (function (_super) {\n    __extends(PropertyASTNodeImpl, _super);\n    function PropertyASTNodeImpl(parent, offset, keyNode) {\n        var _this = _super.call(this, parent, offset) || this;\n        _this.type = 'property';\n        _this.colonOffset = -1;\n        _this.keyNode = keyNode;\n        return _this;\n    }\n    Object.defineProperty(PropertyASTNodeImpl.prototype, \"children\", {\n        get: function () {\n            return this.valueNode ? [this.keyNode, this.valueNode] : [this.keyNode];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return PropertyASTNodeImpl;\n}(ASTNodeImpl));\nexport { PropertyASTNodeImpl };\nvar ObjectASTNodeImpl = /** @class */ (function (_super) {\n    __extends(ObjectASTNodeImpl, _super);\n    function ObjectASTNodeImpl(parent, offset) {\n        var _this = _super.call(this, parent, offset) || this;\n        _this.type = 'object';\n        _this.properties = [];\n        return _this;\n    }\n    Object.defineProperty(ObjectASTNodeImpl.prototype, \"children\", {\n        get: function () {\n            return this.properties;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return ObjectASTNodeImpl;\n}(ASTNodeImpl));\nexport { ObjectASTNodeImpl };\nexport function asSchema(schema) {\n    if (isBoolean(schema)) {\n        return schema ? {} : { \"not\": {} };\n    }\n    return schema;\n}\nexport var EnumMatch;\n(function (EnumMatch) {\n    EnumMatch[EnumMatch[\"Key\"] = 0] = \"Key\";\n    EnumMatch[EnumMatch[\"Enum\"] = 1] = \"Enum\";\n})(EnumMatch || (EnumMatch = {}));\nvar SchemaCollector = /** @class */ (function () {\n    function SchemaCollector(focusOffset, exclude) {\n        if (focusOffset === void 0) { focusOffset = -1; }\n        this.focusOffset = focusOffset;\n        this.exclude = exclude;\n        this.schemas = [];\n    }\n    SchemaCollector.prototype.add = function (schema) {\n        this.schemas.push(schema);\n    };\n    SchemaCollector.prototype.merge = function (other) {\n        Array.prototype.push.apply(this.schemas, other.schemas);\n    };\n    SchemaCollector.prototype.include = function (node) {\n        return (this.focusOffset === -1 || contains(node, this.focusOffset)) && (node !== this.exclude);\n    };\n    SchemaCollector.prototype.newSub = function () {\n        return new SchemaCollector(-1, this.exclude);\n    };\n    return SchemaCollector;\n}());\nvar NoOpSchemaCollector = /** @class */ (function () {\n    function NoOpSchemaCollector() {\n    }\n    Object.defineProperty(NoOpSchemaCollector.prototype, \"schemas\", {\n        get: function () { return []; },\n        enumerable: false,\n        configurable: true\n    });\n    NoOpSchemaCollector.prototype.add = function (schema) { };\n    NoOpSchemaCollector.prototype.merge = function (other) { };\n    NoOpSchemaCollector.prototype.include = function (node) { return true; };\n    NoOpSchemaCollector.prototype.newSub = function () { return this; };\n    NoOpSchemaCollector.instance = new NoOpSchemaCollector();\n    return NoOpSchemaCollector;\n}());\nvar ValidationResult = /** @class */ (function () {\n    function ValidationResult() {\n        this.problems = [];\n        this.propertiesMatches = 0;\n        this.propertiesValueMatches = 0;\n        this.primaryValueMatches = 0;\n        this.enumValueMatch = false;\n        this.enumValues = undefined;\n    }\n    ValidationResult.prototype.hasProblems = function () {\n        return !!this.problems.length;\n    };\n    ValidationResult.prototype.mergeAll = function (validationResults) {\n        for (var _i = 0, validationResults_1 = validationResults; _i < validationResults_1.length; _i++) {\n            var validationResult = validationResults_1[_i];\n            this.merge(validationResult);\n        }\n    };\n    ValidationResult.prototype.merge = function (validationResult) {\n        this.problems = this.problems.concat(validationResult.problems);\n    };\n    ValidationResult.prototype.mergeEnumValues = function (validationResult) {\n        if (!this.enumValueMatch && !validationResult.enumValueMatch && this.enumValues && validationResult.enumValues) {\n            this.enumValues = this.enumValues.concat(validationResult.enumValues);\n            for (var _i = 0, _a = this.problems; _i < _a.length; _i++) {\n                var error = _a[_i];\n                if (error.code === ErrorCode.EnumValueMismatch) {\n                    error.message = localize('enumWarning', 'Value is not accepted. Valid values: {0}.', this.enumValues.map(function (v) { return JSON.stringify(v); }).join(', '));\n                }\n            }\n        }\n    };\n    ValidationResult.prototype.mergePropertyMatch = function (propertyValidationResult) {\n        this.merge(propertyValidationResult);\n        this.propertiesMatches++;\n        if (propertyValidationResult.enumValueMatch || !propertyValidationResult.hasProblems() && propertyValidationResult.propertiesMatches) {\n            this.propertiesValueMatches++;\n        }\n        if (propertyValidationResult.enumValueMatch && propertyValidationResult.enumValues && propertyValidationResult.enumValues.length === 1) {\n            this.primaryValueMatches++;\n        }\n    };\n    ValidationResult.prototype.compare = function (other) {\n        var hasProblems = this.hasProblems();\n        if (hasProblems !== other.hasProblems()) {\n            return hasProblems ? -1 : 1;\n        }\n        if (this.enumValueMatch !== other.enumValueMatch) {\n            return other.enumValueMatch ? -1 : 1;\n        }\n        if (this.primaryValueMatches !== other.primaryValueMatches) {\n            return this.primaryValueMatches - other.primaryValueMatches;\n        }\n        if (this.propertiesValueMatches !== other.propertiesValueMatches) {\n            return this.propertiesValueMatches - other.propertiesValueMatches;\n        }\n        return this.propertiesMatches - other.propertiesMatches;\n    };\n    return ValidationResult;\n}());\nexport { ValidationResult };\nexport function newJSONDocument(root, diagnostics) {\n    if (diagnostics === void 0) { diagnostics = []; }\n    return new JSONDocument(root, diagnostics, []);\n}\nexport function getNodeValue(node) {\n    return Json.getNodeValue(node);\n}\nexport function getNodePath(node) {\n    return Json.getNodePath(node);\n}\nexport function contains(node, offset, includeRightBound) {\n    if (includeRightBound === void 0) { includeRightBound = false; }\n    return offset >= node.offset && offset < (node.offset + node.length) || includeRightBound && offset === (node.offset + node.length);\n}\nvar JSONDocument = /** @class */ (function () {\n    function JSONDocument(root, syntaxErrors, comments) {\n        if (syntaxErrors === void 0) { syntaxErrors = []; }\n        if (comments === void 0) { comments = []; }\n        this.root = root;\n        this.syntaxErrors = syntaxErrors;\n        this.comments = comments;\n    }\n    JSONDocument.prototype.getNodeFromOffset = function (offset, includeRightBound) {\n        if (includeRightBound === void 0) { includeRightBound = false; }\n        if (this.root) {\n            return Json.findNodeAtOffset(this.root, offset, includeRightBound);\n        }\n        return undefined;\n    };\n    JSONDocument.prototype.visit = function (visitor) {\n        if (this.root) {\n            var doVisit_1 = function (node) {\n                var ctn = visitor(node);\n                var children = node.children;\n                if (Array.isArray(children)) {\n                    for (var i = 0; i < children.length && ctn; i++) {\n                        ctn = doVisit_1(children[i]);\n                    }\n                }\n                return ctn;\n            };\n            doVisit_1(this.root);\n        }\n    };\n    JSONDocument.prototype.validate = function (textDocument, schema) {\n        if (this.root && schema) {\n            var validationResult = new ValidationResult();\n            validate(this.root, schema, validationResult, NoOpSchemaCollector.instance);\n            return validationResult.problems.map(function (p) {\n                var range = Range.create(textDocument.positionAt(p.location.offset), textDocument.positionAt(p.location.offset + p.location.length));\n                return Diagnostic.create(range, p.message, p.severity, p.code);\n            });\n        }\n        return undefined;\n    };\n    JSONDocument.prototype.getMatchingSchemas = function (schema, focusOffset, exclude) {\n        if (focusOffset === void 0) { focusOffset = -1; }\n        var matchingSchemas = new SchemaCollector(focusOffset, exclude);\n        if (this.root && schema) {\n            validate(this.root, schema, new ValidationResult(), matchingSchemas);\n        }\n        return matchingSchemas.schemas;\n    };\n    return JSONDocument;\n}());\nexport { JSONDocument };\nfunction validate(n, schema, validationResult, matchingSchemas) {\n    if (!n || !matchingSchemas.include(n)) {\n        return;\n    }\n    var node = n;\n    switch (node.type) {\n        case 'object':\n            _validateObjectNode(node, schema, validationResult, matchingSchemas);\n            break;\n        case 'array':\n            _validateArrayNode(node, schema, validationResult, matchingSchemas);\n            break;\n        case 'string':\n            _validateStringNode(node, schema, validationResult, matchingSchemas);\n            break;\n        case 'number':\n            _validateNumberNode(node, schema, validationResult, matchingSchemas);\n            break;\n        case 'property':\n            return validate(node.valueNode, schema, validationResult, matchingSchemas);\n    }\n    _validateNode();\n    matchingSchemas.add({ node: node, schema: schema });\n    function _validateNode() {\n        function matchesType(type) {\n            return node.type === type || (type === 'integer' && node.type === 'number' && node.isInteger);\n        }\n        if (Array.isArray(schema.type)) {\n            if (!schema.type.some(matchesType)) {\n                validationResult.problems.push({\n                    location: { offset: node.offset, length: node.length },\n                    severity: DiagnosticSeverity.Warning,\n                    message: schema.errorMessage || localize('typeArrayMismatchWarning', 'Incorrect type. Expected one of {0}.', schema.type.join(', '))\n                });\n            }\n        }\n        else if (schema.type) {\n            if (!matchesType(schema.type)) {\n                validationResult.problems.push({\n                    location: { offset: node.offset, length: node.length },\n                    severity: DiagnosticSeverity.Warning,\n                    message: schema.errorMessage || localize('typeMismatchWarning', 'Incorrect type. Expected \"{0}\".', schema.type)\n                });\n            }\n        }\n        if (Array.isArray(schema.allOf)) {\n            for (var _i = 0, _a = schema.allOf; _i < _a.length; _i++) {\n                var subSchemaRef = _a[_i];\n                validate(node, asSchema(subSchemaRef), validationResult, matchingSchemas);\n            }\n        }\n        var notSchema = asSchema(schema.not);\n        if (notSchema) {\n            var subValidationResult = new ValidationResult();\n            var subMatchingSchemas = matchingSchemas.newSub();\n            validate(node, notSchema, subValidationResult, subMatchingSchemas);\n            if (!subValidationResult.hasProblems()) {\n                validationResult.problems.push({\n                    location: { offset: node.offset, length: node.length },\n                    severity: DiagnosticSeverity.Warning,\n                    message: localize('notSchemaWarning', \"Matches a schema that is not allowed.\")\n                });\n            }\n            for (var _b = 0, _c = subMatchingSchemas.schemas; _b < _c.length; _b++) {\n                var ms = _c[_b];\n                ms.inverted = !ms.inverted;\n                matchingSchemas.add(ms);\n            }\n        }\n        var testAlternatives = function (alternatives, maxOneMatch) {\n            var matches = [];\n            // remember the best match that is used for error messages\n            var bestMatch = undefined;\n            for (var _i = 0, alternatives_1 = alternatives; _i < alternatives_1.length; _i++) {\n                var subSchemaRef = alternatives_1[_i];\n                var subSchema = asSchema(subSchemaRef);\n                var subValidationResult = new ValidationResult();\n                var subMatchingSchemas = matchingSchemas.newSub();\n                validate(node, subSchema, subValidationResult, subMatchingSchemas);\n                if (!subValidationResult.hasProblems()) {\n                    matches.push(subSchema);\n                }\n                if (!bestMatch) {\n                    bestMatch = { schema: subSchema, validationResult: subValidationResult, matchingSchemas: subMatchingSchemas };\n                }\n                else {\n                    if (!maxOneMatch && !subValidationResult.hasProblems() && !bestMatch.validationResult.hasProblems()) {\n                        // no errors, both are equally good matches\n                        bestMatch.matchingSchemas.merge(subMatchingSchemas);\n                        bestMatch.validationResult.propertiesMatches += subValidationResult.propertiesMatches;\n                        bestMatch.validationResult.propertiesValueMatches += subValidationResult.propertiesValueMatches;\n                    }\n                    else {\n                        var compareResult = subValidationResult.compare(bestMatch.validationResult);\n                        if (compareResult > 0) {\n                            // our node is the best matching so far\n                            bestMatch = { schema: subSchema, validationResult: subValidationResult, matchingSchemas: subMatchingSchemas };\n                        }\n                        else if (compareResult === 0) {\n                            // there's already a best matching but we are as good\n                            bestMatch.matchingSchemas.merge(subMatchingSchemas);\n                            bestMatch.validationResult.mergeEnumValues(subValidationResult);\n                        }\n                    }\n                }\n            }\n            if (matches.length > 1 && maxOneMatch) {\n                validationResult.problems.push({\n                    location: { offset: node.offset, length: 1 },\n                    severity: DiagnosticSeverity.Warning,\n                    message: localize('oneOfWarning', \"Matches multiple schemas when only one must validate.\")\n                });\n            }\n            if (bestMatch) {\n                validationResult.merge(bestMatch.validationResult);\n                validationResult.propertiesMatches += bestMatch.validationResult.propertiesMatches;\n                validationResult.propertiesValueMatches += bestMatch.validationResult.propertiesValueMatches;\n                matchingSchemas.merge(bestMatch.matchingSchemas);\n            }\n            return matches.length;\n        };\n        if (Array.isArray(schema.anyOf)) {\n            testAlternatives(schema.anyOf, false);\n        }\n        if (Array.isArray(schema.oneOf)) {\n            testAlternatives(schema.oneOf, true);\n        }\n        var testBranch = function (schema) {\n            var subValidationResult = new ValidationResult();\n            var subMatchingSchemas = matchingSchemas.newSub();\n            validate(node, asSchema(schema), subValidationResult, subMatchingSchemas);\n            validationResult.merge(subValidationResult);\n            validationResult.propertiesMatches += subValidationResult.propertiesMatches;\n            validationResult.propertiesValueMatches += subValidationResult.propertiesValueMatches;\n            matchingSchemas.merge(subMatchingSchemas);\n        };\n        var testCondition = function (ifSchema, thenSchema, elseSchema) {\n            var subSchema = asSchema(ifSchema);\n            var subValidationResult = new ValidationResult();\n            var subMatchingSchemas = matchingSchemas.newSub();\n            validate(node, subSchema, subValidationResult, subMatchingSchemas);\n            matchingSchemas.merge(subMatchingSchemas);\n            if (!subValidationResult.hasProblems()) {\n                if (thenSchema) {\n                    testBranch(thenSchema);\n                }\n            }\n            else if (elseSchema) {\n                testBranch(elseSchema);\n            }\n        };\n        var ifSchema = asSchema(schema.if);\n        if (ifSchema) {\n            testCondition(ifSchema, asSchema(schema.then), asSchema(schema.else));\n        }\n        if (Array.isArray(schema.enum)) {\n            var val = getNodeValue(node);\n            var enumValueMatch = false;\n            for (var _d = 0, _e = schema.enum; _d < _e.length; _d++) {\n                var e = _e[_d];\n                if (equals(val, e)) {\n                    enumValueMatch = true;\n                    break;\n                }\n            }\n            validationResult.enumValues = schema.enum;\n            validationResult.enumValueMatch = enumValueMatch;\n            if (!enumValueMatch) {\n                validationResult.problems.push({\n                    location: { offset: node.offset, length: node.length },\n                    severity: DiagnosticSeverity.Warning,\n                    code: ErrorCode.EnumValueMismatch,\n                    message: schema.errorMessage || localize('enumWarning', 'Value is not accepted. Valid values: {0}.', schema.enum.map(function (v) { return JSON.stringify(v); }).join(', '))\n                });\n            }\n        }\n        if (isDefined(schema.const)) {\n            var val = getNodeValue(node);\n            if (!equals(val, schema.const)) {\n                validationResult.problems.push({\n                    location: { offset: node.offset, length: node.length },\n                    severity: DiagnosticSeverity.Warning,\n                    code: ErrorCode.EnumValueMismatch,\n                    message: schema.errorMessage || localize('constWarning', 'Value must be {0}.', JSON.stringify(schema.const))\n                });\n                validationResult.enumValueMatch = false;\n            }\n            else {\n                validationResult.enumValueMatch = true;\n            }\n            validationResult.enumValues = [schema.const];\n        }\n        if (schema.deprecationMessage && node.parent) {\n            validationResult.problems.push({\n                location: { offset: node.parent.offset, length: node.parent.length },\n                severity: DiagnosticSeverity.Warning,\n                message: schema.deprecationMessage\n            });\n        }\n    }\n    function _validateNumberNode(node, schema, validationResult, matchingSchemas) {\n        var val = node.value;\n        function normalizeFloats(float) {\n            var _a;\n            var parts = /^(-?\\d+)(?:\\.(\\d+))?(?:e([-+]\\d+))?$/.exec(float.toString());\n            return parts && {\n                value: Number(parts[1] + (parts[2] || '')),\n                multiplier: (((_a = parts[2]) === null || _a === void 0 ? void 0 : _a.length) || 0) - (parseInt(parts[3]) || 0)\n            };\n        }\n        ;\n        if (isNumber(schema.multipleOf)) {\n            var remainder = -1;\n            if (Number.isInteger(schema.multipleOf)) {\n                remainder = val % schema.multipleOf;\n            }\n            else {\n                var normMultipleOf = normalizeFloats(schema.multipleOf);\n                var normValue = normalizeFloats(val);\n                if (normMultipleOf && normValue) {\n                    var multiplier = Math.pow(10, Math.abs(normValue.multiplier - normMultipleOf.multiplier));\n                    if (normValue.multiplier < normMultipleOf.multiplier) {\n                        normValue.value *= multiplier;\n                    }\n                    else {\n                        normMultipleOf.value *= multiplier;\n                    }\n                    remainder = normValue.value % normMultipleOf.value;\n                }\n            }\n            if (remainder !== 0) {\n                validationResult.problems.push({\n                    location: { offset: node.offset, length: node.length },\n                    severity: DiagnosticSeverity.Warning,\n                    message: localize('multipleOfWarning', 'Value is not divisible by {0}.', schema.multipleOf)\n                });\n            }\n        }\n        function getExclusiveLimit(limit, exclusive) {\n            if (isNumber(exclusive)) {\n                return exclusive;\n            }\n            if (isBoolean(exclusive) && exclusive) {\n                return limit;\n            }\n            return undefined;\n        }\n        function getLimit(limit, exclusive) {\n            if (!isBoolean(exclusive) || !exclusive) {\n                return limit;\n            }\n            return undefined;\n        }\n        var exclusiveMinimum = getExclusiveLimit(schema.minimum, schema.exclusiveMinimum);\n        if (isNumber(exclusiveMinimum) && val <= exclusiveMinimum) {\n            validationResult.problems.push({\n                location: { offset: node.offset, length: node.length },\n                severity: DiagnosticSeverity.Warning,\n                message: localize('exclusiveMinimumWarning', 'Value is below the exclusive minimum of {0}.', exclusiveMinimum)\n            });\n        }\n        var exclusiveMaximum = getExclusiveLimit(schema.maximum, schema.exclusiveMaximum);\n        if (isNumber(exclusiveMaximum) && val >= exclusiveMaximum) {\n            validationResult.problems.push({\n                location: { offset: node.offset, length: node.length },\n                severity: DiagnosticSeverity.Warning,\n                message: localize('exclusiveMaximumWarning', 'Value is above the exclusive maximum of {0}.', exclusiveMaximum)\n            });\n        }\n        var minimum = getLimit(schema.minimum, schema.exclusiveMinimum);\n        if (isNumber(minimum) && val < minimum) {\n            validationResult.problems.push({\n                location: { offset: node.offset, length: node.length },\n                severity: DiagnosticSeverity.Warning,\n                message: localize('minimumWarning', 'Value is below the minimum of {0}.', minimum)\n            });\n        }\n        var maximum = getLimit(schema.maximum, schema.exclusiveMaximum);\n        if (isNumber(maximum) && val > maximum) {\n            validationResult.problems.push({\n                location: { offset: node.offset, length: node.length },\n                severity: DiagnosticSeverity.Warning,\n                message: localize('maximumWarning', 'Value is above the maximum of {0}.', maximum)\n            });\n        }\n    }\n    function _validateStringNode(node, schema, validationResult, matchingSchemas) {\n        if (isNumber(schema.minLength) && node.value.length < schema.minLength) {\n            validationResult.problems.push({\n                location: { offset: node.offset, length: node.length },\n                severity: DiagnosticSeverity.Warning,\n                message: localize('minLengthWarning', 'String is shorter than the minimum length of {0}.', schema.minLength)\n            });\n        }\n        if (isNumber(schema.maxLength) && node.value.length > schema.maxLength) {\n            validationResult.problems.push({\n                location: { offset: node.offset, length: node.length },\n                severity: DiagnosticSeverity.Warning,\n                message: localize('maxLengthWarning', 'String is longer than the maximum length of {0}.', schema.maxLength)\n            });\n        }\n        if (isString(schema.pattern)) {\n            var regex = new RegExp(schema.pattern);\n            if (!regex.test(node.value)) {\n                validationResult.problems.push({\n                    location: { offset: node.offset, length: node.length },\n                    severity: DiagnosticSeverity.Warning,\n                    message: schema.patternErrorMessage || schema.errorMessage || localize('patternWarning', 'String does not match the pattern of \"{0}\".', schema.pattern)\n                });\n            }\n        }\n        if (schema.format) {\n            switch (schema.format) {\n                case 'uri':\n                case 'uri-reference':\n                    {\n                        var errorMessage = void 0;\n                        if (!node.value) {\n                            errorMessage = localize('uriEmpty', 'URI expected.');\n                        }\n                        else {\n                            var match = /^(([^:/?#]+?):)?(\\/\\/([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?/.exec(node.value);\n                            if (!match) {\n                                errorMessage = localize('uriMissing', 'URI is expected.');\n                            }\n                            else if (!match[2] && schema.format === 'uri') {\n                                errorMessage = localize('uriSchemeMissing', 'URI with a scheme is expected.');\n                            }\n                        }\n                        if (errorMessage) {\n                            validationResult.problems.push({\n                                location: { offset: node.offset, length: node.length },\n                                severity: DiagnosticSeverity.Warning,\n                                message: schema.patternErrorMessage || schema.errorMessage || localize('uriFormatWarning', 'String is not a URI: {0}', errorMessage)\n                            });\n                        }\n                    }\n                    break;\n                case 'color-hex':\n                case 'date-time':\n                case 'date':\n                case 'time':\n                case 'email':\n                    var format = formats[schema.format];\n                    if (!node.value || !format.pattern.exec(node.value)) {\n                        validationResult.problems.push({\n                            location: { offset: node.offset, length: node.length },\n                            severity: DiagnosticSeverity.Warning,\n                            message: schema.patternErrorMessage || schema.errorMessage || format.errorMessage\n                        });\n                    }\n                default:\n            }\n        }\n    }\n    function _validateArrayNode(node, schema, validationResult, matchingSchemas) {\n        if (Array.isArray(schema.items)) {\n            var subSchemas = schema.items;\n            for (var index = 0; index < subSchemas.length; index++) {\n                var subSchemaRef = subSchemas[index];\n                var subSchema = asSchema(subSchemaRef);\n                var itemValidationResult = new ValidationResult();\n                var item = node.items[index];\n                if (item) {\n                    validate(item, subSchema, itemValidationResult, matchingSchemas);\n                    validationResult.mergePropertyMatch(itemValidationResult);\n                }\n                else if (node.items.length >= subSchemas.length) {\n                    validationResult.propertiesValueMatches++;\n                }\n            }\n            if (node.items.length > subSchemas.length) {\n                if (typeof schema.additionalItems === 'object') {\n                    for (var i = subSchemas.length; i < node.items.length; i++) {\n                        var itemValidationResult = new ValidationResult();\n                        validate(node.items[i], schema.additionalItems, itemValidationResult, matchingSchemas);\n                        validationResult.mergePropertyMatch(itemValidationResult);\n                    }\n                }\n                else if (schema.additionalItems === false) {\n                    validationResult.problems.push({\n                        location: { offset: node.offset, length: node.length },\n                        severity: DiagnosticSeverity.Warning,\n                        message: localize('additionalItemsWarning', 'Array has too many items according to schema. Expected {0} or fewer.', subSchemas.length)\n                    });\n                }\n            }\n        }\n        else {\n            var itemSchema = asSchema(schema.items);\n            if (itemSchema) {\n                for (var _i = 0, _a = node.items; _i < _a.length; _i++) {\n                    var item = _a[_i];\n                    var itemValidationResult = new ValidationResult();\n                    validate(item, itemSchema, itemValidationResult, matchingSchemas);\n                    validationResult.mergePropertyMatch(itemValidationResult);\n                }\n            }\n        }\n        var containsSchema = asSchema(schema.contains);\n        if (containsSchema) {\n            var doesContain = node.items.some(function (item) {\n                var itemValidationResult = new ValidationResult();\n                validate(item, containsSchema, itemValidationResult, NoOpSchemaCollector.instance);\n                return !itemValidationResult.hasProblems();\n            });\n            if (!doesContain) {\n                validationResult.problems.push({\n                    location: { offset: node.offset, length: node.length },\n                    severity: DiagnosticSeverity.Warning,\n                    message: schema.errorMessage || localize('requiredItemMissingWarning', 'Array does not contain required item.')\n                });\n            }\n        }\n        if (isNumber(schema.minItems) && node.items.length < schema.minItems) {\n            validationResult.problems.push({\n                location: { offset: node.offset, length: node.length },\n                severity: DiagnosticSeverity.Warning,\n                message: localize('minItemsWarning', 'Array has too few items. Expected {0} or more.', schema.minItems)\n            });\n        }\n        if (isNumber(schema.maxItems) && node.items.length > schema.maxItems) {\n            validationResult.problems.push({\n                location: { offset: node.offset, length: node.length },\n                severity: DiagnosticSeverity.Warning,\n                message: localize('maxItemsWarning', 'Array has too many items. Expected {0} or fewer.', schema.maxItems)\n            });\n        }\n        if (schema.uniqueItems === true) {\n            var values_1 = getNodeValue(node);\n            var duplicates = values_1.some(function (value, index) {\n                return index !== values_1.lastIndexOf(value);\n            });\n            if (duplicates) {\n                validationResult.problems.push({\n                    location: { offset: node.offset, length: node.length },\n                    severity: DiagnosticSeverity.Warning,\n                    message: localize('uniqueItemsWarning', 'Array has duplicate items.')\n                });\n            }\n        }\n    }\n    function _validateObjectNode(node, schema, validationResult, matchingSchemas) {\n        var seenKeys = Object.create(null);\n        var unprocessedProperties = [];\n        for (var _i = 0, _a = node.properties; _i < _a.length; _i++) {\n            var propertyNode = _a[_i];\n            var key = propertyNode.keyNode.value;\n            seenKeys[key] = propertyNode.valueNode;\n            unprocessedProperties.push(key);\n        }\n        if (Array.isArray(schema.required)) {\n            for (var _b = 0, _c = schema.required; _b < _c.length; _b++) {\n                var propertyName = _c[_b];\n                if (!seenKeys[propertyName]) {\n                    var keyNode = node.parent && node.parent.type === 'property' && node.parent.keyNode;\n                    var location = keyNode ? { offset: keyNode.offset, length: keyNode.length } : { offset: node.offset, length: 1 };\n                    validationResult.problems.push({\n                        location: location,\n                        severity: DiagnosticSeverity.Warning,\n                        message: localize('MissingRequiredPropWarning', 'Missing property \"{0}\".', propertyName)\n                    });\n                }\n            }\n        }\n        var propertyProcessed = function (prop) {\n            var index = unprocessedProperties.indexOf(prop);\n            while (index >= 0) {\n                unprocessedProperties.splice(index, 1);\n                index = unprocessedProperties.indexOf(prop);\n            }\n        };\n        if (schema.properties) {\n            for (var _d = 0, _e = Object.keys(schema.properties); _d < _e.length; _d++) {\n                var propertyName = _e[_d];\n                propertyProcessed(propertyName);\n                var propertySchema = schema.properties[propertyName];\n                var child = seenKeys[propertyName];\n                if (child) {\n                    if (isBoolean(propertySchema)) {\n                        if (!propertySchema) {\n                            var propertyNode = child.parent;\n                            validationResult.problems.push({\n                                location: { offset: propertyNode.keyNode.offset, length: propertyNode.keyNode.length },\n                                severity: DiagnosticSeverity.Warning,\n                                message: schema.errorMessage || localize('DisallowedExtraPropWarning', 'Property {0} is not allowed.', propertyName)\n                            });\n                        }\n                        else {\n                            validationResult.propertiesMatches++;\n                            validationResult.propertiesValueMatches++;\n                        }\n                    }\n                    else {\n                        var propertyValidationResult = new ValidationResult();\n                        validate(child, propertySchema, propertyValidationResult, matchingSchemas);\n                        validationResult.mergePropertyMatch(propertyValidationResult);\n                    }\n                }\n            }\n        }\n        if (schema.patternProperties) {\n            for (var _f = 0, _g = Object.keys(schema.patternProperties); _f < _g.length; _f++) {\n                var propertyPattern = _g[_f];\n                var regex = new RegExp(propertyPattern);\n                for (var _h = 0, _j = unprocessedProperties.slice(0); _h < _j.length; _h++) {\n                    var propertyName = _j[_h];\n                    if (regex.test(propertyName)) {\n                        propertyProcessed(propertyName);\n                        var child = seenKeys[propertyName];\n                        if (child) {\n                            var propertySchema = schema.patternProperties[propertyPattern];\n                            if (isBoolean(propertySchema)) {\n                                if (!propertySchema) {\n                                    var propertyNode = child.parent;\n                                    validationResult.problems.push({\n                                        location: { offset: propertyNode.keyNode.offset, length: propertyNode.keyNode.length },\n                                        severity: DiagnosticSeverity.Warning,\n                                        message: schema.errorMessage || localize('DisallowedExtraPropWarning', 'Property {0} is not allowed.', propertyName)\n                                    });\n                                }\n                                else {\n                                    validationResult.propertiesMatches++;\n                                    validationResult.propertiesValueMatches++;\n                                }\n                            }\n                            else {\n                                var propertyValidationResult = new ValidationResult();\n                                validate(child, propertySchema, propertyValidationResult, matchingSchemas);\n                                validationResult.mergePropertyMatch(propertyValidationResult);\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        if (typeof schema.additionalProperties === 'object') {\n            for (var _k = 0, unprocessedProperties_1 = unprocessedProperties; _k < unprocessedProperties_1.length; _k++) {\n                var propertyName = unprocessedProperties_1[_k];\n                var child = seenKeys[propertyName];\n                if (child) {\n                    var propertyValidationResult = new ValidationResult();\n                    validate(child, schema.additionalProperties, propertyValidationResult, matchingSchemas);\n                    validationResult.mergePropertyMatch(propertyValidationResult);\n                }\n            }\n        }\n        else if (schema.additionalProperties === false) {\n            if (unprocessedProperties.length > 0) {\n                for (var _l = 0, unprocessedProperties_2 = unprocessedProperties; _l < unprocessedProperties_2.length; _l++) {\n                    var propertyName = unprocessedProperties_2[_l];\n                    var child = seenKeys[propertyName];\n                    if (child) {\n                        var propertyNode = child.parent;\n                        validationResult.problems.push({\n                            location: { offset: propertyNode.keyNode.offset, length: propertyNode.keyNode.length },\n                            severity: DiagnosticSeverity.Warning,\n                            message: schema.errorMessage || localize('DisallowedExtraPropWarning', 'Property {0} is not allowed.', propertyName)\n                        });\n                    }\n                }\n            }\n        }\n        if (isNumber(schema.maxProperties)) {\n            if (node.properties.length > schema.maxProperties) {\n                validationResult.problems.push({\n                    location: { offset: node.offset, length: node.length },\n                    severity: DiagnosticSeverity.Warning,\n                    message: localize('MaxPropWarning', 'Object has more properties than limit of {0}.', schema.maxProperties)\n                });\n            }\n        }\n        if (isNumber(schema.minProperties)) {\n            if (node.properties.length < schema.minProperties) {\n                validationResult.problems.push({\n                    location: { offset: node.offset, length: node.length },\n                    severity: DiagnosticSeverity.Warning,\n                    message: localize('MinPropWarning', 'Object has fewer properties than the required number of {0}', schema.minProperties)\n                });\n            }\n        }\n        if (schema.dependencies) {\n            for (var _m = 0, _o = Object.keys(schema.dependencies); _m < _o.length; _m++) {\n                var key = _o[_m];\n                var prop = seenKeys[key];\n                if (prop) {\n                    var propertyDep = schema.dependencies[key];\n                    if (Array.isArray(propertyDep)) {\n                        for (var _p = 0, propertyDep_1 = propertyDep; _p < propertyDep_1.length; _p++) {\n                            var requiredProp = propertyDep_1[_p];\n                            if (!seenKeys[requiredProp]) {\n                                validationResult.problems.push({\n                                    location: { offset: node.offset, length: node.length },\n                                    severity: DiagnosticSeverity.Warning,\n                                    message: localize('RequiredDependentPropWarning', 'Object is missing property {0} required by property {1}.', requiredProp, key)\n                                });\n                            }\n                            else {\n                                validationResult.propertiesValueMatches++;\n                            }\n                        }\n                    }\n                    else {\n                        var propertySchema = asSchema(propertyDep);\n                        if (propertySchema) {\n                            var propertyValidationResult = new ValidationResult();\n                            validate(node, propertySchema, propertyValidationResult, matchingSchemas);\n                            validationResult.mergePropertyMatch(propertyValidationResult);\n                        }\n                    }\n                }\n            }\n        }\n        var propertyNames = asSchema(schema.propertyNames);\n        if (propertyNames) {\n            for (var _q = 0, _r = node.properties; _q < _r.length; _q++) {\n                var f = _r[_q];\n                var key = f.keyNode;\n                if (key) {\n                    validate(key, propertyNames, validationResult, NoOpSchemaCollector.instance);\n                }\n            }\n        }\n    }\n}\nexport function parse(textDocument, config) {\n    var problems = [];\n    var lastProblemOffset = -1;\n    var text = textDocument.getText();\n    var scanner = Json.createScanner(text, false);\n    var commentRanges = config && config.collectComments ? [] : undefined;\n    function _scanNext() {\n        while (true) {\n            var token_1 = scanner.scan();\n            _checkScanError();\n            switch (token_1) {\n                case 12 /* LineCommentTrivia */:\n                case 13 /* BlockCommentTrivia */:\n                    if (Array.isArray(commentRanges)) {\n                        commentRanges.push(Range.create(textDocument.positionAt(scanner.getTokenOffset()), textDocument.positionAt(scanner.getTokenOffset() + scanner.getTokenLength())));\n                    }\n                    break;\n                case 15 /* Trivia */:\n                case 14 /* LineBreakTrivia */:\n                    break;\n                default:\n                    return token_1;\n            }\n        }\n    }\n    function _accept(token) {\n        if (scanner.getToken() === token) {\n            _scanNext();\n            return true;\n        }\n        return false;\n    }\n    function _errorAtRange(message, code, startOffset, endOffset, severity) {\n        if (severity === void 0) { severity = DiagnosticSeverity.Error; }\n        if (problems.length === 0 || startOffset !== lastProblemOffset) {\n            var range = Range.create(textDocument.positionAt(startOffset), textDocument.positionAt(endOffset));\n            problems.push(Diagnostic.create(range, message, severity, code, textDocument.languageId));\n            lastProblemOffset = startOffset;\n        }\n    }\n    function _error(message, code, node, skipUntilAfter, skipUntil) {\n        if (node === void 0) { node = undefined; }\n        if (skipUntilAfter === void 0) { skipUntilAfter = []; }\n        if (skipUntil === void 0) { skipUntil = []; }\n        var start = scanner.getTokenOffset();\n        var end = scanner.getTokenOffset() + scanner.getTokenLength();\n        if (start === end && start > 0) {\n            start--;\n            while (start > 0 && /\\s/.test(text.charAt(start))) {\n                start--;\n            }\n            end = start + 1;\n        }\n        _errorAtRange(message, code, start, end);\n        if (node) {\n            _finalize(node, false);\n        }\n        if (skipUntilAfter.length + skipUntil.length > 0) {\n            var token_2 = scanner.getToken();\n            while (token_2 !== 17 /* EOF */) {\n                if (skipUntilAfter.indexOf(token_2) !== -1) {\n                    _scanNext();\n                    break;\n                }\n                else if (skipUntil.indexOf(token_2) !== -1) {\n                    break;\n                }\n                token_2 = _scanNext();\n            }\n        }\n        return node;\n    }\n    function _checkScanError() {\n        switch (scanner.getTokenError()) {\n            case 4 /* InvalidUnicode */:\n                _error(localize('InvalidUnicode', 'Invalid unicode sequence in string.'), ErrorCode.InvalidUnicode);\n                return true;\n            case 5 /* InvalidEscapeCharacter */:\n                _error(localize('InvalidEscapeCharacter', 'Invalid escape character in string.'), ErrorCode.InvalidEscapeCharacter);\n                return true;\n            case 3 /* UnexpectedEndOfNumber */:\n                _error(localize('UnexpectedEndOfNumber', 'Unexpected end of number.'), ErrorCode.UnexpectedEndOfNumber);\n                return true;\n            case 1 /* UnexpectedEndOfComment */:\n                _error(localize('UnexpectedEndOfComment', 'Unexpected end of comment.'), ErrorCode.UnexpectedEndOfComment);\n                return true;\n            case 2 /* UnexpectedEndOfString */:\n                _error(localize('UnexpectedEndOfString', 'Unexpected end of string.'), ErrorCode.UnexpectedEndOfString);\n                return true;\n            case 6 /* InvalidCharacter */:\n                _error(localize('InvalidCharacter', 'Invalid characters in string. Control characters must be escaped.'), ErrorCode.InvalidCharacter);\n                return true;\n        }\n        return false;\n    }\n    function _finalize(node, scanNext) {\n        node.length = scanner.getTokenOffset() + scanner.getTokenLength() - node.offset;\n        if (scanNext) {\n            _scanNext();\n        }\n        return node;\n    }\n    function _parseArray(parent) {\n        if (scanner.getToken() !== 3 /* OpenBracketToken */) {\n            return undefined;\n        }\n        var node = new ArrayASTNodeImpl(parent, scanner.getTokenOffset());\n        _scanNext(); // consume OpenBracketToken\n        var count = 0;\n        var needsComma = false;\n        while (scanner.getToken() !== 4 /* CloseBracketToken */ && scanner.getToken() !== 17 /* EOF */) {\n            if (scanner.getToken() === 5 /* CommaToken */) {\n                if (!needsComma) {\n                    _error(localize('ValueExpected', 'Value expected'), ErrorCode.ValueExpected);\n                }\n                var commaOffset = scanner.getTokenOffset();\n                _scanNext(); // consume comma\n                if (scanner.getToken() === 4 /* CloseBracketToken */) {\n                    if (needsComma) {\n                        _errorAtRange(localize('TrailingComma', 'Trailing comma'), ErrorCode.TrailingComma, commaOffset, commaOffset + 1);\n                    }\n                    continue;\n                }\n            }\n            else if (needsComma) {\n                _error(localize('ExpectedComma', 'Expected comma'), ErrorCode.CommaExpected);\n            }\n            var item = _parseValue(node);\n            if (!item) {\n                _error(localize('PropertyExpected', 'Value expected'), ErrorCode.ValueExpected, undefined, [], [4 /* CloseBracketToken */, 5 /* CommaToken */]);\n            }\n            else {\n                node.items.push(item);\n            }\n            needsComma = true;\n        }\n        if (scanner.getToken() !== 4 /* CloseBracketToken */) {\n            return _error(localize('ExpectedCloseBracket', 'Expected comma or closing bracket'), ErrorCode.CommaOrCloseBacketExpected, node);\n        }\n        return _finalize(node, true);\n    }\n    var keyPlaceholder = new StringASTNodeImpl(undefined, 0, 0);\n    function _parseProperty(parent, keysSeen) {\n        var node = new PropertyASTNodeImpl(parent, scanner.getTokenOffset(), keyPlaceholder);\n        var key = _parseString(node);\n        if (!key) {\n            if (scanner.getToken() === 16 /* Unknown */) {\n                // give a more helpful error message\n                _error(localize('DoubleQuotesExpected', 'Property keys must be doublequoted'), ErrorCode.Undefined);\n                var keyNode = new StringASTNodeImpl(node, scanner.getTokenOffset(), scanner.getTokenLength());\n                keyNode.value = scanner.getTokenValue();\n                key = keyNode;\n                _scanNext(); // consume Unknown\n            }\n            else {\n                return undefined;\n            }\n        }\n        node.keyNode = key;\n        var seen = keysSeen[key.value];\n        if (seen) {\n            _errorAtRange(localize('DuplicateKeyWarning', \"Duplicate object key\"), ErrorCode.DuplicateKey, node.keyNode.offset, node.keyNode.offset + node.keyNode.length, DiagnosticSeverity.Warning);\n            if (typeof seen === 'object') {\n                _errorAtRange(localize('DuplicateKeyWarning', \"Duplicate object key\"), ErrorCode.DuplicateKey, seen.keyNode.offset, seen.keyNode.offset + seen.keyNode.length, DiagnosticSeverity.Warning);\n            }\n            keysSeen[key.value] = true; // if the same key is duplicate again, avoid duplicate error reporting\n        }\n        else {\n            keysSeen[key.value] = node;\n        }\n        if (scanner.getToken() === 6 /* ColonToken */) {\n            node.colonOffset = scanner.getTokenOffset();\n            _scanNext(); // consume ColonToken\n        }\n        else {\n            _error(localize('ColonExpected', 'Colon expected'), ErrorCode.ColonExpected);\n            if (scanner.getToken() === 10 /* StringLiteral */ && textDocument.positionAt(key.offset + key.length).line < textDocument.positionAt(scanner.getTokenOffset()).line) {\n                node.length = key.length;\n                return node;\n            }\n        }\n        var value = _parseValue(node);\n        if (!value) {\n            return _error(localize('ValueExpected', 'Value expected'), ErrorCode.ValueExpected, node, [], [2 /* CloseBraceToken */, 5 /* CommaToken */]);\n        }\n        node.valueNode = value;\n        node.length = value.offset + value.length - node.offset;\n        return node;\n    }\n    function _parseObject(parent) {\n        if (scanner.getToken() !== 1 /* OpenBraceToken */) {\n            return undefined;\n        }\n        var node = new ObjectASTNodeImpl(parent, scanner.getTokenOffset());\n        var keysSeen = Object.create(null);\n        _scanNext(); // consume OpenBraceToken\n        var needsComma = false;\n        while (scanner.getToken() !== 2 /* CloseBraceToken */ && scanner.getToken() !== 17 /* EOF */) {\n            if (scanner.getToken() === 5 /* CommaToken */) {\n                if (!needsComma) {\n                    _error(localize('PropertyExpected', 'Property expected'), ErrorCode.PropertyExpected);\n                }\n                var commaOffset = scanner.getTokenOffset();\n                _scanNext(); // consume comma\n                if (scanner.getToken() === 2 /* CloseBraceToken */) {\n                    if (needsComma) {\n                        _errorAtRange(localize('TrailingComma', 'Trailing comma'), ErrorCode.TrailingComma, commaOffset, commaOffset + 1);\n                    }\n                    continue;\n                }\n            }\n            else if (needsComma) {\n                _error(localize('ExpectedComma', 'Expected comma'), ErrorCode.CommaExpected);\n            }\n            var property = _parseProperty(node, keysSeen);\n            if (!property) {\n                _error(localize('PropertyExpected', 'Property expected'), ErrorCode.PropertyExpected, undefined, [], [2 /* CloseBraceToken */, 5 /* CommaToken */]);\n            }\n            else {\n                node.properties.push(property);\n            }\n            needsComma = true;\n        }\n        if (scanner.getToken() !== 2 /* CloseBraceToken */) {\n            return _error(localize('ExpectedCloseBrace', 'Expected comma or closing brace'), ErrorCode.CommaOrCloseBraceExpected, node);\n        }\n        return _finalize(node, true);\n    }\n    function _parseString(parent) {\n        if (scanner.getToken() !== 10 /* StringLiteral */) {\n            return undefined;\n        }\n        var node = new StringASTNodeImpl(parent, scanner.getTokenOffset());\n        node.value = scanner.getTokenValue();\n        return _finalize(node, true);\n    }\n    function _parseNumber(parent) {\n        if (scanner.getToken() !== 11 /* NumericLiteral */) {\n            return undefined;\n        }\n        var node = new NumberASTNodeImpl(parent, scanner.getTokenOffset());\n        if (scanner.getTokenError() === 0 /* None */) {\n            var tokenValue = scanner.getTokenValue();\n            try {\n                var numberValue = JSON.parse(tokenValue);\n                if (!isNumber(numberValue)) {\n                    return _error(localize('InvalidNumberFormat', 'Invalid number format.'), ErrorCode.Undefined, node);\n                }\n                node.value = numberValue;\n            }\n            catch (e) {\n                return _error(localize('InvalidNumberFormat', 'Invalid number format.'), ErrorCode.Undefined, node);\n            }\n            node.isInteger = tokenValue.indexOf('.') === -1;\n        }\n        return _finalize(node, true);\n    }\n    function _parseLiteral(parent) {\n        var node;\n        switch (scanner.getToken()) {\n            case 7 /* NullKeyword */:\n                return _finalize(new NullASTNodeImpl(parent, scanner.getTokenOffset()), true);\n            case 8 /* TrueKeyword */:\n                return _finalize(new BooleanASTNodeImpl(parent, true, scanner.getTokenOffset()), true);\n            case 9 /* FalseKeyword */:\n                return _finalize(new BooleanASTNodeImpl(parent, false, scanner.getTokenOffset()), true);\n            default:\n                return undefined;\n        }\n    }\n    function _parseValue(parent) {\n        return _parseArray(parent) || _parseObject(parent) || _parseString(parent) || _parseNumber(parent) || _parseLiteral(parent);\n    }\n    var _root = undefined;\n    var token = _scanNext();\n    if (token !== 17 /* EOF */) {\n        _root = _parseValue(_root);\n        if (!_root) {\n            _error(localize('Invalid symbol', 'Expected a JSON object, array or literal.'), ErrorCode.Undefined);\n        }\n        else if (scanner.getToken() !== 17 /* EOF */) {\n            _error(localize('End of file expected', 'End of file expected.'), ErrorCode.Undefined);\n        }\n    }\n    return new JSONDocument(_root, problems, commentRanges);\n}\n","/*---------------------------------------------------------------------------------------------\n*  Copyright (c) Microsoft Corporation. All rights reserved.\n*  Licensed under the MIT License. See License.txt in the project root for license information.\n*--------------------------------------------------------------------------------------------*/\nexport function stringifyObject(obj, indent, stringifyLiteral) {\n    if (obj !== null && typeof obj === 'object') {\n        var newIndent = indent + '\\t';\n        if (Array.isArray(obj)) {\n            if (obj.length === 0) {\n                return '[]';\n            }\n            var result = '[\\n';\n            for (var i = 0; i < obj.length; i++) {\n                result += newIndent + stringifyObject(obj[i], newIndent, stringifyLiteral);\n                if (i < obj.length - 1) {\n                    result += ',';\n                }\n                result += '\\n';\n            }\n            result += indent + ']';\n            return result;\n        }\n        else {\n            var keys = Object.keys(obj);\n            if (keys.length === 0) {\n                return '{}';\n            }\n            var result = '{\\n';\n            for (var i = 0; i < keys.length; i++) {\n                var key = keys[i];\n                result += newIndent + JSON.stringify(key) + ': ' + stringifyObject(obj[key], newIndent, stringifyLiteral);\n                if (i < keys.length - 1) {\n                    result += ',';\n                }\n                result += '\\n';\n            }\n            result += indent + '}';\n            return result;\n        }\n    }\n    return stringifyLiteral(obj);\n}\n","/*---------------------------------------------------------------------------------------------\n*  Copyright (c) Microsoft Corporation. All rights reserved.\n*  Licensed under the MIT License. See License.txt in the project root for license information.\n*--------------------------------------------------------------------------------------------*/\nexport function startsWith(haystack, needle) {\n    if (haystack.length < needle.length) {\n        return false;\n    }\n    for (var i = 0; i < needle.length; i++) {\n        if (haystack[i] !== needle[i]) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * Determines if haystack ends with needle.\n */\nexport function endsWith(haystack, needle) {\n    var diff = haystack.length - needle.length;\n    if (diff > 0) {\n        return haystack.lastIndexOf(needle) === diff;\n    }\n    else if (diff === 0) {\n        return haystack === needle;\n    }\n    else {\n        return false;\n    }\n}\nexport function convertSimple2RegExpPattern(pattern) {\n    return pattern.replace(/[\\-\\\\\\{\\}\\+\\?\\|\\^\\$\\.\\,\\[\\]\\(\\)\\#\\s]/g, '\\\\$&').replace(/[\\*]/g, '.*');\n}\nexport function repeat(value, count) {\n    var s = '';\n    while (count > 0) {\n        if ((count & 1) === 1) {\n            s += value;\n        }\n        value += value;\n        count = count >>> 1;\n    }\n    return s;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as Parser from '../parser/jsonParser.js';\nimport * as Json from '../../jsonc-parser/main.js';\nimport { stringifyObject } from '../utils/json.js';\nimport { endsWith } from '../utils/strings.js';\nimport { isDefined } from '../utils/objects.js';\nimport { CompletionItem, CompletionItemKind, Range, TextEdit, InsertTextFormat, MarkupKind } from '../jsonLanguageTypes.js';\nimport * as nls from '../../../fillers/vscode-nls.js';\nvar localize = nls.loadMessageBundle();\nvar valueCommitCharacters = [',', '}', ']'];\nvar propertyCommitCharacters = [':'];\nvar JSONCompletion = /** @class */ (function () {\n    function JSONCompletion(schemaService, contributions, promiseConstructor, clientCapabilities) {\n        if (contributions === void 0) { contributions = []; }\n        if (promiseConstructor === void 0) { promiseConstructor = Promise; }\n        if (clientCapabilities === void 0) { clientCapabilities = {}; }\n        this.schemaService = schemaService;\n        this.contributions = contributions;\n        this.promiseConstructor = promiseConstructor;\n        this.clientCapabilities = clientCapabilities;\n    }\n    JSONCompletion.prototype.doResolve = function (item) {\n        for (var i = this.contributions.length - 1; i >= 0; i--) {\n            var resolveCompletion = this.contributions[i].resolveCompletion;\n            if (resolveCompletion) {\n                var resolver = resolveCompletion(item);\n                if (resolver) {\n                    return resolver;\n                }\n            }\n        }\n        return this.promiseConstructor.resolve(item);\n    };\n    JSONCompletion.prototype.doComplete = function (document, position, doc) {\n        var _this = this;\n        var result = {\n            items: [],\n            isIncomplete: false\n        };\n        var text = document.getText();\n        var offset = document.offsetAt(position);\n        var node = doc.getNodeFromOffset(offset, true);\n        if (this.isInComment(document, node ? node.offset : 0, offset)) {\n            return Promise.resolve(result);\n        }\n        if (node && (offset === node.offset + node.length) && offset > 0) {\n            var ch = text[offset - 1];\n            if (node.type === 'object' && ch === '}' || node.type === 'array' && ch === ']') {\n                // after ] or }\n                node = node.parent;\n            }\n        }\n        var currentWord = this.getCurrentWord(document, offset);\n        var overwriteRange;\n        if (node && (node.type === 'string' || node.type === 'number' || node.type === 'boolean' || node.type === 'null')) {\n            overwriteRange = Range.create(document.positionAt(node.offset), document.positionAt(node.offset + node.length));\n        }\n        else {\n            var overwriteStart = offset - currentWord.length;\n            if (overwriteStart > 0 && text[overwriteStart - 1] === '\"') {\n                overwriteStart--;\n            }\n            overwriteRange = Range.create(document.positionAt(overwriteStart), position);\n        }\n        var supportsCommitCharacters = false; //this.doesSupportsCommitCharacters(); disabled for now, waiting for new API: https://github.com/microsoft/vscode/issues/42544\n        var proposed = {};\n        var collector = {\n            add: function (suggestion) {\n                var label = suggestion.label;\n                var existing = proposed[label];\n                if (!existing) {\n                    label = label.replace(/[\\n]/g, '');\n                    if (label.length > 60) {\n                        var shortendedLabel = label.substr(0, 57).trim() + '...';\n                        if (!proposed[shortendedLabel]) {\n                            label = shortendedLabel;\n                        }\n                    }\n                    if (overwriteRange && suggestion.insertText !== undefined) {\n                        suggestion.textEdit = TextEdit.replace(overwriteRange, suggestion.insertText);\n                    }\n                    if (supportsCommitCharacters) {\n                        suggestion.commitCharacters = suggestion.kind === CompletionItemKind.Property ? propertyCommitCharacters : valueCommitCharacters;\n                    }\n                    suggestion.label = label;\n                    proposed[label] = suggestion;\n                    result.items.push(suggestion);\n                }\n                else if (!existing.documentation) {\n                    existing.documentation = suggestion.documentation;\n                }\n            },\n            setAsIncomplete: function () {\n                result.isIncomplete = true;\n            },\n            error: function (message) {\n                console.error(message);\n            },\n            log: function (message) {\n                console.log(message);\n            },\n            getNumberOfProposals: function () {\n                return result.items.length;\n            }\n        };\n        return this.schemaService.getSchemaForResource(document.uri, doc).then(function (schema) {\n            var collectionPromises = [];\n            var addValue = true;\n            var currentKey = '';\n            var currentProperty = undefined;\n            if (node) {\n                if (node.type === 'string') {\n                    var parent = node.parent;\n                    if (parent && parent.type === 'property' && parent.keyNode === node) {\n                        addValue = !parent.valueNode;\n                        currentProperty = parent;\n                        currentKey = text.substr(node.offset + 1, node.length - 2);\n                        if (parent) {\n                            node = parent.parent;\n                        }\n                    }\n                }\n            }\n            // proposals for properties\n            if (node && node.type === 'object') {\n                // don't suggest keys when the cursor is just before the opening curly brace\n                if (node.offset === offset) {\n                    return result;\n                }\n                // don't suggest properties that are already present\n                var properties = node.properties;\n                properties.forEach(function (p) {\n                    if (!currentProperty || currentProperty !== p) {\n                        proposed[p.keyNode.value] = CompletionItem.create('__');\n                    }\n                });\n                var separatorAfter_1 = '';\n                if (addValue) {\n                    separatorAfter_1 = _this.evaluateSeparatorAfter(document, document.offsetAt(overwriteRange.end));\n                }\n                if (schema) {\n                    // property proposals with schema\n                    _this.getPropertyCompletions(schema, doc, node, addValue, separatorAfter_1, collector);\n                }\n                else {\n                    // property proposals without schema\n                    _this.getSchemaLessPropertyCompletions(doc, node, currentKey, collector);\n                }\n                var location_1 = Parser.getNodePath(node);\n                _this.contributions.forEach(function (contribution) {\n                    var collectPromise = contribution.collectPropertyCompletions(document.uri, location_1, currentWord, addValue, separatorAfter_1 === '', collector);\n                    if (collectPromise) {\n                        collectionPromises.push(collectPromise);\n                    }\n                });\n                if ((!schema && currentWord.length > 0 && text.charAt(offset - currentWord.length - 1) !== '\"')) {\n                    collector.add({\n                        kind: CompletionItemKind.Property,\n                        label: _this.getLabelForValue(currentWord),\n                        insertText: _this.getInsertTextForProperty(currentWord, undefined, false, separatorAfter_1),\n                        insertTextFormat: InsertTextFormat.Snippet, documentation: '',\n                    });\n                    collector.setAsIncomplete();\n                }\n            }\n            // proposals for values\n            var types = {};\n            if (schema) {\n                // value proposals with schema\n                _this.getValueCompletions(schema, doc, node, offset, document, collector, types);\n            }\n            else {\n                // value proposals without schema\n                _this.getSchemaLessValueCompletions(doc, node, offset, document, collector);\n            }\n            if (_this.contributions.length > 0) {\n                _this.getContributedValueCompletions(doc, node, offset, document, collector, collectionPromises);\n            }\n            return _this.promiseConstructor.all(collectionPromises).then(function () {\n                if (collector.getNumberOfProposals() === 0) {\n                    var offsetForSeparator = offset;\n                    if (node && (node.type === 'string' || node.type === 'number' || node.type === 'boolean' || node.type === 'null')) {\n                        offsetForSeparator = node.offset + node.length;\n                    }\n                    var separatorAfter = _this.evaluateSeparatorAfter(document, offsetForSeparator);\n                    _this.addFillerValueCompletions(types, separatorAfter, collector);\n                }\n                return result;\n            });\n        });\n    };\n    JSONCompletion.prototype.getPropertyCompletions = function (schema, doc, node, addValue, separatorAfter, collector) {\n        var _this = this;\n        var matchingSchemas = doc.getMatchingSchemas(schema.schema, node.offset);\n        matchingSchemas.forEach(function (s) {\n            if (s.node === node && !s.inverted) {\n                var schemaProperties_1 = s.schema.properties;\n                if (schemaProperties_1) {\n                    Object.keys(schemaProperties_1).forEach(function (key) {\n                        var propertySchema = schemaProperties_1[key];\n                        if (typeof propertySchema === 'object' && !propertySchema.deprecationMessage && !propertySchema.doNotSuggest) {\n                            var proposal = {\n                                kind: CompletionItemKind.Property,\n                                label: key,\n                                insertText: _this.getInsertTextForProperty(key, propertySchema, addValue, separatorAfter),\n                                insertTextFormat: InsertTextFormat.Snippet,\n                                filterText: _this.getFilterTextForValue(key),\n                                documentation: _this.fromMarkup(propertySchema.markdownDescription) || propertySchema.description || '',\n                            };\n                            if (propertySchema.suggestSortText !== undefined) {\n                                proposal.sortText = propertySchema.suggestSortText;\n                            }\n                            if (proposal.insertText && endsWith(proposal.insertText, \"$1\" + separatorAfter)) {\n                                proposal.command = {\n                                    title: 'Suggest',\n                                    command: 'editor.action.triggerSuggest'\n                                };\n                            }\n                            collector.add(proposal);\n                        }\n                    });\n                }\n                var schemaPropertyNames_1 = s.schema.propertyNames;\n                if (typeof schemaPropertyNames_1 === 'object' && !schemaPropertyNames_1.deprecationMessage && !schemaPropertyNames_1.doNotSuggest) {\n                    var propertyNameCompletionItem = function (name, enumDescription) {\n                        if (enumDescription === void 0) { enumDescription = undefined; }\n                        var proposal = {\n                            kind: CompletionItemKind.Property,\n                            label: name,\n                            insertText: _this.getInsertTextForProperty(name, undefined, addValue, separatorAfter),\n                            insertTextFormat: InsertTextFormat.Snippet,\n                            filterText: _this.getFilterTextForValue(name),\n                            documentation: enumDescription || _this.fromMarkup(schemaPropertyNames_1.markdownDescription) || schemaPropertyNames_1.description || '',\n                        };\n                        if (schemaPropertyNames_1.suggestSortText !== undefined) {\n                            proposal.sortText = schemaPropertyNames_1.suggestSortText;\n                        }\n                        if (proposal.insertText && endsWith(proposal.insertText, \"$1\" + separatorAfter)) {\n                            proposal.command = {\n                                title: 'Suggest',\n                                command: 'editor.action.triggerSuggest'\n                            };\n                        }\n                        collector.add(proposal);\n                    };\n                    if (schemaPropertyNames_1.enum) {\n                        for (var i = 0; i < schemaPropertyNames_1.enum.length; i++) {\n                            var enumDescription = undefined;\n                            if (schemaPropertyNames_1.markdownEnumDescriptions && i < schemaPropertyNames_1.markdownEnumDescriptions.length) {\n                                enumDescription = _this.fromMarkup(schemaPropertyNames_1.markdownEnumDescriptions[i]);\n                            }\n                            else if (schemaPropertyNames_1.enumDescriptions && i < schemaPropertyNames_1.enumDescriptions.length) {\n                                enumDescription = schemaPropertyNames_1.enumDescriptions[i];\n                            }\n                            propertyNameCompletionItem(schemaPropertyNames_1.enum[i], enumDescription);\n                        }\n                    }\n                    if (schemaPropertyNames_1.const) {\n                        propertyNameCompletionItem(schemaPropertyNames_1.const);\n                    }\n                }\n            }\n        });\n    };\n    JSONCompletion.prototype.getSchemaLessPropertyCompletions = function (doc, node, currentKey, collector) {\n        var _this = this;\n        var collectCompletionsForSimilarObject = function (obj) {\n            obj.properties.forEach(function (p) {\n                var key = p.keyNode.value;\n                collector.add({\n                    kind: CompletionItemKind.Property,\n                    label: key,\n                    insertText: _this.getInsertTextForValue(key, ''),\n                    insertTextFormat: InsertTextFormat.Snippet,\n                    filterText: _this.getFilterTextForValue(key),\n                    documentation: ''\n                });\n            });\n        };\n        if (node.parent) {\n            if (node.parent.type === 'property') {\n                // if the object is a property value, check the tree for other objects that hang under a property of the same name\n                var parentKey_1 = node.parent.keyNode.value;\n                doc.visit(function (n) {\n                    if (n.type === 'property' && n !== node.parent && n.keyNode.value === parentKey_1 && n.valueNode && n.valueNode.type === 'object') {\n                        collectCompletionsForSimilarObject(n.valueNode);\n                    }\n                    return true;\n                });\n            }\n            else if (node.parent.type === 'array') {\n                // if the object is in an array, use all other array elements as similar objects\n                node.parent.items.forEach(function (n) {\n                    if (n.type === 'object' && n !== node) {\n                        collectCompletionsForSimilarObject(n);\n                    }\n                });\n            }\n        }\n        else if (node.type === 'object') {\n            collector.add({\n                kind: CompletionItemKind.Property,\n                label: '$schema',\n                insertText: this.getInsertTextForProperty('$schema', undefined, true, ''),\n                insertTextFormat: InsertTextFormat.Snippet, documentation: '',\n                filterText: this.getFilterTextForValue(\"$schema\")\n            });\n        }\n    };\n    JSONCompletion.prototype.getSchemaLessValueCompletions = function (doc, node, offset, document, collector) {\n        var _this = this;\n        var offsetForSeparator = offset;\n        if (node && (node.type === 'string' || node.type === 'number' || node.type === 'boolean' || node.type === 'null')) {\n            offsetForSeparator = node.offset + node.length;\n            node = node.parent;\n        }\n        if (!node) {\n            collector.add({\n                kind: this.getSuggestionKind('object'),\n                label: 'Empty object',\n                insertText: this.getInsertTextForValue({}, ''),\n                insertTextFormat: InsertTextFormat.Snippet,\n                documentation: ''\n            });\n            collector.add({\n                kind: this.getSuggestionKind('array'),\n                label: 'Empty array',\n                insertText: this.getInsertTextForValue([], ''),\n                insertTextFormat: InsertTextFormat.Snippet,\n                documentation: ''\n            });\n            return;\n        }\n        var separatorAfter = this.evaluateSeparatorAfter(document, offsetForSeparator);\n        var collectSuggestionsForValues = function (value) {\n            if (value.parent && !Parser.contains(value.parent, offset, true)) {\n                collector.add({\n                    kind: _this.getSuggestionKind(value.type),\n                    label: _this.getLabelTextForMatchingNode(value, document),\n                    insertText: _this.getInsertTextForMatchingNode(value, document, separatorAfter),\n                    insertTextFormat: InsertTextFormat.Snippet, documentation: ''\n                });\n            }\n            if (value.type === 'boolean') {\n                _this.addBooleanValueCompletion(!value.value, separatorAfter, collector);\n            }\n        };\n        if (node.type === 'property') {\n            if (offset > (node.colonOffset || 0)) {\n                var valueNode = node.valueNode;\n                if (valueNode && (offset > (valueNode.offset + valueNode.length) || valueNode.type === 'object' || valueNode.type === 'array')) {\n                    return;\n                }\n                // suggest values at the same key\n                var parentKey_2 = node.keyNode.value;\n                doc.visit(function (n) {\n                    if (n.type === 'property' && n.keyNode.value === parentKey_2 && n.valueNode) {\n                        collectSuggestionsForValues(n.valueNode);\n                    }\n                    return true;\n                });\n                if (parentKey_2 === '$schema' && node.parent && !node.parent.parent) {\n                    this.addDollarSchemaCompletions(separatorAfter, collector);\n                }\n            }\n        }\n        if (node.type === 'array') {\n            if (node.parent && node.parent.type === 'property') {\n                // suggest items of an array at the same key\n                var parentKey_3 = node.parent.keyNode.value;\n                doc.visit(function (n) {\n                    if (n.type === 'property' && n.keyNode.value === parentKey_3 && n.valueNode && n.valueNode.type === 'array') {\n                        n.valueNode.items.forEach(collectSuggestionsForValues);\n                    }\n                    return true;\n                });\n            }\n            else {\n                // suggest items in the same array\n                node.items.forEach(collectSuggestionsForValues);\n            }\n        }\n    };\n    JSONCompletion.prototype.getValueCompletions = function (schema, doc, node, offset, document, collector, types) {\n        var offsetForSeparator = offset;\n        var parentKey = undefined;\n        var valueNode = undefined;\n        if (node && (node.type === 'string' || node.type === 'number' || node.type === 'boolean' || node.type === 'null')) {\n            offsetForSeparator = node.offset + node.length;\n            valueNode = node;\n            node = node.parent;\n        }\n        if (!node) {\n            this.addSchemaValueCompletions(schema.schema, '', collector, types);\n            return;\n        }\n        if ((node.type === 'property') && offset > (node.colonOffset || 0)) {\n            var valueNode_1 = node.valueNode;\n            if (valueNode_1 && offset > (valueNode_1.offset + valueNode_1.length)) {\n                return; // we are past the value node\n            }\n            parentKey = node.keyNode.value;\n            node = node.parent;\n        }\n        if (node && (parentKey !== undefined || node.type === 'array')) {\n            var separatorAfter = this.evaluateSeparatorAfter(document, offsetForSeparator);\n            var matchingSchemas = doc.getMatchingSchemas(schema.schema, node.offset, valueNode);\n            for (var _i = 0, matchingSchemas_1 = matchingSchemas; _i < matchingSchemas_1.length; _i++) {\n                var s = matchingSchemas_1[_i];\n                if (s.node === node && !s.inverted && s.schema) {\n                    if (node.type === 'array' && s.schema.items) {\n                        if (Array.isArray(s.schema.items)) {\n                            var index = this.findItemAtOffset(node, document, offset);\n                            if (index < s.schema.items.length) {\n                                this.addSchemaValueCompletions(s.schema.items[index], separatorAfter, collector, types);\n                            }\n                        }\n                        else {\n                            this.addSchemaValueCompletions(s.schema.items, separatorAfter, collector, types);\n                        }\n                    }\n                    if (parentKey !== undefined) {\n                        var propertyMatched = false;\n                        if (s.schema.properties) {\n                            var propertySchema = s.schema.properties[parentKey];\n                            if (propertySchema) {\n                                propertyMatched = true;\n                                this.addSchemaValueCompletions(propertySchema, separatorAfter, collector, types);\n                            }\n                        }\n                        if (s.schema.patternProperties && !propertyMatched) {\n                            for (var _a = 0, _b = Object.keys(s.schema.patternProperties); _a < _b.length; _a++) {\n                                var pattern = _b[_a];\n                                var regex = new RegExp(pattern);\n                                if (regex.test(parentKey)) {\n                                    propertyMatched = true;\n                                    var propertySchema = s.schema.patternProperties[pattern];\n                                    this.addSchemaValueCompletions(propertySchema, separatorAfter, collector, types);\n                                }\n                            }\n                        }\n                        if (s.schema.additionalProperties && !propertyMatched) {\n                            var propertySchema = s.schema.additionalProperties;\n                            this.addSchemaValueCompletions(propertySchema, separatorAfter, collector, types);\n                        }\n                    }\n                }\n            }\n            if (parentKey === '$schema' && !node.parent) {\n                this.addDollarSchemaCompletions(separatorAfter, collector);\n            }\n            if (types['boolean']) {\n                this.addBooleanValueCompletion(true, separatorAfter, collector);\n                this.addBooleanValueCompletion(false, separatorAfter, collector);\n            }\n            if (types['null']) {\n                this.addNullValueCompletion(separatorAfter, collector);\n            }\n        }\n    };\n    JSONCompletion.prototype.getContributedValueCompletions = function (doc, node, offset, document, collector, collectionPromises) {\n        if (!node) {\n            this.contributions.forEach(function (contribution) {\n                var collectPromise = contribution.collectDefaultCompletions(document.uri, collector);\n                if (collectPromise) {\n                    collectionPromises.push(collectPromise);\n                }\n            });\n        }\n        else {\n            if (node.type === 'string' || node.type === 'number' || node.type === 'boolean' || node.type === 'null') {\n                node = node.parent;\n            }\n            if (node && (node.type === 'property') && offset > (node.colonOffset || 0)) {\n                var parentKey_4 = node.keyNode.value;\n                var valueNode = node.valueNode;\n                if ((!valueNode || offset <= (valueNode.offset + valueNode.length)) && node.parent) {\n                    var location_2 = Parser.getNodePath(node.parent);\n                    this.contributions.forEach(function (contribution) {\n                        var collectPromise = contribution.collectValueCompletions(document.uri, location_2, parentKey_4, collector);\n                        if (collectPromise) {\n                            collectionPromises.push(collectPromise);\n                        }\n                    });\n                }\n            }\n        }\n    };\n    JSONCompletion.prototype.addSchemaValueCompletions = function (schema, separatorAfter, collector, types) {\n        var _this = this;\n        if (typeof schema === 'object') {\n            this.addEnumValueCompletions(schema, separatorAfter, collector);\n            this.addDefaultValueCompletions(schema, separatorAfter, collector);\n            this.collectTypes(schema, types);\n            if (Array.isArray(schema.allOf)) {\n                schema.allOf.forEach(function (s) { return _this.addSchemaValueCompletions(s, separatorAfter, collector, types); });\n            }\n            if (Array.isArray(schema.anyOf)) {\n                schema.anyOf.forEach(function (s) { return _this.addSchemaValueCompletions(s, separatorAfter, collector, types); });\n            }\n            if (Array.isArray(schema.oneOf)) {\n                schema.oneOf.forEach(function (s) { return _this.addSchemaValueCompletions(s, separatorAfter, collector, types); });\n            }\n        }\n    };\n    JSONCompletion.prototype.addDefaultValueCompletions = function (schema, separatorAfter, collector, arrayDepth) {\n        var _this = this;\n        if (arrayDepth === void 0) { arrayDepth = 0; }\n        var hasProposals = false;\n        if (isDefined(schema.default)) {\n            var type = schema.type;\n            var value = schema.default;\n            for (var i = arrayDepth; i > 0; i--) {\n                value = [value];\n                type = 'array';\n            }\n            collector.add({\n                kind: this.getSuggestionKind(type),\n                label: this.getLabelForValue(value),\n                insertText: this.getInsertTextForValue(value, separatorAfter),\n                insertTextFormat: InsertTextFormat.Snippet,\n                detail: localize('json.suggest.default', 'Default value')\n            });\n            hasProposals = true;\n        }\n        if (Array.isArray(schema.examples)) {\n            schema.examples.forEach(function (example) {\n                var type = schema.type;\n                var value = example;\n                for (var i = arrayDepth; i > 0; i--) {\n                    value = [value];\n                    type = 'array';\n                }\n                collector.add({\n                    kind: _this.getSuggestionKind(type),\n                    label: _this.getLabelForValue(value),\n                    insertText: _this.getInsertTextForValue(value, separatorAfter),\n                    insertTextFormat: InsertTextFormat.Snippet\n                });\n                hasProposals = true;\n            });\n        }\n        if (Array.isArray(schema.defaultSnippets)) {\n            schema.defaultSnippets.forEach(function (s) {\n                var type = schema.type;\n                var value = s.body;\n                var label = s.label;\n                var insertText;\n                var filterText;\n                if (isDefined(value)) {\n                    var type_1 = schema.type;\n                    for (var i = arrayDepth; i > 0; i--) {\n                        value = [value];\n                        type_1 = 'array';\n                    }\n                    insertText = _this.getInsertTextForSnippetValue(value, separatorAfter);\n                    filterText = _this.getFilterTextForSnippetValue(value);\n                    label = label || _this.getLabelForSnippetValue(value);\n                }\n                else if (typeof s.bodyText === 'string') {\n                    var prefix = '', suffix = '', indent = '';\n                    for (var i = arrayDepth; i > 0; i--) {\n                        prefix = prefix + indent + '[\\n';\n                        suffix = suffix + '\\n' + indent + ']';\n                        indent += '\\t';\n                        type = 'array';\n                    }\n                    insertText = prefix + indent + s.bodyText.split('\\n').join('\\n' + indent) + suffix + separatorAfter;\n                    label = label || insertText,\n                        filterText = insertText.replace(/[\\n]/g, ''); // remove new lines\n                }\n                else {\n                    return;\n                }\n                collector.add({\n                    kind: _this.getSuggestionKind(type),\n                    label: label,\n                    documentation: _this.fromMarkup(s.markdownDescription) || s.description,\n                    insertText: insertText,\n                    insertTextFormat: InsertTextFormat.Snippet,\n                    filterText: filterText\n                });\n                hasProposals = true;\n            });\n        }\n        if (!hasProposals && typeof schema.items === 'object' && !Array.isArray(schema.items) && arrayDepth < 5 /* beware of recursion */) {\n            this.addDefaultValueCompletions(schema.items, separatorAfter, collector, arrayDepth + 1);\n        }\n    };\n    JSONCompletion.prototype.addEnumValueCompletions = function (schema, separatorAfter, collector) {\n        if (isDefined(schema.const)) {\n            collector.add({\n                kind: this.getSuggestionKind(schema.type),\n                label: this.getLabelForValue(schema.const),\n                insertText: this.getInsertTextForValue(schema.const, separatorAfter),\n                insertTextFormat: InsertTextFormat.Snippet,\n                documentation: this.fromMarkup(schema.markdownDescription) || schema.description\n            });\n        }\n        if (Array.isArray(schema.enum)) {\n            for (var i = 0, length = schema.enum.length; i < length; i++) {\n                var enm = schema.enum[i];\n                var documentation = this.fromMarkup(schema.markdownDescription) || schema.description;\n                if (schema.markdownEnumDescriptions && i < schema.markdownEnumDescriptions.length && this.doesSupportMarkdown()) {\n                    documentation = this.fromMarkup(schema.markdownEnumDescriptions[i]);\n                }\n                else if (schema.enumDescriptions && i < schema.enumDescriptions.length) {\n                    documentation = schema.enumDescriptions[i];\n                }\n                collector.add({\n                    kind: this.getSuggestionKind(schema.type),\n                    label: this.getLabelForValue(enm),\n                    insertText: this.getInsertTextForValue(enm, separatorAfter),\n                    insertTextFormat: InsertTextFormat.Snippet,\n                    documentation: documentation\n                });\n            }\n        }\n    };\n    JSONCompletion.prototype.collectTypes = function (schema, types) {\n        if (Array.isArray(schema.enum) || isDefined(schema.const)) {\n            return;\n        }\n        var type = schema.type;\n        if (Array.isArray(type)) {\n            type.forEach(function (t) { return types[t] = true; });\n        }\n        else if (type) {\n            types[type] = true;\n        }\n    };\n    JSONCompletion.prototype.addFillerValueCompletions = function (types, separatorAfter, collector) {\n        if (types['object']) {\n            collector.add({\n                kind: this.getSuggestionKind('object'),\n                label: '{}',\n                insertText: this.getInsertTextForGuessedValue({}, separatorAfter),\n                insertTextFormat: InsertTextFormat.Snippet,\n                detail: localize('defaults.object', 'New object'),\n                documentation: ''\n            });\n        }\n        if (types['array']) {\n            collector.add({\n                kind: this.getSuggestionKind('array'),\n                label: '[]',\n                insertText: this.getInsertTextForGuessedValue([], separatorAfter),\n                insertTextFormat: InsertTextFormat.Snippet,\n                detail: localize('defaults.array', 'New array'),\n                documentation: ''\n            });\n        }\n    };\n    JSONCompletion.prototype.addBooleanValueCompletion = function (value, separatorAfter, collector) {\n        collector.add({\n            kind: this.getSuggestionKind('boolean'),\n            label: value ? 'true' : 'false',\n            insertText: this.getInsertTextForValue(value, separatorAfter),\n            insertTextFormat: InsertTextFormat.Snippet,\n            documentation: ''\n        });\n    };\n    JSONCompletion.prototype.addNullValueCompletion = function (separatorAfter, collector) {\n        collector.add({\n            kind: this.getSuggestionKind('null'),\n            label: 'null',\n            insertText: 'null' + separatorAfter,\n            insertTextFormat: InsertTextFormat.Snippet,\n            documentation: ''\n        });\n    };\n    JSONCompletion.prototype.addDollarSchemaCompletions = function (separatorAfter, collector) {\n        var _this = this;\n        var schemaIds = this.schemaService.getRegisteredSchemaIds(function (schema) { return schema === 'http' || schema === 'https'; });\n        schemaIds.forEach(function (schemaId) { return collector.add({\n            kind: CompletionItemKind.Module,\n            label: _this.getLabelForValue(schemaId),\n            filterText: _this.getFilterTextForValue(schemaId),\n            insertText: _this.getInsertTextForValue(schemaId, separatorAfter),\n            insertTextFormat: InsertTextFormat.Snippet, documentation: ''\n        }); });\n    };\n    JSONCompletion.prototype.getLabelForValue = function (value) {\n        return JSON.stringify(value);\n    };\n    JSONCompletion.prototype.getFilterTextForValue = function (value) {\n        return JSON.stringify(value);\n    };\n    JSONCompletion.prototype.getFilterTextForSnippetValue = function (value) {\n        return JSON.stringify(value).replace(/\\$\\{\\d+:([^}]+)\\}|\\$\\d+/g, '$1');\n    };\n    JSONCompletion.prototype.getLabelForSnippetValue = function (value) {\n        var label = JSON.stringify(value);\n        return label.replace(/\\$\\{\\d+:([^}]+)\\}|\\$\\d+/g, '$1');\n    };\n    JSONCompletion.prototype.getInsertTextForPlainText = function (text) {\n        return text.replace(/[\\\\\\$\\}]/g, '\\\\$&'); // escape $, \\ and } \n    };\n    JSONCompletion.prototype.getInsertTextForValue = function (value, separatorAfter) {\n        var text = JSON.stringify(value, null, '\\t');\n        if (text === '{}') {\n            return '{$1}' + separatorAfter;\n        }\n        else if (text === '[]') {\n            return '[$1]' + separatorAfter;\n        }\n        return this.getInsertTextForPlainText(text + separatorAfter);\n    };\n    JSONCompletion.prototype.getInsertTextForSnippetValue = function (value, separatorAfter) {\n        var replacer = function (value) {\n            if (typeof value === 'string') {\n                if (value[0] === '^') {\n                    return value.substr(1);\n                }\n            }\n            return JSON.stringify(value);\n        };\n        return stringifyObject(value, '', replacer) + separatorAfter;\n    };\n    JSONCompletion.prototype.getInsertTextForGuessedValue = function (value, separatorAfter) {\n        switch (typeof value) {\n            case 'object':\n                if (value === null) {\n                    return '${1:null}' + separatorAfter;\n                }\n                return this.getInsertTextForValue(value, separatorAfter);\n            case 'string':\n                var snippetValue = JSON.stringify(value);\n                snippetValue = snippetValue.substr(1, snippetValue.length - 2); // remove quotes\n                snippetValue = this.getInsertTextForPlainText(snippetValue); // escape \\ and }\n                return '\"${1:' + snippetValue + '}\"' + separatorAfter;\n            case 'number':\n            case 'boolean':\n                return '${1:' + JSON.stringify(value) + '}' + separatorAfter;\n        }\n        return this.getInsertTextForValue(value, separatorAfter);\n    };\n    JSONCompletion.prototype.getSuggestionKind = function (type) {\n        if (Array.isArray(type)) {\n            var array = type;\n            type = array.length > 0 ? array[0] : undefined;\n        }\n        if (!type) {\n            return CompletionItemKind.Value;\n        }\n        switch (type) {\n            case 'string': return CompletionItemKind.Value;\n            case 'object': return CompletionItemKind.Module;\n            case 'property': return CompletionItemKind.Property;\n            default: return CompletionItemKind.Value;\n        }\n    };\n    JSONCompletion.prototype.getLabelTextForMatchingNode = function (node, document) {\n        switch (node.type) {\n            case 'array':\n                return '[]';\n            case 'object':\n                return '{}';\n            default:\n                var content = document.getText().substr(node.offset, node.length);\n                return content;\n        }\n    };\n    JSONCompletion.prototype.getInsertTextForMatchingNode = function (node, document, separatorAfter) {\n        switch (node.type) {\n            case 'array':\n                return this.getInsertTextForValue([], separatorAfter);\n            case 'object':\n                return this.getInsertTextForValue({}, separatorAfter);\n            default:\n                var content = document.getText().substr(node.offset, node.length) + separatorAfter;\n                return this.getInsertTextForPlainText(content);\n        }\n    };\n    JSONCompletion.prototype.getInsertTextForProperty = function (key, propertySchema, addValue, separatorAfter) {\n        var propertyText = this.getInsertTextForValue(key, '');\n        if (!addValue) {\n            return propertyText;\n        }\n        var resultText = propertyText + ': ';\n        var value;\n        var nValueProposals = 0;\n        if (propertySchema) {\n            if (Array.isArray(propertySchema.defaultSnippets)) {\n                if (propertySchema.defaultSnippets.length === 1) {\n                    var body = propertySchema.defaultSnippets[0].body;\n                    if (isDefined(body)) {\n                        value = this.getInsertTextForSnippetValue(body, '');\n                    }\n                }\n                nValueProposals += propertySchema.defaultSnippets.length;\n            }\n            if (propertySchema.enum) {\n                if (!value && propertySchema.enum.length === 1) {\n                    value = this.getInsertTextForGuessedValue(propertySchema.enum[0], '');\n                }\n                nValueProposals += propertySchema.enum.length;\n            }\n            if (isDefined(propertySchema.default)) {\n                if (!value) {\n                    value = this.getInsertTextForGuessedValue(propertySchema.default, '');\n                }\n                nValueProposals++;\n            }\n            if (Array.isArray(propertySchema.examples) && propertySchema.examples.length) {\n                if (!value) {\n                    value = this.getInsertTextForGuessedValue(propertySchema.examples[0], '');\n                }\n                nValueProposals += propertySchema.examples.length;\n            }\n            if (nValueProposals === 0) {\n                var type = Array.isArray(propertySchema.type) ? propertySchema.type[0] : propertySchema.type;\n                if (!type) {\n                    if (propertySchema.properties) {\n                        type = 'object';\n                    }\n                    else if (propertySchema.items) {\n                        type = 'array';\n                    }\n                }\n                switch (type) {\n                    case 'boolean':\n                        value = '$1';\n                        break;\n                    case 'string':\n                        value = '\"$1\"';\n                        break;\n                    case 'object':\n                        value = '{$1}';\n                        break;\n                    case 'array':\n                        value = '[$1]';\n                        break;\n                    case 'number':\n                    case 'integer':\n                        value = '${1:0}';\n                        break;\n                    case 'null':\n                        value = '${1:null}';\n                        break;\n                    default:\n                        return propertyText;\n                }\n            }\n        }\n        if (!value || nValueProposals > 1) {\n            value = '$1';\n        }\n        return resultText + value + separatorAfter;\n    };\n    JSONCompletion.prototype.getCurrentWord = function (document, offset) {\n        var i = offset - 1;\n        var text = document.getText();\n        while (i >= 0 && ' \\t\\n\\r\\v\":{[,]}'.indexOf(text.charAt(i)) === -1) {\n            i--;\n        }\n        return text.substring(i + 1, offset);\n    };\n    JSONCompletion.prototype.evaluateSeparatorAfter = function (document, offset) {\n        var scanner = Json.createScanner(document.getText(), true);\n        scanner.setPosition(offset);\n        var token = scanner.scan();\n        switch (token) {\n            case 5 /* CommaToken */:\n            case 2 /* CloseBraceToken */:\n            case 4 /* CloseBracketToken */:\n            case 17 /* EOF */:\n                return '';\n            default:\n                return ',';\n        }\n    };\n    JSONCompletion.prototype.findItemAtOffset = function (node, document, offset) {\n        var scanner = Json.createScanner(document.getText(), true);\n        var children = node.items;\n        for (var i = children.length - 1; i >= 0; i--) {\n            var child = children[i];\n            if (offset > child.offset + child.length) {\n                scanner.setPosition(child.offset + child.length);\n                var token = scanner.scan();\n                if (token === 5 /* CommaToken */ && offset >= scanner.getTokenOffset() + scanner.getTokenLength()) {\n                    return i + 1;\n                }\n                return i;\n            }\n            else if (offset >= child.offset) {\n                return i;\n            }\n        }\n        return 0;\n    };\n    JSONCompletion.prototype.isInComment = function (document, start, offset) {\n        var scanner = Json.createScanner(document.getText(), false);\n        scanner.setPosition(start);\n        var token = scanner.scan();\n        while (token !== 17 /* EOF */ && (scanner.getTokenOffset() + scanner.getTokenLength() < offset)) {\n            token = scanner.scan();\n        }\n        return (token === 12 /* LineCommentTrivia */ || token === 13 /* BlockCommentTrivia */) && scanner.getTokenOffset() <= offset;\n    };\n    JSONCompletion.prototype.fromMarkup = function (markupString) {\n        if (markupString && this.doesSupportMarkdown()) {\n            return {\n                kind: MarkupKind.Markdown,\n                value: markupString\n            };\n        }\n        return undefined;\n    };\n    JSONCompletion.prototype.doesSupportMarkdown = function () {\n        if (!isDefined(this.supportsMarkdown)) {\n            var completion = this.clientCapabilities.textDocument && this.clientCapabilities.textDocument.completion;\n            this.supportsMarkdown = completion && completion.completionItem && Array.isArray(completion.completionItem.documentationFormat) && completion.completionItem.documentationFormat.indexOf(MarkupKind.Markdown) !== -1;\n        }\n        return this.supportsMarkdown;\n    };\n    JSONCompletion.prototype.doesSupportsCommitCharacters = function () {\n        if (!isDefined(this.supportsCommitCharacters)) {\n            var completion = this.clientCapabilities.textDocument && this.clientCapabilities.textDocument.completion;\n            this.supportsCommitCharacters = completion && completion.completionItem && !!completion.completionItem.commitCharactersSupport;\n        }\n        return this.supportsCommitCharacters;\n    };\n    return JSONCompletion;\n}());\nexport { JSONCompletion };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as Parser from '../parser/jsonParser.js';\nimport { Range } from '../jsonLanguageTypes.js';\nvar JSONHover = /** @class */ (function () {\n    function JSONHover(schemaService, contributions, promiseConstructor) {\n        if (contributions === void 0) { contributions = []; }\n        this.schemaService = schemaService;\n        this.contributions = contributions;\n        this.promise = promiseConstructor || Promise;\n    }\n    JSONHover.prototype.doHover = function (document, position, doc) {\n        var offset = document.offsetAt(position);\n        var node = doc.getNodeFromOffset(offset);\n        if (!node || (node.type === 'object' || node.type === 'array') && offset > node.offset + 1 && offset < node.offset + node.length - 1) {\n            return this.promise.resolve(null);\n        }\n        var hoverRangeNode = node;\n        // use the property description when hovering over an object key\n        if (node.type === 'string') {\n            var parent = node.parent;\n            if (parent && parent.type === 'property' && parent.keyNode === node) {\n                node = parent.valueNode;\n                if (!node) {\n                    return this.promise.resolve(null);\n                }\n            }\n        }\n        var hoverRange = Range.create(document.positionAt(hoverRangeNode.offset), document.positionAt(hoverRangeNode.offset + hoverRangeNode.length));\n        var createHover = function (contents) {\n            var result = {\n                contents: contents,\n                range: hoverRange\n            };\n            return result;\n        };\n        var location = Parser.getNodePath(node);\n        for (var i = this.contributions.length - 1; i >= 0; i--) {\n            var contribution = this.contributions[i];\n            var promise = contribution.getInfoContribution(document.uri, location);\n            if (promise) {\n                return promise.then(function (htmlContent) { return createHover(htmlContent); });\n            }\n        }\n        return this.schemaService.getSchemaForResource(document.uri, doc).then(function (schema) {\n            if (schema && node) {\n                var matchingSchemas = doc.getMatchingSchemas(schema.schema, node.offset);\n                var title_1 = undefined;\n                var markdownDescription_1 = undefined;\n                var markdownEnumValueDescription_1 = undefined, enumValue_1 = undefined;\n                matchingSchemas.every(function (s) {\n                    if (s.node === node && !s.inverted && s.schema) {\n                        title_1 = title_1 || s.schema.title;\n                        markdownDescription_1 = markdownDescription_1 || s.schema.markdownDescription || toMarkdown(s.schema.description);\n                        if (s.schema.enum) {\n                            var idx = s.schema.enum.indexOf(Parser.getNodeValue(node));\n                            if (s.schema.markdownEnumDescriptions) {\n                                markdownEnumValueDescription_1 = s.schema.markdownEnumDescriptions[idx];\n                            }\n                            else if (s.schema.enumDescriptions) {\n                                markdownEnumValueDescription_1 = toMarkdown(s.schema.enumDescriptions[idx]);\n                            }\n                            if (markdownEnumValueDescription_1) {\n                                enumValue_1 = s.schema.enum[idx];\n                                if (typeof enumValue_1 !== 'string') {\n                                    enumValue_1 = JSON.stringify(enumValue_1);\n                                }\n                            }\n                        }\n                    }\n                    return true;\n                });\n                var result = '';\n                if (title_1) {\n                    result = toMarkdown(title_1);\n                }\n                if (markdownDescription_1) {\n                    if (result.length > 0) {\n                        result += \"\\n\\n\";\n                    }\n                    result += markdownDescription_1;\n                }\n                if (markdownEnumValueDescription_1) {\n                    if (result.length > 0) {\n                        result += \"\\n\\n\";\n                    }\n                    result += \"`\" + toMarkdownCodeBlock(enumValue_1) + \"`: \" + markdownEnumValueDescription_1;\n                }\n                return createHover([result]);\n            }\n            return null;\n        });\n    };\n    return JSONHover;\n}());\nexport { JSONHover };\nfunction toMarkdown(plain) {\n    if (plain) {\n        var res = plain.replace(/([^\\n\\r])(\\r?\\n)([^\\n\\r])/gm, '$1\\n\\n$3'); // single new lines to \\n\\n (Markdown paragraph)\n        return res.replace(/[\\\\`*_{}[\\]()#+\\-.!]/g, \"\\\\$&\"); // escape markdown syntax tokens: http://daringfireball.net/projects/markdown/syntax#backslash\n    }\n    return undefined;\n}\nfunction toMarkdownCodeBlock(content) {\n    // see https://daringfireball.net/projects/markdown/syntax#precode\n    if (content.indexOf('`') !== -1) {\n        return '`` ' + content + ' ``';\n    }\n    return content;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar _a;\nvar isWindows;\nif (typeof process === 'object') {\n    isWindows = process.platform === 'win32';\n}\nelse if (typeof navigator === 'object') {\n    var userAgent = navigator.userAgent;\n    isWindows = userAgent.indexOf('Windows') >= 0;\n}\nfunction isHighSurrogate(charCode) {\n    return (0xD800 <= charCode && charCode <= 0xDBFF);\n}\nfunction isLowSurrogate(charCode) {\n    return (0xDC00 <= charCode && charCode <= 0xDFFF);\n}\nfunction isLowerAsciiHex(code) {\n    return code >= 97 /* a */ && code <= 102 /* f */;\n}\nfunction isLowerAsciiLetter(code) {\n    return code >= 97 /* a */ && code <= 122 /* z */;\n}\nfunction isUpperAsciiLetter(code) {\n    return code >= 65 /* A */ && code <= 90 /* Z */;\n}\nfunction isAsciiLetter(code) {\n    return isLowerAsciiLetter(code) || isUpperAsciiLetter(code);\n}\n//#endregion\nvar _schemePattern = /^\\w[\\w\\d+.-]*$/;\nvar _singleSlashStart = /^\\//;\nvar _doubleSlashStart = /^\\/\\//;\nfunction _validateUri(ret, _strict) {\n    // scheme, must be set\n    if (!ret.scheme && _strict) {\n        throw new Error(\"[UriError]: Scheme is missing: {scheme: \\\"\\\", authority: \\\"\" + ret.authority + \"\\\", path: \\\"\" + ret.path + \"\\\", query: \\\"\" + ret.query + \"\\\", fragment: \\\"\" + ret.fragment + \"\\\"}\");\n    }\n    // scheme, https://tools.ietf.org/html/rfc3986#section-3.1\n    // ALPHA *( ALPHA / DIGIT / \"+\" / \"-\" / \".\" )\n    if (ret.scheme && !_schemePattern.test(ret.scheme)) {\n        throw new Error('[UriError]: Scheme contains illegal characters.');\n    }\n    // path, http://tools.ietf.org/html/rfc3986#section-3.3\n    // If a URI contains an authority component, then the path component\n    // must either be empty or begin with a slash (\"/\") character.  If a URI\n    // does not contain an authority component, then the path cannot begin\n    // with two slash characters (\"//\").\n    if (ret.path) {\n        if (ret.authority) {\n            if (!_singleSlashStart.test(ret.path)) {\n                throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash (\"/\") character');\n            }\n        }\n        else {\n            if (_doubleSlashStart.test(ret.path)) {\n                throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters (\"//\")');\n            }\n        }\n    }\n}\n// for a while we allowed uris *without* schemes and this is the migration\n// for them, e.g. an uri without scheme and without strict-mode warns and falls\n// back to the file-scheme. that should cause the least carnage and still be a\n// clear warning\nfunction _schemeFix(scheme, _strict) {\n    if (!scheme && !_strict) {\n        return 'file';\n    }\n    return scheme;\n}\n// implements a bit of https://tools.ietf.org/html/rfc3986#section-5\nfunction _referenceResolution(scheme, path) {\n    // the slash-character is our 'default base' as we don't\n    // support constructing URIs relative to other URIs. This\n    // also means that we alter and potentially break paths.\n    // see https://tools.ietf.org/html/rfc3986#section-5.1.4\n    switch (scheme) {\n        case 'https':\n        case 'http':\n        case 'file':\n            if (!path) {\n                path = _slash;\n            }\n            else if (path[0] !== _slash) {\n                path = _slash + path;\n            }\n            break;\n    }\n    return path;\n}\nvar _empty = '';\nvar _slash = '/';\nvar _regexp = /^(([^:/?#]+?):)?(\\/\\/([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?/;\n/**\n * Uniform Resource Identifier (URI) http://tools.ietf.org/html/rfc3986.\n * This class is a simple parser which creates the basic component parts\n * (http://tools.ietf.org/html/rfc3986#section-3) with minimal validation\n * and encoding.\n *\n * ```txt\n *       foo://example.com:8042/over/there?name=ferret#nose\n *       \\_/   \\______________/\\_________/ \\_________/ \\__/\n *        |           |            |            |        |\n *     scheme     authority       path        query   fragment\n *        |   _____________________|__\n *       / \\ /                        \\\n *       urn:example:animal:ferret:nose\n * ```\n */\nvar URI = /** @class */ (function () {\n    /**\n     * @internal\n     */\n    function URI(schemeOrData, authority, path, query, fragment, _strict) {\n        if (_strict === void 0) { _strict = false; }\n        if (typeof schemeOrData === 'object') {\n            this.scheme = schemeOrData.scheme || _empty;\n            this.authority = schemeOrData.authority || _empty;\n            this.path = schemeOrData.path || _empty;\n            this.query = schemeOrData.query || _empty;\n            this.fragment = schemeOrData.fragment || _empty;\n            // no validation because it's this URI\n            // that creates uri components.\n            // _validateUri(this);\n        }\n        else {\n            this.scheme = _schemeFix(schemeOrData, _strict);\n            this.authority = authority || _empty;\n            this.path = _referenceResolution(this.scheme, path || _empty);\n            this.query = query || _empty;\n            this.fragment = fragment || _empty;\n            _validateUri(this, _strict);\n        }\n    }\n    URI.isUri = function (thing) {\n        if (thing instanceof URI) {\n            return true;\n        }\n        if (!thing) {\n            return false;\n        }\n        return typeof thing.authority === 'string'\n            && typeof thing.fragment === 'string'\n            && typeof thing.path === 'string'\n            && typeof thing.query === 'string'\n            && typeof thing.scheme === 'string'\n            && typeof thing.fsPath === 'function'\n            && typeof thing.with === 'function'\n            && typeof thing.toString === 'function';\n    };\n    Object.defineProperty(URI.prototype, \"fsPath\", {\n        // ---- filesystem path -----------------------\n        /**\n         * Returns a string representing the corresponding file system path of this URI.\n         * Will handle UNC paths, normalizes windows drive letters to lower-case, and uses the\n         * platform specific path separator.\n         *\n         * * Will *not* validate the path for invalid characters and semantics.\n         * * Will *not* look at the scheme of this URI.\n         * * The result shall *not* be used for display purposes but for accessing a file on disk.\n         *\n         *\n         * The *difference* to `URI#path` is the use of the platform specific separator and the handling\n         * of UNC paths. See the below sample of a file-uri with an authority (UNC path).\n         *\n         * ```ts\n            const u = URI.parse('file://server/c$/folder/file.txt')\n            u.authority === 'server'\n            u.path === '/shares/c$/file.txt'\n            u.fsPath === '\\\\server\\c$\\folder\\file.txt'\n        ```\n         *\n         * Using `URI#path` to read a file (using fs-apis) would not be enough because parts of the path,\n         * namely the server name, would be missing. Therefore `URI#fsPath` exists - it's sugar to ease working\n         * with URIs that represent files on disk (`file` scheme).\n         */\n        get: function () {\n            // if (this.scheme !== 'file') {\n            // \tconsole.warn(`[UriError] calling fsPath with scheme ${this.scheme}`);\n            // }\n            return uriToFsPath(this, false);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    // ---- modify to new -------------------------\n    URI.prototype.with = function (change) {\n        if (!change) {\n            return this;\n        }\n        var scheme = change.scheme, authority = change.authority, path = change.path, query = change.query, fragment = change.fragment;\n        if (scheme === undefined) {\n            scheme = this.scheme;\n        }\n        else if (scheme === null) {\n            scheme = _empty;\n        }\n        if (authority === undefined) {\n            authority = this.authority;\n        }\n        else if (authority === null) {\n            authority = _empty;\n        }\n        if (path === undefined) {\n            path = this.path;\n        }\n        else if (path === null) {\n            path = _empty;\n        }\n        if (query === undefined) {\n            query = this.query;\n        }\n        else if (query === null) {\n            query = _empty;\n        }\n        if (fragment === undefined) {\n            fragment = this.fragment;\n        }\n        else if (fragment === null) {\n            fragment = _empty;\n        }\n        if (scheme === this.scheme\n            && authority === this.authority\n            && path === this.path\n            && query === this.query\n            && fragment === this.fragment) {\n            return this;\n        }\n        return new _URI(scheme, authority, path, query, fragment);\n    };\n    // ---- parse & validate ------------------------\n    /**\n     * Creates a new URI from a string, e.g. `http://www.msft.com/some/path`,\n     * `file:///usr/home`, or `scheme:with/path`.\n     *\n     * @param value A string which represents an URI (see `URI#toString`).\n     */\n    URI.parse = function (value, _strict) {\n        if (_strict === void 0) { _strict = false; }\n        var match = _regexp.exec(value);\n        if (!match) {\n            return new _URI(_empty, _empty, _empty, _empty, _empty);\n        }\n        return new _URI(match[2] || _empty, percentDecode(match[4] || _empty), percentDecode(match[5] || _empty), percentDecode(match[7] || _empty), percentDecode(match[9] || _empty), _strict);\n    };\n    /**\n     * Creates a new URI from a file system path, e.g. `c:\\my\\files`,\n     * `/usr/home`, or `\\\\server\\share\\some\\path`.\n     *\n     * The *difference* between `URI#parse` and `URI#file` is that the latter treats the argument\n     * as path, not as stringified-uri. E.g. `URI.file(path)` is **not the same as**\n     * `URI.parse('file://' + path)` because the path might contain characters that are\n     * interpreted (# and ?). See the following sample:\n     * ```ts\n    const good = URI.file('/coding/c#/project1');\n    good.scheme === 'file';\n    good.path === '/coding/c#/project1';\n    good.fragment === '';\n    const bad = URI.parse('file://' + '/coding/c#/project1');\n    bad.scheme === 'file';\n    bad.path === '/coding/c'; // path is now broken\n    bad.fragment === '/project1';\n    ```\n     *\n     * @param path A file system path (see `URI#fsPath`)\n     */\n    URI.file = function (path) {\n        var authority = _empty;\n        // normalize to fwd-slashes on windows,\n        // on other systems bwd-slashes are valid\n        // filename character, eg /f\\oo/ba\\r.txt\n        if (isWindows) {\n            path = path.replace(/\\\\/g, _slash);\n        }\n        // check for authority as used in UNC shares\n        // or use the path as given\n        if (path[0] === _slash && path[1] === _slash) {\n            var idx = path.indexOf(_slash, 2);\n            if (idx === -1) {\n                authority = path.substring(2);\n                path = _slash;\n            }\n            else {\n                authority = path.substring(2, idx);\n                path = path.substring(idx) || _slash;\n            }\n        }\n        return new _URI('file', authority, path, _empty, _empty);\n    };\n    URI.from = function (components) {\n        return new _URI(components.scheme, components.authority, components.path, components.query, components.fragment);\n    };\n    // /**\n    //  * Join a URI path with path fragments and normalizes the resulting path.\n    //  *\n    //  * @param uri The input URI.\n    //  * @param pathFragment The path fragment to add to the URI path.\n    //  * @returns The resulting URI.\n    //  */\n    // static joinPath(uri: URI, ...pathFragment: string[]): URI {\n    // \tif (!uri.path) {\n    // \t\tthrow new Error(`[UriError]: cannot call joinPaths on URI without path`);\n    // \t}\n    // \tlet newPath: string;\n    // \tif (isWindows && uri.scheme === 'file') {\n    // \t\tnewPath = URI.file(paths.win32.join(uriToFsPath(uri, true), ...pathFragment)).path;\n    // \t} else {\n    // \t\tnewPath = paths.posix.join(uri.path, ...pathFragment);\n    // \t}\n    // \treturn uri.with({ path: newPath });\n    // }\n    // ---- printing/externalize ---------------------------\n    /**\n     * Creates a string representation for this URI. It's guaranteed that calling\n     * `URI.parse` with the result of this function creates an URI which is equal\n     * to this URI.\n     *\n     * * The result shall *not* be used for display purposes but for externalization or transport.\n     * * The result will be encoded using the percentage encoding and encoding happens mostly\n     * ignore the scheme-specific encoding rules.\n     *\n     * @param skipEncoding Do not encode the result, default is `false`\n     */\n    URI.prototype.toString = function (skipEncoding) {\n        if (skipEncoding === void 0) { skipEncoding = false; }\n        return _asFormatted(this, skipEncoding);\n    };\n    URI.prototype.toJSON = function () {\n        return this;\n    };\n    URI.revive = function (data) {\n        if (!data) {\n            return data;\n        }\n        else if (data instanceof URI) {\n            return data;\n        }\n        else {\n            var result = new _URI(data);\n            result._formatted = data.external;\n            result._fsPath = data._sep === _pathSepMarker ? data.fsPath : null;\n            return result;\n        }\n    };\n    return URI;\n}());\nexport { URI };\nvar _pathSepMarker = isWindows ? 1 : undefined;\n// eslint-disable-next-line @typescript-eslint/class-name-casing\nvar _URI = /** @class */ (function (_super) {\n    __extends(_URI, _super);\n    function _URI() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this._formatted = null;\n        _this._fsPath = null;\n        return _this;\n    }\n    Object.defineProperty(_URI.prototype, \"fsPath\", {\n        get: function () {\n            if (!this._fsPath) {\n                this._fsPath = uriToFsPath(this, false);\n            }\n            return this._fsPath;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    _URI.prototype.toString = function (skipEncoding) {\n        if (skipEncoding === void 0) { skipEncoding = false; }\n        if (!skipEncoding) {\n            if (!this._formatted) {\n                this._formatted = _asFormatted(this, false);\n            }\n            return this._formatted;\n        }\n        else {\n            // we don't cache that\n            return _asFormatted(this, true);\n        }\n    };\n    _URI.prototype.toJSON = function () {\n        var res = {\n            $mid: 1\n        };\n        // cached state\n        if (this._fsPath) {\n            res.fsPath = this._fsPath;\n            res._sep = _pathSepMarker;\n        }\n        if (this._formatted) {\n            res.external = this._formatted;\n        }\n        // uri components\n        if (this.path) {\n            res.path = this.path;\n        }\n        if (this.scheme) {\n            res.scheme = this.scheme;\n        }\n        if (this.authority) {\n            res.authority = this.authority;\n        }\n        if (this.query) {\n            res.query = this.query;\n        }\n        if (this.fragment) {\n            res.fragment = this.fragment;\n        }\n        return res;\n    };\n    return _URI;\n}(URI));\n// reserved characters: https://tools.ietf.org/html/rfc3986#section-2.2\nvar encodeTable = (_a = {},\n    _a[58 /* Colon */] = '%3A',\n    _a[47 /* Slash */] = '%2F',\n    _a[63 /* QuestionMark */] = '%3F',\n    _a[35 /* Hash */] = '%23',\n    _a[91 /* OpenSquareBracket */] = '%5B',\n    _a[93 /* CloseSquareBracket */] = '%5D',\n    _a[64 /* AtSign */] = '%40',\n    _a[33 /* ExclamationMark */] = '%21',\n    _a[36 /* DollarSign */] = '%24',\n    _a[38 /* Ampersand */] = '%26',\n    _a[39 /* SingleQuote */] = '%27',\n    _a[40 /* OpenParen */] = '%28',\n    _a[41 /* CloseParen */] = '%29',\n    _a[42 /* Asterisk */] = '%2A',\n    _a[43 /* Plus */] = '%2B',\n    _a[44 /* Comma */] = '%2C',\n    _a[59 /* Semicolon */] = '%3B',\n    _a[61 /* Equals */] = '%3D',\n    _a[32 /* Space */] = '%20',\n    _a);\nfunction encodeURIComponentFast(uriComponent, allowSlash) {\n    var res = undefined;\n    var nativeEncodePos = -1;\n    for (var pos = 0; pos < uriComponent.length; pos++) {\n        var code = uriComponent.charCodeAt(pos);\n        // unreserved characters: https://tools.ietf.org/html/rfc3986#section-2.3\n        if ((code >= 97 /* a */ && code <= 122 /* z */)\n            || (code >= 65 /* A */ && code <= 90 /* Z */)\n            || (code >= 48 /* Digit0 */ && code <= 57 /* Digit9 */)\n            || code === 45 /* Dash */\n            || code === 46 /* Period */\n            || code === 95 /* Underline */\n            || code === 126 /* Tilde */\n            || (allowSlash && code === 47 /* Slash */)) {\n            // check if we are delaying native encode\n            if (nativeEncodePos !== -1) {\n                res += encodeURIComponent(uriComponent.substring(nativeEncodePos, pos));\n                nativeEncodePos = -1;\n            }\n            // check if we write into a new string (by default we try to return the param)\n            if (res !== undefined) {\n                res += uriComponent.charAt(pos);\n            }\n        }\n        else {\n            // encoding needed, we need to allocate a new string\n            if (res === undefined) {\n                res = uriComponent.substr(0, pos);\n            }\n            // check with default table first\n            var escaped = encodeTable[code];\n            if (escaped !== undefined) {\n                // check if we are delaying native encode\n                if (nativeEncodePos !== -1) {\n                    res += encodeURIComponent(uriComponent.substring(nativeEncodePos, pos));\n                    nativeEncodePos = -1;\n                }\n                // append escaped variant to result\n                res += escaped;\n            }\n            else if (nativeEncodePos === -1) {\n                // use native encode only when needed\n                nativeEncodePos = pos;\n            }\n        }\n    }\n    if (nativeEncodePos !== -1) {\n        res += encodeURIComponent(uriComponent.substring(nativeEncodePos));\n    }\n    return res !== undefined ? res : uriComponent;\n}\nfunction encodeURIComponentMinimal(path) {\n    var res = undefined;\n    for (var pos = 0; pos < path.length; pos++) {\n        var code = path.charCodeAt(pos);\n        if (code === 35 /* Hash */ || code === 63 /* QuestionMark */) {\n            if (res === undefined) {\n                res = path.substr(0, pos);\n            }\n            res += encodeTable[code];\n        }\n        else {\n            if (res !== undefined) {\n                res += path[pos];\n            }\n        }\n    }\n    return res !== undefined ? res : path;\n}\n/**\n * Compute `fsPath` for the given uri\n */\nexport function uriToFsPath(uri, keepDriveLetterCasing) {\n    var value;\n    if (uri.authority && uri.path.length > 1 && uri.scheme === 'file') {\n        // unc path: file://shares/c$/far/boo\n        value = \"//\" + uri.authority + uri.path;\n    }\n    else if (uri.path.charCodeAt(0) === 47 /* Slash */\n        && (uri.path.charCodeAt(1) >= 65 /* A */ && uri.path.charCodeAt(1) <= 90 /* Z */ || uri.path.charCodeAt(1) >= 97 /* a */ && uri.path.charCodeAt(1) <= 122 /* z */)\n        && uri.path.charCodeAt(2) === 58 /* Colon */) {\n        if (!keepDriveLetterCasing) {\n            // windows drive letter: file:///c:/far/boo\n            value = uri.path[1].toLowerCase() + uri.path.substr(2);\n        }\n        else {\n            value = uri.path.substr(1);\n        }\n    }\n    else {\n        // other path\n        value = uri.path;\n    }\n    if (isWindows) {\n        value = value.replace(/\\//g, '\\\\');\n    }\n    return value;\n}\n/**\n * Create the external version of a uri\n */\nfunction _asFormatted(uri, skipEncoding) {\n    var encoder = !skipEncoding\n        ? encodeURIComponentFast\n        : encodeURIComponentMinimal;\n    var res = '';\n    var scheme = uri.scheme, authority = uri.authority, path = uri.path, query = uri.query, fragment = uri.fragment;\n    if (scheme) {\n        res += scheme;\n        res += ':';\n    }\n    if (authority || scheme === 'file') {\n        res += _slash;\n        res += _slash;\n    }\n    if (authority) {\n        var idx = authority.indexOf('@');\n        if (idx !== -1) {\n            // <user>@<auth>\n            var userinfo = authority.substr(0, idx);\n            authority = authority.substr(idx + 1);\n            idx = userinfo.indexOf(':');\n            if (idx === -1) {\n                res += encoder(userinfo, false);\n            }\n            else {\n                // <user>:<pass>@<auth>\n                res += encoder(userinfo.substr(0, idx), false);\n                res += ':';\n                res += encoder(userinfo.substr(idx + 1), false);\n            }\n            res += '@';\n        }\n        authority = authority.toLowerCase();\n        idx = authority.indexOf(':');\n        if (idx === -1) {\n            res += encoder(authority, false);\n        }\n        else {\n            // <auth>:<port>\n            res += encoder(authority.substr(0, idx), false);\n            res += authority.substr(idx);\n        }\n    }\n    if (path) {\n        // lower-case windows drive letters in /C:/fff or C:/fff\n        if (path.length >= 3 && path.charCodeAt(0) === 47 /* Slash */ && path.charCodeAt(2) === 58 /* Colon */) {\n            var code = path.charCodeAt(1);\n            if (code >= 65 /* A */ && code <= 90 /* Z */) {\n                path = \"/\" + String.fromCharCode(code + 32) + \":\" + path.substr(3); // \"/c:\".length === 3\n            }\n        }\n        else if (path.length >= 2 && path.charCodeAt(1) === 58 /* Colon */) {\n            var code = path.charCodeAt(0);\n            if (code >= 65 /* A */ && code <= 90 /* Z */) {\n                path = String.fromCharCode(code + 32) + \":\" + path.substr(2); // \"/c:\".length === 3\n            }\n        }\n        // encode the rest of the path\n        res += encoder(path, true);\n    }\n    if (query) {\n        res += '?';\n        res += encoder(query, false);\n    }\n    if (fragment) {\n        res += '#';\n        res += !skipEncoding ? encodeURIComponentFast(fragment, false) : fragment;\n    }\n    return res;\n}\n// --- decode\nfunction decodeURIComponentGraceful(str) {\n    try {\n        return decodeURIComponent(str);\n    }\n    catch (_a) {\n        if (str.length > 3) {\n            return str.substr(0, 3) + decodeURIComponentGraceful(str.substr(3));\n        }\n        else {\n            return str;\n        }\n    }\n}\nvar _rEncodedAsHex = /(%[0-9A-Za-z][0-9A-Za-z])+/g;\nfunction percentDecode(str) {\n    if (!str.match(_rEncodedAsHex)) {\n        return str;\n    }\n    return str.replace(_rEncodedAsHex, function (match) { return decodeURIComponentGraceful(match); });\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as Json from '../../jsonc-parser/main.js';\nimport { URI } from '../../vscode-uri/index.js';\nimport * as Strings from '../utils/strings.js';\nimport * as Parser from '../parser/jsonParser.js';\nimport * as nls from '../../../fillers/vscode-nls.js';\nvar localize = nls.loadMessageBundle();\nvar FilePatternAssociation = /** @class */ (function () {\n    function FilePatternAssociation(pattern, uris) {\n        this.patternRegExps = [];\n        this.isInclude = [];\n        try {\n            for (var _i = 0, pattern_1 = pattern; _i < pattern_1.length; _i++) {\n                var p = pattern_1[_i];\n                var include = p[0] !== '!';\n                if (!include) {\n                    p = p.substring(1);\n                }\n                this.patternRegExps.push(new RegExp(Strings.convertSimple2RegExpPattern(p) + '$'));\n                this.isInclude.push(include);\n            }\n            this.uris = uris;\n        }\n        catch (e) {\n            // invalid pattern\n            this.patternRegExps.length = 0;\n            this.isInclude.length = 0;\n            this.uris = [];\n        }\n    }\n    FilePatternAssociation.prototype.matchesPattern = function (fileName) {\n        var match = false;\n        for (var i = 0; i < this.patternRegExps.length; i++) {\n            var regExp = this.patternRegExps[i];\n            if (regExp.test(fileName)) {\n                match = this.isInclude[i];\n            }\n        }\n        return match;\n    };\n    FilePatternAssociation.prototype.getURIs = function () {\n        return this.uris;\n    };\n    return FilePatternAssociation;\n}());\nvar SchemaHandle = /** @class */ (function () {\n    function SchemaHandle(service, url, unresolvedSchemaContent) {\n        this.service = service;\n        this.url = url;\n        this.dependencies = {};\n        if (unresolvedSchemaContent) {\n            this.unresolvedSchema = this.service.promise.resolve(new UnresolvedSchema(unresolvedSchemaContent));\n        }\n    }\n    SchemaHandle.prototype.getUnresolvedSchema = function () {\n        if (!this.unresolvedSchema) {\n            this.unresolvedSchema = this.service.loadSchema(this.url);\n        }\n        return this.unresolvedSchema;\n    };\n    SchemaHandle.prototype.getResolvedSchema = function () {\n        var _this = this;\n        if (!this.resolvedSchema) {\n            this.resolvedSchema = this.getUnresolvedSchema().then(function (unresolved) {\n                return _this.service.resolveSchemaContent(unresolved, _this.url, _this.dependencies);\n            });\n        }\n        return this.resolvedSchema;\n    };\n    SchemaHandle.prototype.clearSchema = function () {\n        this.resolvedSchema = undefined;\n        this.unresolvedSchema = undefined;\n        this.dependencies = {};\n    };\n    return SchemaHandle;\n}());\nvar UnresolvedSchema = /** @class */ (function () {\n    function UnresolvedSchema(schema, errors) {\n        if (errors === void 0) { errors = []; }\n        this.schema = schema;\n        this.errors = errors;\n    }\n    return UnresolvedSchema;\n}());\nexport { UnresolvedSchema };\nvar ResolvedSchema = /** @class */ (function () {\n    function ResolvedSchema(schema, errors) {\n        if (errors === void 0) { errors = []; }\n        this.schema = schema;\n        this.errors = errors;\n    }\n    ResolvedSchema.prototype.getSection = function (path) {\n        var schemaRef = this.getSectionRecursive(path, this.schema);\n        if (schemaRef) {\n            return Parser.asSchema(schemaRef);\n        }\n        return undefined;\n    };\n    ResolvedSchema.prototype.getSectionRecursive = function (path, schema) {\n        if (!schema || typeof schema === 'boolean' || path.length === 0) {\n            return schema;\n        }\n        var next = path.shift();\n        if (schema.properties && typeof schema.properties[next]) {\n            return this.getSectionRecursive(path, schema.properties[next]);\n        }\n        else if (schema.patternProperties) {\n            for (var _i = 0, _a = Object.keys(schema.patternProperties); _i < _a.length; _i++) {\n                var pattern = _a[_i];\n                var regex = new RegExp(pattern);\n                if (regex.test(next)) {\n                    return this.getSectionRecursive(path, schema.patternProperties[pattern]);\n                }\n            }\n        }\n        else if (typeof schema.additionalProperties === 'object') {\n            return this.getSectionRecursive(path, schema.additionalProperties);\n        }\n        else if (next.match('[0-9]+')) {\n            if (Array.isArray(schema.items)) {\n                var index = parseInt(next, 10);\n                if (!isNaN(index) && schema.items[index]) {\n                    return this.getSectionRecursive(path, schema.items[index]);\n                }\n            }\n            else if (schema.items) {\n                return this.getSectionRecursive(path, schema.items);\n            }\n        }\n        return undefined;\n    };\n    return ResolvedSchema;\n}());\nexport { ResolvedSchema };\nvar JSONSchemaService = /** @class */ (function () {\n    function JSONSchemaService(requestService, contextService, promiseConstructor) {\n        this.contextService = contextService;\n        this.requestService = requestService;\n        this.promiseConstructor = promiseConstructor || Promise;\n        this.callOnDispose = [];\n        this.contributionSchemas = {};\n        this.contributionAssociations = [];\n        this.schemasById = {};\n        this.filePatternAssociations = [];\n        this.registeredSchemasIds = {};\n    }\n    JSONSchemaService.prototype.getRegisteredSchemaIds = function (filter) {\n        return Object.keys(this.registeredSchemasIds).filter(function (id) {\n            var scheme = URI.parse(id).scheme;\n            return scheme !== 'schemaservice' && (!filter || filter(scheme));\n        });\n    };\n    Object.defineProperty(JSONSchemaService.prototype, \"promise\", {\n        get: function () {\n            return this.promiseConstructor;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    JSONSchemaService.prototype.dispose = function () {\n        while (this.callOnDispose.length > 0) {\n            this.callOnDispose.pop()();\n        }\n    };\n    JSONSchemaService.prototype.onResourceChange = function (uri) {\n        var _this = this;\n        var hasChanges = false;\n        uri = normalizeId(uri);\n        var toWalk = [uri];\n        var all = Object.keys(this.schemasById).map(function (key) { return _this.schemasById[key]; });\n        while (toWalk.length) {\n            var curr = toWalk.pop();\n            for (var i = 0; i < all.length; i++) {\n                var handle = all[i];\n                if (handle && (handle.url === curr || handle.dependencies[curr])) {\n                    if (handle.url !== curr) {\n                        toWalk.push(handle.url);\n                    }\n                    handle.clearSchema();\n                    all[i] = undefined;\n                    hasChanges = true;\n                }\n            }\n        }\n        return hasChanges;\n    };\n    JSONSchemaService.prototype.setSchemaContributions = function (schemaContributions) {\n        if (schemaContributions.schemas) {\n            var schemas = schemaContributions.schemas;\n            for (var id in schemas) {\n                var normalizedId = normalizeId(id);\n                this.contributionSchemas[normalizedId] = this.addSchemaHandle(normalizedId, schemas[id]);\n            }\n        }\n        if (Array.isArray(schemaContributions.schemaAssociations)) {\n            var schemaAssociations = schemaContributions.schemaAssociations;\n            for (var _i = 0, schemaAssociations_1 = schemaAssociations; _i < schemaAssociations_1.length; _i++) {\n                var schemaAssociation = schemaAssociations_1[_i];\n                var uris = schemaAssociation.uris.map(normalizeId);\n                var association = this.addFilePatternAssociation(schemaAssociation.pattern, uris);\n                this.contributionAssociations.push(association);\n            }\n        }\n    };\n    JSONSchemaService.prototype.addSchemaHandle = function (id, unresolvedSchemaContent) {\n        var schemaHandle = new SchemaHandle(this, id, unresolvedSchemaContent);\n        this.schemasById[id] = schemaHandle;\n        return schemaHandle;\n    };\n    JSONSchemaService.prototype.getOrAddSchemaHandle = function (id, unresolvedSchemaContent) {\n        return this.schemasById[id] || this.addSchemaHandle(id, unresolvedSchemaContent);\n    };\n    JSONSchemaService.prototype.addFilePatternAssociation = function (pattern, uris) {\n        var fpa = new FilePatternAssociation(pattern, uris);\n        this.filePatternAssociations.push(fpa);\n        return fpa;\n    };\n    JSONSchemaService.prototype.registerExternalSchema = function (uri, filePatterns, unresolvedSchemaContent) {\n        var id = normalizeId(uri);\n        this.registeredSchemasIds[id] = true;\n        this.cachedSchemaForResource = undefined;\n        if (filePatterns) {\n            this.addFilePatternAssociation(filePatterns, [uri]);\n        }\n        return unresolvedSchemaContent ? this.addSchemaHandle(id, unresolvedSchemaContent) : this.getOrAddSchemaHandle(id);\n    };\n    JSONSchemaService.prototype.clearExternalSchemas = function () {\n        this.schemasById = {};\n        this.filePatternAssociations = [];\n        this.registeredSchemasIds = {};\n        this.cachedSchemaForResource = undefined;\n        for (var id in this.contributionSchemas) {\n            this.schemasById[id] = this.contributionSchemas[id];\n            this.registeredSchemasIds[id] = true;\n        }\n        for (var _i = 0, _a = this.contributionAssociations; _i < _a.length; _i++) {\n            var contributionAssociation = _a[_i];\n            this.filePatternAssociations.push(contributionAssociation);\n        }\n    };\n    JSONSchemaService.prototype.getResolvedSchema = function (schemaId) {\n        var id = normalizeId(schemaId);\n        var schemaHandle = this.schemasById[id];\n        if (schemaHandle) {\n            return schemaHandle.getResolvedSchema();\n        }\n        return this.promise.resolve(undefined);\n    };\n    JSONSchemaService.prototype.loadSchema = function (url) {\n        if (!this.requestService) {\n            var errorMessage = localize('json.schema.norequestservice', 'Unable to load schema from \\'{0}\\'. No schema request service available', toDisplayString(url));\n            return this.promise.resolve(new UnresolvedSchema({}, [errorMessage]));\n        }\n        return this.requestService(url).then(function (content) {\n            if (!content) {\n                var errorMessage = localize('json.schema.nocontent', 'Unable to load schema from \\'{0}\\': No content.', toDisplayString(url));\n                return new UnresolvedSchema({}, [errorMessage]);\n            }\n            var schemaContent = {};\n            var jsonErrors = [];\n            schemaContent = Json.parse(content, jsonErrors);\n            var errors = jsonErrors.length ? [localize('json.schema.invalidFormat', 'Unable to parse content from \\'{0}\\': Parse error at offset {1}.', toDisplayString(url), jsonErrors[0].offset)] : [];\n            return new UnresolvedSchema(schemaContent, errors);\n        }, function (error) {\n            var errorMessage = error.toString();\n            var errorSplit = error.toString().split('Error: ');\n            if (errorSplit.length > 1) {\n                // more concise error message, URL and context are attached by caller anyways\n                errorMessage = errorSplit[1];\n            }\n            if (Strings.endsWith(errorMessage, '.')) {\n                errorMessage = errorMessage.substr(0, errorMessage.length - 1);\n            }\n            return new UnresolvedSchema({}, [localize('json.schema.nocontent', 'Unable to load schema from \\'{0}\\': {1}.', toDisplayString(url), errorMessage)]);\n        });\n    };\n    JSONSchemaService.prototype.resolveSchemaContent = function (schemaToResolve, schemaURL, dependencies) {\n        var _this = this;\n        var resolveErrors = schemaToResolve.errors.slice(0);\n        var schema = schemaToResolve.schema;\n        if (schema.$schema) {\n            var id = normalizeId(schema.$schema);\n            if (id === 'http://json-schema.org/draft-03/schema') {\n                return this.promise.resolve(new ResolvedSchema({}, [localize('json.schema.draft03.notsupported', \"Draft-03 schemas are not supported.\")]));\n            }\n            else if (id === 'https://json-schema.org/draft/2019-09/schema') {\n                resolveErrors.push(localize('json.schema.draft201909.notsupported', \"Draft 2019-09 schemas are not yet fully supported.\"));\n            }\n        }\n        var contextService = this.contextService;\n        var findSection = function (schema, path) {\n            if (!path) {\n                return schema;\n            }\n            var current = schema;\n            if (path[0] === '/') {\n                path = path.substr(1);\n            }\n            path.split('/').some(function (part) {\n                current = current[part];\n                return !current;\n            });\n            return current;\n        };\n        var merge = function (target, sourceRoot, sourceURI, refSegment) {\n            var path = refSegment ? decodeURIComponent(refSegment) : undefined;\n            var section = findSection(sourceRoot, path);\n            if (section) {\n                for (var key in section) {\n                    if (section.hasOwnProperty(key) && !target.hasOwnProperty(key)) {\n                        target[key] = section[key];\n                    }\n                }\n            }\n            else {\n                resolveErrors.push(localize('json.schema.invalidref', '$ref \\'{0}\\' in \\'{1}\\' can not be resolved.', path, sourceURI));\n            }\n        };\n        var resolveExternalLink = function (node, uri, refSegment, parentSchemaURL, parentSchemaDependencies) {\n            if (contextService && !/^\\w+:\\/\\/.*/.test(uri)) {\n                uri = contextService.resolveRelativePath(uri, parentSchemaURL);\n            }\n            uri = normalizeId(uri);\n            var referencedHandle = _this.getOrAddSchemaHandle(uri);\n            return referencedHandle.getUnresolvedSchema().then(function (unresolvedSchema) {\n                parentSchemaDependencies[uri] = true;\n                if (unresolvedSchema.errors.length) {\n                    var loc = refSegment ? uri + '#' + refSegment : uri;\n                    resolveErrors.push(localize('json.schema.problemloadingref', 'Problems loading reference \\'{0}\\': {1}', loc, unresolvedSchema.errors[0]));\n                }\n                merge(node, unresolvedSchema.schema, uri, refSegment);\n                return resolveRefs(node, unresolvedSchema.schema, uri, referencedHandle.dependencies);\n            });\n        };\n        var resolveRefs = function (node, parentSchema, parentSchemaURL, parentSchemaDependencies) {\n            if (!node || typeof node !== 'object') {\n                return Promise.resolve(null);\n            }\n            var toWalk = [node];\n            var seen = [];\n            var openPromises = [];\n            var collectEntries = function () {\n                var entries = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    entries[_i] = arguments[_i];\n                }\n                for (var _a = 0, entries_1 = entries; _a < entries_1.length; _a++) {\n                    var entry = entries_1[_a];\n                    if (typeof entry === 'object') {\n                        toWalk.push(entry);\n                    }\n                }\n            };\n            var collectMapEntries = function () {\n                var maps = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    maps[_i] = arguments[_i];\n                }\n                for (var _a = 0, maps_1 = maps; _a < maps_1.length; _a++) {\n                    var map = maps_1[_a];\n                    if (typeof map === 'object') {\n                        for (var k in map) {\n                            var key = k;\n                            var entry = map[key];\n                            if (typeof entry === 'object') {\n                                toWalk.push(entry);\n                            }\n                        }\n                    }\n                }\n            };\n            var collectArrayEntries = function () {\n                var arrays = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    arrays[_i] = arguments[_i];\n                }\n                for (var _a = 0, arrays_1 = arrays; _a < arrays_1.length; _a++) {\n                    var array = arrays_1[_a];\n                    if (Array.isArray(array)) {\n                        for (var _b = 0, array_1 = array; _b < array_1.length; _b++) {\n                            var entry = array_1[_b];\n                            if (typeof entry === 'object') {\n                                toWalk.push(entry);\n                            }\n                        }\n                    }\n                }\n            };\n            var handleRef = function (next) {\n                var seenRefs = [];\n                while (next.$ref) {\n                    var ref = next.$ref;\n                    var segments = ref.split('#', 2);\n                    delete next.$ref;\n                    if (segments[0].length > 0) {\n                        openPromises.push(resolveExternalLink(next, segments[0], segments[1], parentSchemaURL, parentSchemaDependencies));\n                        return;\n                    }\n                    else {\n                        if (seenRefs.indexOf(ref) === -1) {\n                            merge(next, parentSchema, parentSchemaURL, segments[1]); // can set next.$ref again, use seenRefs to avoid circle\n                            seenRefs.push(ref);\n                        }\n                    }\n                }\n                collectEntries(next.items, next.additionalItems, next.additionalProperties, next.not, next.contains, next.propertyNames, next.if, next.then, next.else);\n                collectMapEntries(next.definitions, next.properties, next.patternProperties, next.dependencies);\n                collectArrayEntries(next.anyOf, next.allOf, next.oneOf, next.items);\n            };\n            while (toWalk.length) {\n                var next = toWalk.pop();\n                if (seen.indexOf(next) >= 0) {\n                    continue;\n                }\n                seen.push(next);\n                handleRef(next);\n            }\n            return _this.promise.all(openPromises);\n        };\n        return resolveRefs(schema, schema, schemaURL, dependencies).then(function (_) { return new ResolvedSchema(schema, resolveErrors); });\n    };\n    JSONSchemaService.prototype.getSchemaForResource = function (resource, document) {\n        // first use $schema if present\n        if (document && document.root && document.root.type === 'object') {\n            var schemaProperties = document.root.properties.filter(function (p) { return (p.keyNode.value === '$schema') && p.valueNode && p.valueNode.type === 'string'; });\n            if (schemaProperties.length > 0) {\n                var valueNode = schemaProperties[0].valueNode;\n                if (valueNode && valueNode.type === 'string') {\n                    var schemeId = Parser.getNodeValue(valueNode);\n                    if (schemeId && Strings.startsWith(schemeId, '.') && this.contextService) {\n                        schemeId = this.contextService.resolveRelativePath(schemeId, resource);\n                    }\n                    if (schemeId) {\n                        var id = normalizeId(schemeId);\n                        return this.getOrAddSchemaHandle(id).getResolvedSchema();\n                    }\n                }\n            }\n        }\n        if (this.cachedSchemaForResource && this.cachedSchemaForResource.resource === resource) {\n            return this.cachedSchemaForResource.resolvedSchema;\n        }\n        var seen = Object.create(null);\n        var schemas = [];\n        for (var _i = 0, _a = this.filePatternAssociations; _i < _a.length; _i++) {\n            var entry = _a[_i];\n            if (entry.matchesPattern(resource)) {\n                for (var _b = 0, _c = entry.getURIs(); _b < _c.length; _b++) {\n                    var schemaId = _c[_b];\n                    if (!seen[schemaId]) {\n                        schemas.push(schemaId);\n                        seen[schemaId] = true;\n                    }\n                }\n            }\n        }\n        var resolvedSchema = schemas.length > 0 ? this.createCombinedSchema(resource, schemas).getResolvedSchema() : this.promise.resolve(undefined);\n        this.cachedSchemaForResource = { resource: resource, resolvedSchema: resolvedSchema };\n        return resolvedSchema;\n    };\n    JSONSchemaService.prototype.createCombinedSchema = function (resource, schemaIds) {\n        if (schemaIds.length === 1) {\n            return this.getOrAddSchemaHandle(schemaIds[0]);\n        }\n        else {\n            var combinedSchemaId = 'schemaservice://combinedSchema/' + encodeURIComponent(resource);\n            var combinedSchema = {\n                allOf: schemaIds.map(function (schemaId) { return ({ $ref: schemaId }); })\n            };\n            return this.addSchemaHandle(combinedSchemaId, combinedSchema);\n        }\n    };\n    JSONSchemaService.prototype.getMatchingSchemas = function (document, jsonDocument, schema) {\n        if (schema) {\n            var id = schema.id || ('schemaservice://untitled/matchingSchemas/' + idCounter++);\n            return this.resolveSchemaContent(new UnresolvedSchema(schema), id, {}).then(function (resolvedSchema) {\n                return jsonDocument.getMatchingSchemas(resolvedSchema.schema).filter(function (s) { return !s.inverted; });\n            });\n        }\n        return this.getSchemaForResource(document.uri, jsonDocument).then(function (schema) {\n            if (schema) {\n                return jsonDocument.getMatchingSchemas(schema.schema).filter(function (s) { return !s.inverted; });\n            }\n            return [];\n        });\n    };\n    return JSONSchemaService;\n}());\nexport { JSONSchemaService };\nvar idCounter = 0;\nfunction normalizeId(id) {\n    // remove trailing '#', normalize drive capitalization\n    try {\n        return URI.parse(id).toString();\n    }\n    catch (e) {\n        return id;\n    }\n}\nfunction toDisplayString(url) {\n    try {\n        var uri = URI.parse(url);\n        if (uri.scheme === 'file') {\n            return uri.fsPath;\n        }\n    }\n    catch (e) {\n        // ignore\n    }\n    return url;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { UnresolvedSchema } from './jsonSchemaService.js';\nimport { ErrorCode, Diagnostic, DiagnosticSeverity, Range } from '../jsonLanguageTypes.js';\nimport * as nls from '../../../fillers/vscode-nls.js';\nimport { isBoolean } from '../utils/objects.js';\nvar localize = nls.loadMessageBundle();\nvar JSONValidation = /** @class */ (function () {\n    function JSONValidation(jsonSchemaService, promiseConstructor) {\n        this.jsonSchemaService = jsonSchemaService;\n        this.promise = promiseConstructor;\n        this.validationEnabled = true;\n    }\n    JSONValidation.prototype.configure = function (raw) {\n        if (raw) {\n            this.validationEnabled = raw.validate;\n            this.commentSeverity = raw.allowComments ? undefined : DiagnosticSeverity.Error;\n        }\n    };\n    JSONValidation.prototype.doValidation = function (textDocument, jsonDocument, documentSettings, schema) {\n        var _this = this;\n        if (!this.validationEnabled) {\n            return this.promise.resolve([]);\n        }\n        var diagnostics = [];\n        var added = {};\n        var addProblem = function (problem) {\n            // remove duplicated messages\n            var signature = problem.range.start.line + ' ' + problem.range.start.character + ' ' + problem.message;\n            if (!added[signature]) {\n                added[signature] = true;\n                diagnostics.push(problem);\n            }\n        };\n        var getDiagnostics = function (schema) {\n            var trailingCommaSeverity = documentSettings ? toDiagnosticSeverity(documentSettings.trailingCommas) : DiagnosticSeverity.Error;\n            var commentSeverity = documentSettings ? toDiagnosticSeverity(documentSettings.comments) : _this.commentSeverity;\n            if (schema) {\n                if (schema.errors.length && jsonDocument.root) {\n                    var astRoot = jsonDocument.root;\n                    var property = astRoot.type === 'object' ? astRoot.properties[0] : undefined;\n                    if (property && property.keyNode.value === '$schema') {\n                        var node = property.valueNode || property;\n                        var range = Range.create(textDocument.positionAt(node.offset), textDocument.positionAt(node.offset + node.length));\n                        addProblem(Diagnostic.create(range, schema.errors[0], DiagnosticSeverity.Warning, ErrorCode.SchemaResolveError));\n                    }\n                    else {\n                        var range = Range.create(textDocument.positionAt(astRoot.offset), textDocument.positionAt(astRoot.offset + 1));\n                        addProblem(Diagnostic.create(range, schema.errors[0], DiagnosticSeverity.Warning, ErrorCode.SchemaResolveError));\n                    }\n                }\n                else {\n                    var semanticErrors = jsonDocument.validate(textDocument, schema.schema);\n                    if (semanticErrors) {\n                        semanticErrors.forEach(addProblem);\n                    }\n                }\n                if (schemaAllowsComments(schema.schema)) {\n                    commentSeverity = undefined;\n                }\n                if (schemaAllowsTrailingCommas(schema.schema)) {\n                    trailingCommaSeverity = undefined;\n                }\n            }\n            for (var _i = 0, _a = jsonDocument.syntaxErrors; _i < _a.length; _i++) {\n                var p = _a[_i];\n                if (p.code === ErrorCode.TrailingComma) {\n                    if (typeof trailingCommaSeverity !== 'number') {\n                        continue;\n                    }\n                    p.severity = trailingCommaSeverity;\n                }\n                addProblem(p);\n            }\n            if (typeof commentSeverity === 'number') {\n                var message_1 = localize('InvalidCommentToken', 'Comments are not permitted in JSON.');\n                jsonDocument.comments.forEach(function (c) {\n                    addProblem(Diagnostic.create(c, message_1, commentSeverity, ErrorCode.CommentNotPermitted));\n                });\n            }\n            return diagnostics;\n        };\n        if (schema) {\n            var id = schema.id || ('schemaservice://untitled/' + idCounter++);\n            return this.jsonSchemaService.resolveSchemaContent(new UnresolvedSchema(schema), id, {}).then(function (resolvedSchema) {\n                return getDiagnostics(resolvedSchema);\n            });\n        }\n        return this.jsonSchemaService.getSchemaForResource(textDocument.uri, jsonDocument).then(function (schema) {\n            return getDiagnostics(schema);\n        });\n    };\n    return JSONValidation;\n}());\nexport { JSONValidation };\nvar idCounter = 0;\nfunction schemaAllowsComments(schemaRef) {\n    if (schemaRef && typeof schemaRef === 'object') {\n        if (isBoolean(schemaRef.allowComments)) {\n            return schemaRef.allowComments;\n        }\n        if (schemaRef.allOf) {\n            for (var _i = 0, _a = schemaRef.allOf; _i < _a.length; _i++) {\n                var schema = _a[_i];\n                var allow = schemaAllowsComments(schema);\n                if (isBoolean(allow)) {\n                    return allow;\n                }\n            }\n        }\n    }\n    return undefined;\n}\nfunction schemaAllowsTrailingCommas(schemaRef) {\n    if (schemaRef && typeof schemaRef === 'object') {\n        if (isBoolean(schemaRef.allowTrailingCommas)) {\n            return schemaRef.allowTrailingCommas;\n        }\n        var deprSchemaRef = schemaRef;\n        if (isBoolean(deprSchemaRef['allowsTrailingCommas'])) { // deprecated\n            return deprSchemaRef['allowsTrailingCommas'];\n        }\n        if (schemaRef.allOf) {\n            for (var _i = 0, _a = schemaRef.allOf; _i < _a.length; _i++) {\n                var schema = _a[_i];\n                var allow = schemaAllowsTrailingCommas(schema);\n                if (isBoolean(allow)) {\n                    return allow;\n                }\n            }\n        }\n    }\n    return undefined;\n}\nfunction toDiagnosticSeverity(severityLevel) {\n    switch (severityLevel) {\n        case 'error': return DiagnosticSeverity.Error;\n        case 'warning': return DiagnosticSeverity.Warning;\n        case 'ignore': return undefined;\n    }\n    return undefined;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar Digit0 = 48;\nvar Digit9 = 57;\nvar A = 65;\nvar a = 97;\nvar f = 102;\nexport function hexDigit(charCode) {\n    if (charCode < Digit0) {\n        return 0;\n    }\n    if (charCode <= Digit9) {\n        return charCode - Digit0;\n    }\n    if (charCode < a) {\n        charCode += (a - A);\n    }\n    if (charCode >= a && charCode <= f) {\n        return charCode - a + 10;\n    }\n    return 0;\n}\nexport function colorFromHex(text) {\n    if (text[0] !== '#') {\n        return undefined;\n    }\n    switch (text.length) {\n        case 4:\n            return {\n                red: (hexDigit(text.charCodeAt(1)) * 0x11) / 255.0,\n                green: (hexDigit(text.charCodeAt(2)) * 0x11) / 255.0,\n                blue: (hexDigit(text.charCodeAt(3)) * 0x11) / 255.0,\n                alpha: 1\n            };\n        case 5:\n            return {\n                red: (hexDigit(text.charCodeAt(1)) * 0x11) / 255.0,\n                green: (hexDigit(text.charCodeAt(2)) * 0x11) / 255.0,\n                blue: (hexDigit(text.charCodeAt(3)) * 0x11) / 255.0,\n                alpha: (hexDigit(text.charCodeAt(4)) * 0x11) / 255.0,\n            };\n        case 7:\n            return {\n                red: (hexDigit(text.charCodeAt(1)) * 0x10 + hexDigit(text.charCodeAt(2))) / 255.0,\n                green: (hexDigit(text.charCodeAt(3)) * 0x10 + hexDigit(text.charCodeAt(4))) / 255.0,\n                blue: (hexDigit(text.charCodeAt(5)) * 0x10 + hexDigit(text.charCodeAt(6))) / 255.0,\n                alpha: 1\n            };\n        case 9:\n            return {\n                red: (hexDigit(text.charCodeAt(1)) * 0x10 + hexDigit(text.charCodeAt(2))) / 255.0,\n                green: (hexDigit(text.charCodeAt(3)) * 0x10 + hexDigit(text.charCodeAt(4))) / 255.0,\n                blue: (hexDigit(text.charCodeAt(5)) * 0x10 + hexDigit(text.charCodeAt(6))) / 255.0,\n                alpha: (hexDigit(text.charCodeAt(7)) * 0x10 + hexDigit(text.charCodeAt(8))) / 255.0\n            };\n    }\n    return undefined;\n}\nexport function colorFrom256RGB(red, green, blue, alpha) {\n    if (alpha === void 0) { alpha = 1.0; }\n    return {\n        red: red / 255.0,\n        green: green / 255.0,\n        blue: blue / 255.0,\n        alpha: alpha\n    };\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as Parser from '../parser/jsonParser.js';\nimport * as Strings from '../utils/strings.js';\nimport { colorFromHex } from '../utils/colors.js';\nimport { Range, TextEdit, SymbolKind, Location } from \"../jsonLanguageTypes.js\";\nvar JSONDocumentSymbols = /** @class */ (function () {\n    function JSONDocumentSymbols(schemaService) {\n        this.schemaService = schemaService;\n    }\n    JSONDocumentSymbols.prototype.findDocumentSymbols = function (document, doc, context) {\n        var _this = this;\n        if (context === void 0) { context = { resultLimit: Number.MAX_VALUE }; }\n        var root = doc.root;\n        if (!root) {\n            return [];\n        }\n        var limit = context.resultLimit || Number.MAX_VALUE;\n        // special handling for key bindings\n        var resourceString = document.uri;\n        if ((resourceString === 'vscode://defaultsettings/keybindings.json') || Strings.endsWith(resourceString.toLowerCase(), '/user/keybindings.json')) {\n            if (root.type === 'array') {\n                var result_1 = [];\n                for (var _i = 0, _a = root.items; _i < _a.length; _i++) {\n                    var item = _a[_i];\n                    if (item.type === 'object') {\n                        for (var _b = 0, _c = item.properties; _b < _c.length; _b++) {\n                            var property = _c[_b];\n                            if (property.keyNode.value === 'key' && property.valueNode) {\n                                var location = Location.create(document.uri, getRange(document, item));\n                                result_1.push({ name: Parser.getNodeValue(property.valueNode), kind: SymbolKind.Function, location: location });\n                                limit--;\n                                if (limit <= 0) {\n                                    if (context && context.onResultLimitExceeded) {\n                                        context.onResultLimitExceeded(resourceString);\n                                    }\n                                    return result_1;\n                                }\n                            }\n                        }\n                    }\n                }\n                return result_1;\n            }\n        }\n        var toVisit = [\n            { node: root, containerName: '' }\n        ];\n        var nextToVisit = 0;\n        var limitExceeded = false;\n        var result = [];\n        var collectOutlineEntries = function (node, containerName) {\n            if (node.type === 'array') {\n                node.items.forEach(function (node) {\n                    if (node) {\n                        toVisit.push({ node: node, containerName: containerName });\n                    }\n                });\n            }\n            else if (node.type === 'object') {\n                node.properties.forEach(function (property) {\n                    var valueNode = property.valueNode;\n                    if (valueNode) {\n                        if (limit > 0) {\n                            limit--;\n                            var location = Location.create(document.uri, getRange(document, property));\n                            var childContainerName = containerName ? containerName + '.' + property.keyNode.value : property.keyNode.value;\n                            result.push({ name: _this.getKeyLabel(property), kind: _this.getSymbolKind(valueNode.type), location: location, containerName: containerName });\n                            toVisit.push({ node: valueNode, containerName: childContainerName });\n                        }\n                        else {\n                            limitExceeded = true;\n                        }\n                    }\n                });\n            }\n        };\n        // breath first traversal\n        while (nextToVisit < toVisit.length) {\n            var next = toVisit[nextToVisit++];\n            collectOutlineEntries(next.node, next.containerName);\n        }\n        if (limitExceeded && context && context.onResultLimitExceeded) {\n            context.onResultLimitExceeded(resourceString);\n        }\n        return result;\n    };\n    JSONDocumentSymbols.prototype.findDocumentSymbols2 = function (document, doc, context) {\n        var _this = this;\n        if (context === void 0) { context = { resultLimit: Number.MAX_VALUE }; }\n        var root = doc.root;\n        if (!root) {\n            return [];\n        }\n        var limit = context.resultLimit || Number.MAX_VALUE;\n        // special handling for key bindings\n        var resourceString = document.uri;\n        if ((resourceString === 'vscode://defaultsettings/keybindings.json') || Strings.endsWith(resourceString.toLowerCase(), '/user/keybindings.json')) {\n            if (root.type === 'array') {\n                var result_2 = [];\n                for (var _i = 0, _a = root.items; _i < _a.length; _i++) {\n                    var item = _a[_i];\n                    if (item.type === 'object') {\n                        for (var _b = 0, _c = item.properties; _b < _c.length; _b++) {\n                            var property = _c[_b];\n                            if (property.keyNode.value === 'key' && property.valueNode) {\n                                var range = getRange(document, item);\n                                var selectionRange = getRange(document, property.keyNode);\n                                result_2.push({ name: Parser.getNodeValue(property.valueNode), kind: SymbolKind.Function, range: range, selectionRange: selectionRange });\n                                limit--;\n                                if (limit <= 0) {\n                                    if (context && context.onResultLimitExceeded) {\n                                        context.onResultLimitExceeded(resourceString);\n                                    }\n                                    return result_2;\n                                }\n                            }\n                        }\n                    }\n                }\n                return result_2;\n            }\n        }\n        var result = [];\n        var toVisit = [\n            { node: root, result: result }\n        ];\n        var nextToVisit = 0;\n        var limitExceeded = false;\n        var collectOutlineEntries = function (node, result) {\n            if (node.type === 'array') {\n                node.items.forEach(function (node, index) {\n                    if (node) {\n                        if (limit > 0) {\n                            limit--;\n                            var range = getRange(document, node);\n                            var selectionRange = range;\n                            var name = String(index);\n                            var symbol = { name: name, kind: _this.getSymbolKind(node.type), range: range, selectionRange: selectionRange, children: [] };\n                            result.push(symbol);\n                            toVisit.push({ result: symbol.children, node: node });\n                        }\n                        else {\n                            limitExceeded = true;\n                        }\n                    }\n                });\n            }\n            else if (node.type === 'object') {\n                node.properties.forEach(function (property) {\n                    var valueNode = property.valueNode;\n                    if (valueNode) {\n                        if (limit > 0) {\n                            limit--;\n                            var range = getRange(document, property);\n                            var selectionRange = getRange(document, property.keyNode);\n                            var symbol = { name: _this.getKeyLabel(property), kind: _this.getSymbolKind(valueNode.type), range: range, selectionRange: selectionRange, children: [] };\n                            result.push(symbol);\n                            toVisit.push({ result: symbol.children, node: valueNode });\n                        }\n                        else {\n                            limitExceeded = true;\n                        }\n                    }\n                });\n            }\n        };\n        // breath first traversal\n        while (nextToVisit < toVisit.length) {\n            var next = toVisit[nextToVisit++];\n            collectOutlineEntries(next.node, next.result);\n        }\n        if (limitExceeded && context && context.onResultLimitExceeded) {\n            context.onResultLimitExceeded(resourceString);\n        }\n        return result;\n    };\n    JSONDocumentSymbols.prototype.getSymbolKind = function (nodeType) {\n        switch (nodeType) {\n            case 'object':\n                return SymbolKind.Module;\n            case 'string':\n                return SymbolKind.String;\n            case 'number':\n                return SymbolKind.Number;\n            case 'array':\n                return SymbolKind.Array;\n            case 'boolean':\n                return SymbolKind.Boolean;\n            default: // 'null'\n                return SymbolKind.Variable;\n        }\n    };\n    JSONDocumentSymbols.prototype.getKeyLabel = function (property) {\n        var name = property.keyNode.value;\n        if (name) {\n            name = name.replace(/[\\n]/g, '');\n        }\n        if (name && name.trim()) {\n            return name;\n        }\n        return \"\\\"\" + name + \"\\\"\";\n    };\n    JSONDocumentSymbols.prototype.findDocumentColors = function (document, doc, context) {\n        return this.schemaService.getSchemaForResource(document.uri, doc).then(function (schema) {\n            var result = [];\n            if (schema) {\n                var limit = context && typeof context.resultLimit === 'number' ? context.resultLimit : Number.MAX_VALUE;\n                var matchingSchemas = doc.getMatchingSchemas(schema.schema);\n                var visitedNode = {};\n                for (var _i = 0, matchingSchemas_1 = matchingSchemas; _i < matchingSchemas_1.length; _i++) {\n                    var s = matchingSchemas_1[_i];\n                    if (!s.inverted && s.schema && (s.schema.format === 'color' || s.schema.format === 'color-hex') && s.node && s.node.type === 'string') {\n                        var nodeId = String(s.node.offset);\n                        if (!visitedNode[nodeId]) {\n                            var color = colorFromHex(Parser.getNodeValue(s.node));\n                            if (color) {\n                                var range = getRange(document, s.node);\n                                result.push({ color: color, range: range });\n                            }\n                            visitedNode[nodeId] = true;\n                            limit--;\n                            if (limit <= 0) {\n                                if (context && context.onResultLimitExceeded) {\n                                    context.onResultLimitExceeded(document.uri);\n                                }\n                                return result;\n                            }\n                        }\n                    }\n                }\n            }\n            return result;\n        });\n    };\n    JSONDocumentSymbols.prototype.getColorPresentations = function (document, doc, color, range) {\n        var result = [];\n        var red256 = Math.round(color.red * 255), green256 = Math.round(color.green * 255), blue256 = Math.round(color.blue * 255);\n        function toTwoDigitHex(n) {\n            var r = n.toString(16);\n            return r.length !== 2 ? '0' + r : r;\n        }\n        var label;\n        if (color.alpha === 1) {\n            label = \"#\" + toTwoDigitHex(red256) + toTwoDigitHex(green256) + toTwoDigitHex(blue256);\n        }\n        else {\n            label = \"#\" + toTwoDigitHex(red256) + toTwoDigitHex(green256) + toTwoDigitHex(blue256) + toTwoDigitHex(Math.round(color.alpha * 255));\n        }\n        result.push({ label: label, textEdit: TextEdit.replace(range, JSON.stringify(label)) });\n        return result;\n    };\n    return JSONDocumentSymbols;\n}());\nexport { JSONDocumentSymbols };\nfunction getRange(document, node) {\n    return Range.create(document.positionAt(node.offset), document.positionAt(node.offset + node.length));\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as nls from '../../../fillers/vscode-nls.js';\nvar localize = nls.loadMessageBundle();\nexport var schemaContributions = {\n    schemaAssociations: [],\n    schemas: {\n        // refer to the latest schema\n        'http://json-schema.org/schema#': {\n            $ref: 'http://json-schema.org/draft-07/schema#'\n        },\n        // bundle the schema-schema to include (localized) descriptions\n        'http://json-schema.org/draft-04/schema#': {\n            'title': localize('schema.json', 'Describes a JSON file using a schema. See json-schema.org for more info.'),\n            '$schema': 'http://json-schema.org/draft-04/schema#',\n            'definitions': {\n                'schemaArray': {\n                    'type': 'array',\n                    'minItems': 1,\n                    'items': {\n                        '$ref': '#'\n                    }\n                },\n                'positiveInteger': {\n                    'type': 'integer',\n                    'minimum': 0\n                },\n                'positiveIntegerDefault0': {\n                    'allOf': [\n                        {\n                            '$ref': '#/definitions/positiveInteger'\n                        },\n                        {\n                            'default': 0\n                        }\n                    ]\n                },\n                'simpleTypes': {\n                    'type': 'string',\n                    'enum': [\n                        'array',\n                        'boolean',\n                        'integer',\n                        'null',\n                        'number',\n                        'object',\n                        'string'\n                    ]\n                },\n                'stringArray': {\n                    'type': 'array',\n                    'items': {\n                        'type': 'string'\n                    },\n                    'minItems': 1,\n                    'uniqueItems': true\n                }\n            },\n            'type': 'object',\n            'properties': {\n                'id': {\n                    'type': 'string',\n                    'format': 'uri'\n                },\n                '$schema': {\n                    'type': 'string',\n                    'format': 'uri'\n                },\n                'title': {\n                    'type': 'string'\n                },\n                'description': {\n                    'type': 'string'\n                },\n                'default': {},\n                'multipleOf': {\n                    'type': 'number',\n                    'minimum': 0,\n                    'exclusiveMinimum': true\n                },\n                'maximum': {\n                    'type': 'number'\n                },\n                'exclusiveMaximum': {\n                    'type': 'boolean',\n                    'default': false\n                },\n                'minimum': {\n                    'type': 'number'\n                },\n                'exclusiveMinimum': {\n                    'type': 'boolean',\n                    'default': false\n                },\n                'maxLength': {\n                    'allOf': [\n                        {\n                            '$ref': '#/definitions/positiveInteger'\n                        }\n                    ]\n                },\n                'minLength': {\n                    'allOf': [\n                        {\n                            '$ref': '#/definitions/positiveIntegerDefault0'\n                        }\n                    ]\n                },\n                'pattern': {\n                    'type': 'string',\n                    'format': 'regex'\n                },\n                'additionalItems': {\n                    'anyOf': [\n                        {\n                            'type': 'boolean'\n                        },\n                        {\n                            '$ref': '#'\n                        }\n                    ],\n                    'default': {}\n                },\n                'items': {\n                    'anyOf': [\n                        {\n                            '$ref': '#'\n                        },\n                        {\n                            '$ref': '#/definitions/schemaArray'\n                        }\n                    ],\n                    'default': {}\n                },\n                'maxItems': {\n                    'allOf': [\n                        {\n                            '$ref': '#/definitions/positiveInteger'\n                        }\n                    ]\n                },\n                'minItems': {\n                    'allOf': [\n                        {\n                            '$ref': '#/definitions/positiveIntegerDefault0'\n                        }\n                    ]\n                },\n                'uniqueItems': {\n                    'type': 'boolean',\n                    'default': false\n                },\n                'maxProperties': {\n                    'allOf': [\n                        {\n                            '$ref': '#/definitions/positiveInteger'\n                        }\n                    ]\n                },\n                'minProperties': {\n                    'allOf': [\n                        {\n                            '$ref': '#/definitions/positiveIntegerDefault0'\n                        }\n                    ]\n                },\n                'required': {\n                    'allOf': [\n                        {\n                            '$ref': '#/definitions/stringArray'\n                        }\n                    ]\n                },\n                'additionalProperties': {\n                    'anyOf': [\n                        {\n                            'type': 'boolean'\n                        },\n                        {\n                            '$ref': '#'\n                        }\n                    ],\n                    'default': {}\n                },\n                'definitions': {\n                    'type': 'object',\n                    'additionalProperties': {\n                        '$ref': '#'\n                    },\n                    'default': {}\n                },\n                'properties': {\n                    'type': 'object',\n                    'additionalProperties': {\n                        '$ref': '#'\n                    },\n                    'default': {}\n                },\n                'patternProperties': {\n                    'type': 'object',\n                    'additionalProperties': {\n                        '$ref': '#'\n                    },\n                    'default': {}\n                },\n                'dependencies': {\n                    'type': 'object',\n                    'additionalProperties': {\n                        'anyOf': [\n                            {\n                                '$ref': '#'\n                            },\n                            {\n                                '$ref': '#/definitions/stringArray'\n                            }\n                        ]\n                    }\n                },\n                'enum': {\n                    'type': 'array',\n                    'minItems': 1,\n                    'uniqueItems': true\n                },\n                'type': {\n                    'anyOf': [\n                        {\n                            '$ref': '#/definitions/simpleTypes'\n                        },\n                        {\n                            'type': 'array',\n                            'items': {\n                                '$ref': '#/definitions/simpleTypes'\n                            },\n                            'minItems': 1,\n                            'uniqueItems': true\n                        }\n                    ]\n                },\n                'format': {\n                    'anyOf': [\n                        {\n                            'type': 'string',\n                            'enum': [\n                                'date-time',\n                                'uri',\n                                'email',\n                                'hostname',\n                                'ipv4',\n                                'ipv6',\n                                'regex'\n                            ]\n                        },\n                        {\n                            'type': 'string'\n                        }\n                    ]\n                },\n                'allOf': {\n                    'allOf': [\n                        {\n                            '$ref': '#/definitions/schemaArray'\n                        }\n                    ]\n                },\n                'anyOf': {\n                    'allOf': [\n                        {\n                            '$ref': '#/definitions/schemaArray'\n                        }\n                    ]\n                },\n                'oneOf': {\n                    'allOf': [\n                        {\n                            '$ref': '#/definitions/schemaArray'\n                        }\n                    ]\n                },\n                'not': {\n                    'allOf': [\n                        {\n                            '$ref': '#'\n                        }\n                    ]\n                }\n            },\n            'dependencies': {\n                'exclusiveMaximum': [\n                    'maximum'\n                ],\n                'exclusiveMinimum': [\n                    'minimum'\n                ]\n            },\n            'default': {}\n        },\n        'http://json-schema.org/draft-07/schema#': {\n            'title': localize('schema.json', 'Describes a JSON file using a schema. See json-schema.org for more info.'),\n            'definitions': {\n                'schemaArray': {\n                    'type': 'array',\n                    'minItems': 1,\n                    'items': { '$ref': '#' }\n                },\n                'nonNegativeInteger': {\n                    'type': 'integer',\n                    'minimum': 0\n                },\n                'nonNegativeIntegerDefault0': {\n                    'allOf': [\n                        { '$ref': '#/definitions/nonNegativeInteger' },\n                        { 'default': 0 }\n                    ]\n                },\n                'simpleTypes': {\n                    'enum': [\n                        'array',\n                        'boolean',\n                        'integer',\n                        'null',\n                        'number',\n                        'object',\n                        'string'\n                    ]\n                },\n                'stringArray': {\n                    'type': 'array',\n                    'items': { 'type': 'string' },\n                    'uniqueItems': true,\n                    'default': []\n                }\n            },\n            'type': ['object', 'boolean'],\n            'properties': {\n                '$id': {\n                    'type': 'string',\n                    'format': 'uri-reference'\n                },\n                '$schema': {\n                    'type': 'string',\n                    'format': 'uri'\n                },\n                '$ref': {\n                    'type': 'string',\n                    'format': 'uri-reference'\n                },\n                '$comment': {\n                    'type': 'string'\n                },\n                'title': {\n                    'type': 'string'\n                },\n                'description': {\n                    'type': 'string'\n                },\n                'default': true,\n                'readOnly': {\n                    'type': 'boolean',\n                    'default': false\n                },\n                'examples': {\n                    'type': 'array',\n                    'items': true\n                },\n                'multipleOf': {\n                    'type': 'number',\n                    'exclusiveMinimum': 0\n                },\n                'maximum': {\n                    'type': 'number'\n                },\n                'exclusiveMaximum': {\n                    'type': 'number'\n                },\n                'minimum': {\n                    'type': 'number'\n                },\n                'exclusiveMinimum': {\n                    'type': 'number'\n                },\n                'maxLength': { '$ref': '#/definitions/nonNegativeInteger' },\n                'minLength': { '$ref': '#/definitions/nonNegativeIntegerDefault0' },\n                'pattern': {\n                    'type': 'string',\n                    'format': 'regex'\n                },\n                'additionalItems': { '$ref': '#' },\n                'items': {\n                    'anyOf': [\n                        { '$ref': '#' },\n                        { '$ref': '#/definitions/schemaArray' }\n                    ],\n                    'default': true\n                },\n                'maxItems': { '$ref': '#/definitions/nonNegativeInteger' },\n                'minItems': { '$ref': '#/definitions/nonNegativeIntegerDefault0' },\n                'uniqueItems': {\n                    'type': 'boolean',\n                    'default': false\n                },\n                'contains': { '$ref': '#' },\n                'maxProperties': { '$ref': '#/definitions/nonNegativeInteger' },\n                'minProperties': { '$ref': '#/definitions/nonNegativeIntegerDefault0' },\n                'required': { '$ref': '#/definitions/stringArray' },\n                'additionalProperties': { '$ref': '#' },\n                'definitions': {\n                    'type': 'object',\n                    'additionalProperties': { '$ref': '#' },\n                    'default': {}\n                },\n                'properties': {\n                    'type': 'object',\n                    'additionalProperties': { '$ref': '#' },\n                    'default': {}\n                },\n                'patternProperties': {\n                    'type': 'object',\n                    'additionalProperties': { '$ref': '#' },\n                    'propertyNames': { 'format': 'regex' },\n                    'default': {}\n                },\n                'dependencies': {\n                    'type': 'object',\n                    'additionalProperties': {\n                        'anyOf': [\n                            { '$ref': '#' },\n                            { '$ref': '#/definitions/stringArray' }\n                        ]\n                    }\n                },\n                'propertyNames': { '$ref': '#' },\n                'const': true,\n                'enum': {\n                    'type': 'array',\n                    'items': true,\n                    'minItems': 1,\n                    'uniqueItems': true\n                },\n                'type': {\n                    'anyOf': [\n                        { '$ref': '#/definitions/simpleTypes' },\n                        {\n                            'type': 'array',\n                            'items': { '$ref': '#/definitions/simpleTypes' },\n                            'minItems': 1,\n                            'uniqueItems': true\n                        }\n                    ]\n                },\n                'format': { 'type': 'string' },\n                'contentMediaType': { 'type': 'string' },\n                'contentEncoding': { 'type': 'string' },\n                'if': { '$ref': '#' },\n                'then': { '$ref': '#' },\n                'else': { '$ref': '#' },\n                'allOf': { '$ref': '#/definitions/schemaArray' },\n                'anyOf': { '$ref': '#/definitions/schemaArray' },\n                'oneOf': { '$ref': '#/definitions/schemaArray' },\n                'not': { '$ref': '#' }\n            },\n            'default': true\n        }\n    }\n};\nvar descriptions = {\n    id: localize('schema.json.id', \"A unique identifier for the schema.\"),\n    $schema: localize('schema.json.$schema', \"The schema to verify this document against.\"),\n    title: localize('schema.json.title', \"A descriptive title of the element.\"),\n    description: localize('schema.json.description', \"A long description of the element. Used in hover menus and suggestions.\"),\n    default: localize('schema.json.default', \"A default value. Used by suggestions.\"),\n    multipleOf: localize('schema.json.multipleOf', \"A number that should cleanly divide the current value (i.e. have no remainder).\"),\n    maximum: localize('schema.json.maximum', \"The maximum numerical value, inclusive by default.\"),\n    exclusiveMaximum: localize('schema.json.exclusiveMaximum', \"Makes the maximum property exclusive.\"),\n    minimum: localize('schema.json.minimum', \"The minimum numerical value, inclusive by default.\"),\n    exclusiveMinimum: localize('schema.json.exclusiveMininum', \"Makes the minimum property exclusive.\"),\n    maxLength: localize('schema.json.maxLength', \"The maximum length of a string.\"),\n    minLength: localize('schema.json.minLength', \"The minimum length of a string.\"),\n    pattern: localize('schema.json.pattern', \"A regular expression to match the string against. It is not implicitly anchored.\"),\n    additionalItems: localize('schema.json.additionalItems', \"For arrays, only when items is set as an array. If it is a schema, then this schema validates items after the ones specified by the items array. If it is false, then additional items will cause validation to fail.\"),\n    items: localize('schema.json.items', \"For arrays. Can either be a schema to validate every element against or an array of schemas to validate each item against in order (the first schema will validate the first element, the second schema will validate the second element, and so on.\"),\n    maxItems: localize('schema.json.maxItems', \"The maximum number of items that can be inside an array. Inclusive.\"),\n    minItems: localize('schema.json.minItems', \"The minimum number of items that can be inside an array. Inclusive.\"),\n    uniqueItems: localize('schema.json.uniqueItems', \"If all of the items in the array must be unique. Defaults to false.\"),\n    maxProperties: localize('schema.json.maxProperties', \"The maximum number of properties an object can have. Inclusive.\"),\n    minProperties: localize('schema.json.minProperties', \"The minimum number of properties an object can have. Inclusive.\"),\n    required: localize('schema.json.required', \"An array of strings that lists the names of all properties required on this object.\"),\n    additionalProperties: localize('schema.json.additionalProperties', \"Either a schema or a boolean. If a schema, then used to validate all properties not matched by 'properties' or 'patternProperties'. If false, then any properties not matched by either will cause this schema to fail.\"),\n    definitions: localize('schema.json.definitions', \"Not used for validation. Place subschemas here that you wish to reference inline with $ref.\"),\n    properties: localize('schema.json.properties', \"A map of property names to schemas for each property.\"),\n    patternProperties: localize('schema.json.patternProperties', \"A map of regular expressions on property names to schemas for matching properties.\"),\n    dependencies: localize('schema.json.dependencies', \"A map of property names to either an array of property names or a schema. An array of property names means the property named in the key depends on the properties in the array being present in the object in order to be valid. If the value is a schema, then the schema is only applied to the object if the property in the key exists on the object.\"),\n    enum: localize('schema.json.enum', \"The set of literal values that are valid.\"),\n    type: localize('schema.json.type', \"Either a string of one of the basic schema types (number, integer, null, array, object, boolean, string) or an array of strings specifying a subset of those types.\"),\n    format: localize('schema.json.format', \"Describes the format expected for the value.\"),\n    allOf: localize('schema.json.allOf', \"An array of schemas, all of which must match.\"),\n    anyOf: localize('schema.json.anyOf', \"An array of schemas, where at least one must match.\"),\n    oneOf: localize('schema.json.oneOf', \"An array of schemas, exactly one of which must match.\"),\n    not: localize('schema.json.not', \"A schema which must not match.\"),\n    $id: localize('schema.json.$id', \"A unique identifier for the schema.\"),\n    $ref: localize('schema.json.$ref', \"Reference a definition hosted on any location.\"),\n    $comment: localize('schema.json.$comment', \"Comments from schema authors to readers or maintainers of the schema.\"),\n    readOnly: localize('schema.json.readOnly', \"Indicates that the value of the instance is managed exclusively by the owning authority.\"),\n    examples: localize('schema.json.examples', \"Sample JSON values associated with a particular schema, for the purpose of illustrating usage.\"),\n    contains: localize('schema.json.contains', \"An array instance is valid against \\\"contains\\\" if at least one of its elements is valid against the given schema.\"),\n    propertyNames: localize('schema.json.propertyNames', \"If the instance is an object, this keyword validates if every property name in the instance validates against the provided schema.\"),\n    const: localize('schema.json.const', \"An instance validates successfully against this keyword if its value is equal to the value of the keyword.\"),\n    contentMediaType: localize('schema.json.contentMediaType', \"Describes the media type of a string property.\"),\n    contentEncoding: localize('schema.json.contentEncoding', \"Describes the content encoding of a string property.\"),\n    if: localize('schema.json.if', \"The validation outcome of the \\\"if\\\" subschema controls which of the \\\"then\\\" or \\\"else\\\" keywords are evaluated.\"),\n    then: localize('schema.json.then', \"The \\\"if\\\" subschema is used for validation when the \\\"if\\\" subschema succeeds.\"),\n    else: localize('schema.json.else', \"The \\\"else\\\" subschema is used for validation when the \\\"if\\\" subschema fails.\")\n};\nfor (var schemaName in schemaContributions.schemas) {\n    var schema = schemaContributions.schemas[schemaName];\n    for (var property in schema.properties) {\n        var propertyObject = schema.properties[property];\n        if (typeof propertyObject === 'boolean') {\n            propertyObject = schema.properties[property] = {};\n        }\n        var description = descriptions[property];\n        if (description) {\n            propertyObject['description'] = description;\n        }\n        else {\n            console.log(property + \": localize('schema.json.\" + property + \"', \\\"\\\")\");\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { createScanner } from '../../jsonc-parser/main.js';\nimport { FoldingRangeKind, Position } from '../jsonLanguageTypes.js';\nexport function getFoldingRanges(document, context) {\n    var ranges = [];\n    var nestingLevels = [];\n    var stack = [];\n    var prevStart = -1;\n    var scanner = createScanner(document.getText(), false);\n    var token = scanner.scan();\n    function addRange(range) {\n        ranges.push(range);\n        nestingLevels.push(stack.length);\n    }\n    while (token !== 17 /* EOF */) {\n        switch (token) {\n            case 1 /* OpenBraceToken */:\n            case 3 /* OpenBracketToken */: {\n                var startLine = document.positionAt(scanner.getTokenOffset()).line;\n                var range = { startLine: startLine, endLine: startLine, kind: token === 1 /* OpenBraceToken */ ? 'object' : 'array' };\n                stack.push(range);\n                break;\n            }\n            case 2 /* CloseBraceToken */:\n            case 4 /* CloseBracketToken */: {\n                var kind = token === 2 /* CloseBraceToken */ ? 'object' : 'array';\n                if (stack.length > 0 && stack[stack.length - 1].kind === kind) {\n                    var range = stack.pop();\n                    var line = document.positionAt(scanner.getTokenOffset()).line;\n                    if (range && line > range.startLine + 1 && prevStart !== range.startLine) {\n                        range.endLine = line - 1;\n                        addRange(range);\n                        prevStart = range.startLine;\n                    }\n                }\n                break;\n            }\n            case 13 /* BlockCommentTrivia */: {\n                var startLine = document.positionAt(scanner.getTokenOffset()).line;\n                var endLine = document.positionAt(scanner.getTokenOffset() + scanner.getTokenLength()).line;\n                if (scanner.getTokenError() === 1 /* UnexpectedEndOfComment */ && startLine + 1 < document.lineCount) {\n                    scanner.setPosition(document.offsetAt(Position.create(startLine + 1, 0)));\n                }\n                else {\n                    if (startLine < endLine) {\n                        addRange({ startLine: startLine, endLine: endLine, kind: FoldingRangeKind.Comment });\n                        prevStart = startLine;\n                    }\n                }\n                break;\n            }\n            case 12 /* LineCommentTrivia */: {\n                var text = document.getText().substr(scanner.getTokenOffset(), scanner.getTokenLength());\n                var m = text.match(/^\\/\\/\\s*#(region\\b)|(endregion\\b)/);\n                if (m) {\n                    var line = document.positionAt(scanner.getTokenOffset()).line;\n                    if (m[1]) { // start pattern match\n                        var range = { startLine: line, endLine: line, kind: FoldingRangeKind.Region };\n                        stack.push(range);\n                    }\n                    else {\n                        var i = stack.length - 1;\n                        while (i >= 0 && stack[i].kind !== FoldingRangeKind.Region) {\n                            i--;\n                        }\n                        if (i >= 0) {\n                            var range = stack[i];\n                            stack.length = i;\n                            if (line > range.startLine && prevStart !== range.startLine) {\n                                range.endLine = line;\n                                addRange(range);\n                                prevStart = range.startLine;\n                            }\n                        }\n                    }\n                }\n                break;\n            }\n        }\n        token = scanner.scan();\n    }\n    var rangeLimit = context && context.rangeLimit;\n    if (typeof rangeLimit !== 'number' || ranges.length <= rangeLimit) {\n        return ranges;\n    }\n    if (context && context.onRangeLimitExceeded) {\n        context.onRangeLimitExceeded(document.uri);\n    }\n    var counts = [];\n    for (var _i = 0, nestingLevels_1 = nestingLevels; _i < nestingLevels_1.length; _i++) {\n        var level = nestingLevels_1[_i];\n        if (level < 30) {\n            counts[level] = (counts[level] || 0) + 1;\n        }\n    }\n    var entries = 0;\n    var maxLevel = 0;\n    for (var i = 0; i < counts.length; i++) {\n        var n = counts[i];\n        if (n) {\n            if (n + entries > rangeLimit) {\n                maxLevel = i;\n                break;\n            }\n            entries += n;\n        }\n    }\n    var result = [];\n    for (var i = 0; i < ranges.length; i++) {\n        var level = nestingLevels[i];\n        if (typeof level === 'number') {\n            if (level < maxLevel || (level === maxLevel && entries++ < rangeLimit)) {\n                result.push(ranges[i]);\n            }\n        }\n    }\n    return result;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Range, SelectionRange } from '../jsonLanguageTypes.js';\nimport { createScanner } from '../../jsonc-parser/main.js';\nexport function getSelectionRanges(document, positions, doc) {\n    function getSelectionRange(position) {\n        var offset = document.offsetAt(position);\n        var node = doc.getNodeFromOffset(offset, true);\n        var result = [];\n        while (node) {\n            switch (node.type) {\n                case 'string':\n                case 'object':\n                case 'array':\n                    // range without \", [ or {\n                    var cStart = node.offset + 1, cEnd = node.offset + node.length - 1;\n                    if (cStart < cEnd && offset >= cStart && offset <= cEnd) {\n                        result.push(newRange(cStart, cEnd));\n                    }\n                    result.push(newRange(node.offset, node.offset + node.length));\n                    break;\n                case 'number':\n                case 'boolean':\n                case 'null':\n                case 'property':\n                    result.push(newRange(node.offset, node.offset + node.length));\n                    break;\n            }\n            if (node.type === 'property' || node.parent && node.parent.type === 'array') {\n                var afterCommaOffset = getOffsetAfterNextToken(node.offset + node.length, 5 /* CommaToken */);\n                if (afterCommaOffset !== -1) {\n                    result.push(newRange(node.offset, afterCommaOffset));\n                }\n            }\n            node = node.parent;\n        }\n        var current = undefined;\n        for (var index = result.length - 1; index >= 0; index--) {\n            current = SelectionRange.create(result[index], current);\n        }\n        if (!current) {\n            current = SelectionRange.create(Range.create(position, position));\n        }\n        return current;\n    }\n    function newRange(start, end) {\n        return Range.create(document.positionAt(start), document.positionAt(end));\n    }\n    var scanner = createScanner(document.getText(), true);\n    function getOffsetAfterNextToken(offset, expectedToken) {\n        scanner.setPosition(offset);\n        var token = scanner.scan();\n        if (token === expectedToken) {\n            return scanner.getTokenOffset() + scanner.getTokenLength();\n        }\n        return -1;\n    }\n    return positions.map(getSelectionRange);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Range } from '../jsonLanguageTypes.js';\nexport function findDefinition(document, position, doc) {\n    var offset = document.offsetAt(position);\n    var node = doc.getNodeFromOffset(offset, true);\n    if (!node || !isRef(node)) {\n        return Promise.resolve([]);\n    }\n    var propertyNode = node.parent;\n    var valueNode = propertyNode.valueNode;\n    var path = valueNode.value;\n    var targetNode = findTargetNode(doc, path);\n    if (!targetNode) {\n        return Promise.resolve([]);\n    }\n    var definition = {\n        targetUri: document.uri,\n        originSelectionRange: createRange(document, valueNode),\n        targetRange: createRange(document, targetNode),\n        targetSelectionRange: createRange(document, targetNode)\n    };\n    return Promise.resolve([definition]);\n}\nfunction createRange(document, node) {\n    return Range.create(document.positionAt(node.offset), document.positionAt(node.offset + node.length));\n}\nfunction isRef(node) {\n    return node.type === 'string' &&\n        node.parent &&\n        node.parent.type === 'property' &&\n        node.parent.valueNode === node &&\n        node.parent.keyNode.value === \"$ref\" ||\n        false;\n}\nfunction findTargetNode(doc, path) {\n    var tokens = parseJSONPointer(path);\n    if (!tokens) {\n        return null;\n    }\n    return findNode(tokens, doc.root);\n}\nfunction findNode(pointer, node) {\n    if (!node) {\n        return null;\n    }\n    if (pointer.length === 0) {\n        return node;\n    }\n    var token = pointer.shift();\n    if (node && node.type === 'object') {\n        var propertyNode = node.properties.find(function (propertyNode) { return propertyNode.keyNode.value === token; });\n        if (!propertyNode) {\n            return null;\n        }\n        return findNode(pointer, propertyNode.valueNode);\n    }\n    else if (node && node.type === 'array') {\n        if (token.match(/^(0|[1-9][0-9]*)$/)) {\n            var index = Number.parseInt(token);\n            var arrayItem = node.items[index];\n            if (!arrayItem) {\n                return null;\n            }\n            return findNode(pointer, arrayItem);\n        }\n    }\n    return null;\n}\nfunction parseJSONPointer(path) {\n    if (path === \"#\") {\n        return [];\n    }\n    if (path[0] !== '#' || path[1] !== '/') {\n        return null;\n    }\n    return path.substring(2).split(/\\//).map(unescape);\n}\nfunction unescape(str) {\n    return str.replace(/~1/g, '/').replace(/~0/g, '~');\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { JSONCompletion } from './services/jsonCompletion.js';\nimport { JSONHover } from './services/jsonHover.js';\nimport { JSONValidation } from './services/jsonValidation.js';\nimport { JSONDocumentSymbols } from './services/jsonDocumentSymbols.js';\nimport { parse as parseJSON, newJSONDocument } from './parser/jsonParser.js';\nimport { schemaContributions } from './services/configuration.js';\nimport { JSONSchemaService } from './services/jsonSchemaService.js';\nimport { getFoldingRanges } from './services/jsonFolding.js';\nimport { getSelectionRanges } from './services/jsonSelectionRanges.js';\nimport { format as formatJSON } from '../jsonc-parser/main.js';\nimport { Range, TextEdit } from './jsonLanguageTypes.js';\nimport { findDefinition } from './services/jsonDefinition.js';\nexport * from './jsonLanguageTypes.js';\nexport function getLanguageService(params) {\n    var promise = params.promiseConstructor || Promise;\n    var jsonSchemaService = new JSONSchemaService(params.schemaRequestService, params.workspaceContext, promise);\n    jsonSchemaService.setSchemaContributions(schemaContributions);\n    var jsonCompletion = new JSONCompletion(jsonSchemaService, params.contributions, promise, params.clientCapabilities);\n    var jsonHover = new JSONHover(jsonSchemaService, params.contributions, promise);\n    var jsonDocumentSymbols = new JSONDocumentSymbols(jsonSchemaService);\n    var jsonValidation = new JSONValidation(jsonSchemaService, promise);\n    return {\n        configure: function (settings) {\n            jsonSchemaService.clearExternalSchemas();\n            if (settings.schemas) {\n                settings.schemas.forEach(function (settings) {\n                    jsonSchemaService.registerExternalSchema(settings.uri, settings.fileMatch, settings.schema);\n                });\n            }\n            jsonValidation.configure(settings);\n        },\n        resetSchema: function (uri) { return jsonSchemaService.onResourceChange(uri); },\n        doValidation: jsonValidation.doValidation.bind(jsonValidation),\n        parseJSONDocument: function (document) { return parseJSON(document, { collectComments: true }); },\n        newJSONDocument: function (root, diagnostics) { return newJSONDocument(root, diagnostics); },\n        getMatchingSchemas: jsonSchemaService.getMatchingSchemas.bind(jsonSchemaService),\n        doResolve: jsonCompletion.doResolve.bind(jsonCompletion),\n        doComplete: jsonCompletion.doComplete.bind(jsonCompletion),\n        findDocumentSymbols: jsonDocumentSymbols.findDocumentSymbols.bind(jsonDocumentSymbols),\n        findDocumentSymbols2: jsonDocumentSymbols.findDocumentSymbols2.bind(jsonDocumentSymbols),\n        findColorSymbols: function (d, s) { return jsonDocumentSymbols.findDocumentColors(d, s).then(function (s) { return s.map(function (s) { return s.range; }); }); },\n        findDocumentColors: jsonDocumentSymbols.findDocumentColors.bind(jsonDocumentSymbols),\n        getColorPresentations: jsonDocumentSymbols.getColorPresentations.bind(jsonDocumentSymbols),\n        doHover: jsonHover.doHover.bind(jsonHover),\n        getFoldingRanges: getFoldingRanges,\n        getSelectionRanges: getSelectionRanges,\n        findDefinition: findDefinition,\n        format: function (d, r, o) {\n            var range = undefined;\n            if (r) {\n                var offset = d.offsetAt(r.start);\n                var length = d.offsetAt(r.end) - offset;\n                range = { offset: offset, length: length };\n            }\n            var options = { tabSize: o ? o.tabSize : 4, insertSpaces: o ? o.insertSpaces : true, eol: '\\n' };\n            return formatJSON(d.getText(), range, options).map(function (e) {\n                return TextEdit.replace(Range.create(d.positionAt(e.offset), d.positionAt(e.offset + e.length)), e.content);\n            });\n        }\n    };\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Uri, Range, editor, languages, MarkerSeverity } from './fillers/monaco-editor-core.js';\nimport * as jsonService from './_deps/vscode-json-languageservice/jsonLanguageService.js';\n// --- diagnostics --- ---\nvar DiagnosticsAdapter = /** @class */ (function () {\n    function DiagnosticsAdapter(_languageId, _worker, defaults) {\n        var _this = this;\n        this._languageId = _languageId;\n        this._worker = _worker;\n        this._disposables = [];\n        this._listener = Object.create(null);\n        var onModelAdd = function (model) {\n            var modeId = model.getModeId();\n            if (modeId !== _this._languageId) {\n                return;\n            }\n            var handle;\n            _this._listener[model.uri.toString()] = model.onDidChangeContent(function () {\n                clearTimeout(handle);\n                handle = setTimeout(function () { return _this._doValidate(model.uri, modeId); }, 500);\n            });\n            _this._doValidate(model.uri, modeId);\n        };\n        var onModelRemoved = function (model) {\n            editor.setModelMarkers(model, _this._languageId, []);\n            var uriStr = model.uri.toString();\n            var listener = _this._listener[uriStr];\n            if (listener) {\n                listener.dispose();\n                delete _this._listener[uriStr];\n            }\n        };\n        this._disposables.push(editor.onDidCreateModel(onModelAdd));\n        this._disposables.push(editor.onWillDisposeModel(function (model) {\n            onModelRemoved(model);\n            _this._resetSchema(model.uri);\n        }));\n        this._disposables.push(editor.onDidChangeModelLanguage(function (event) {\n            onModelRemoved(event.model);\n            onModelAdd(event.model);\n            _this._resetSchema(event.model.uri);\n        }));\n        this._disposables.push(defaults.onDidChange(function (_) {\n            editor.getModels().forEach(function (model) {\n                if (model.getModeId() === _this._languageId) {\n                    onModelRemoved(model);\n                    onModelAdd(model);\n                }\n            });\n        }));\n        this._disposables.push({\n            dispose: function () {\n                editor.getModels().forEach(onModelRemoved);\n                for (var key in _this._listener) {\n                    _this._listener[key].dispose();\n                }\n            }\n        });\n        editor.getModels().forEach(onModelAdd);\n    }\n    DiagnosticsAdapter.prototype.dispose = function () {\n        this._disposables.forEach(function (d) { return d && d.dispose(); });\n        this._disposables = [];\n    };\n    DiagnosticsAdapter.prototype._resetSchema = function (resource) {\n        this._worker().then(function (worker) {\n            worker.resetSchema(resource.toString());\n        });\n    };\n    DiagnosticsAdapter.prototype._doValidate = function (resource, languageId) {\n        this._worker(resource)\n            .then(function (worker) {\n            return worker.doValidation(resource.toString()).then(function (diagnostics) {\n                var markers = diagnostics.map(function (d) { return toDiagnostics(resource, d); });\n                var model = editor.getModel(resource);\n                if (model && model.getModeId() === languageId) {\n                    editor.setModelMarkers(model, languageId, markers);\n                }\n            });\n        })\n            .then(undefined, function (err) {\n            console.error(err);\n        });\n    };\n    return DiagnosticsAdapter;\n}());\nexport { DiagnosticsAdapter };\nfunction toSeverity(lsSeverity) {\n    switch (lsSeverity) {\n        case jsonService.DiagnosticSeverity.Error:\n            return MarkerSeverity.Error;\n        case jsonService.DiagnosticSeverity.Warning:\n            return MarkerSeverity.Warning;\n        case jsonService.DiagnosticSeverity.Information:\n            return MarkerSeverity.Info;\n        case jsonService.DiagnosticSeverity.Hint:\n            return MarkerSeverity.Hint;\n        default:\n            return MarkerSeverity.Info;\n    }\n}\nfunction toDiagnostics(resource, diag) {\n    var code = typeof diag.code === 'number' ? String(diag.code) : diag.code;\n    return {\n        severity: toSeverity(diag.severity),\n        startLineNumber: diag.range.start.line + 1,\n        startColumn: diag.range.start.character + 1,\n        endLineNumber: diag.range.end.line + 1,\n        endColumn: diag.range.end.character + 1,\n        message: diag.message,\n        code: code,\n        source: diag.source\n    };\n}\n// --- completion ------\nfunction fromPosition(position) {\n    if (!position) {\n        return void 0;\n    }\n    return { character: position.column - 1, line: position.lineNumber - 1 };\n}\nfunction fromRange(range) {\n    if (!range) {\n        return void 0;\n    }\n    return {\n        start: {\n            line: range.startLineNumber - 1,\n            character: range.startColumn - 1\n        },\n        end: { line: range.endLineNumber - 1, character: range.endColumn - 1 }\n    };\n}\nfunction toRange(range) {\n    if (!range) {\n        return void 0;\n    }\n    return new Range(range.start.line + 1, range.start.character + 1, range.end.line + 1, range.end.character + 1);\n}\nfunction isInsertReplaceEdit(edit) {\n    return (typeof edit.insert !== 'undefined' &&\n        typeof edit.replace !== 'undefined');\n}\nfunction toCompletionItemKind(kind) {\n    var mItemKind = languages.CompletionItemKind;\n    switch (kind) {\n        case jsonService.CompletionItemKind.Text:\n            return mItemKind.Text;\n        case jsonService.CompletionItemKind.Method:\n            return mItemKind.Method;\n        case jsonService.CompletionItemKind.Function:\n            return mItemKind.Function;\n        case jsonService.CompletionItemKind.Constructor:\n            return mItemKind.Constructor;\n        case jsonService.CompletionItemKind.Field:\n            return mItemKind.Field;\n        case jsonService.CompletionItemKind.Variable:\n            return mItemKind.Variable;\n        case jsonService.CompletionItemKind.Class:\n            return mItemKind.Class;\n        case jsonService.CompletionItemKind.Interface:\n            return mItemKind.Interface;\n        case jsonService.CompletionItemKind.Module:\n            return mItemKind.Module;\n        case jsonService.CompletionItemKind.Property:\n            return mItemKind.Property;\n        case jsonService.CompletionItemKind.Unit:\n            return mItemKind.Unit;\n        case jsonService.CompletionItemKind.Value:\n            return mItemKind.Value;\n        case jsonService.CompletionItemKind.Enum:\n            return mItemKind.Enum;\n        case jsonService.CompletionItemKind.Keyword:\n            return mItemKind.Keyword;\n        case jsonService.CompletionItemKind.Snippet:\n            return mItemKind.Snippet;\n        case jsonService.CompletionItemKind.Color:\n            return mItemKind.Color;\n        case jsonService.CompletionItemKind.File:\n            return mItemKind.File;\n        case jsonService.CompletionItemKind.Reference:\n            return mItemKind.Reference;\n    }\n    return mItemKind.Property;\n}\nfunction fromCompletionItemKind(kind) {\n    var mItemKind = languages.CompletionItemKind;\n    switch (kind) {\n        case mItemKind.Text:\n            return jsonService.CompletionItemKind.Text;\n        case mItemKind.Method:\n            return jsonService.CompletionItemKind.Method;\n        case mItemKind.Function:\n            return jsonService.CompletionItemKind.Function;\n        case mItemKind.Constructor:\n            return jsonService.CompletionItemKind.Constructor;\n        case mItemKind.Field:\n            return jsonService.CompletionItemKind.Field;\n        case mItemKind.Variable:\n            return jsonService.CompletionItemKind.Variable;\n        case mItemKind.Class:\n            return jsonService.CompletionItemKind.Class;\n        case mItemKind.Interface:\n            return jsonService.CompletionItemKind.Interface;\n        case mItemKind.Module:\n            return jsonService.CompletionItemKind.Module;\n        case mItemKind.Property:\n            return jsonService.CompletionItemKind.Property;\n        case mItemKind.Unit:\n            return jsonService.CompletionItemKind.Unit;\n        case mItemKind.Value:\n            return jsonService.CompletionItemKind.Value;\n        case mItemKind.Enum:\n            return jsonService.CompletionItemKind.Enum;\n        case mItemKind.Keyword:\n            return jsonService.CompletionItemKind.Keyword;\n        case mItemKind.Snippet:\n            return jsonService.CompletionItemKind.Snippet;\n        case mItemKind.Color:\n            return jsonService.CompletionItemKind.Color;\n        case mItemKind.File:\n            return jsonService.CompletionItemKind.File;\n        case mItemKind.Reference:\n            return jsonService.CompletionItemKind.Reference;\n    }\n    return jsonService.CompletionItemKind.Property;\n}\nfunction toTextEdit(textEdit) {\n    if (!textEdit) {\n        return void 0;\n    }\n    return {\n        range: toRange(textEdit.range),\n        text: textEdit.newText\n    };\n}\nvar CompletionAdapter = /** @class */ (function () {\n    function CompletionAdapter(_worker) {\n        this._worker = _worker;\n    }\n    Object.defineProperty(CompletionAdapter.prototype, \"triggerCharacters\", {\n        get: function () {\n            return [' ', ':'];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    CompletionAdapter.prototype.provideCompletionItems = function (model, position, context, token) {\n        var resource = model.uri;\n        return this._worker(resource)\n            .then(function (worker) {\n            return worker.doComplete(resource.toString(), fromPosition(position));\n        })\n            .then(function (info) {\n            if (!info) {\n                return;\n            }\n            var wordInfo = model.getWordUntilPosition(position);\n            var wordRange = new Range(position.lineNumber, wordInfo.startColumn, position.lineNumber, wordInfo.endColumn);\n            var items = info.items.map(function (entry) {\n                var item = {\n                    label: entry.label,\n                    insertText: entry.insertText || entry.label,\n                    sortText: entry.sortText,\n                    filterText: entry.filterText,\n                    documentation: entry.documentation,\n                    detail: entry.detail,\n                    range: wordRange,\n                    kind: toCompletionItemKind(entry.kind)\n                };\n                if (entry.textEdit) {\n                    if (isInsertReplaceEdit(entry.textEdit)) {\n                        item.range = {\n                            insert: toRange(entry.textEdit.insert),\n                            replace: toRange(entry.textEdit.replace)\n                        };\n                    }\n                    else {\n                        item.range = toRange(entry.textEdit.range);\n                    }\n                    item.insertText = entry.textEdit.newText;\n                }\n                if (entry.additionalTextEdits) {\n                    item.additionalTextEdits = entry.additionalTextEdits.map(toTextEdit);\n                }\n                if (entry.insertTextFormat === jsonService.InsertTextFormat.Snippet) {\n                    item.insertTextRules = languages.CompletionItemInsertTextRule.InsertAsSnippet;\n                }\n                return item;\n            });\n            return {\n                isIncomplete: info.isIncomplete,\n                suggestions: items\n            };\n        });\n    };\n    return CompletionAdapter;\n}());\nexport { CompletionAdapter };\nfunction isMarkupContent(thing) {\n    return (thing &&\n        typeof thing === 'object' &&\n        typeof thing.kind === 'string');\n}\nfunction toMarkdownString(entry) {\n    if (typeof entry === 'string') {\n        return {\n            value: entry\n        };\n    }\n    if (isMarkupContent(entry)) {\n        if (entry.kind === 'plaintext') {\n            return {\n                value: entry.value.replace(/[\\\\`*_{}[\\]()#+\\-.!]/g, '\\\\$&')\n            };\n        }\n        return {\n            value: entry.value\n        };\n    }\n    return { value: '```' + entry.language + '\\n' + entry.value + '\\n```\\n' };\n}\nfunction toMarkedStringArray(contents) {\n    if (!contents) {\n        return void 0;\n    }\n    if (Array.isArray(contents)) {\n        return contents.map(toMarkdownString);\n    }\n    return [toMarkdownString(contents)];\n}\n// --- hover ------\nvar HoverAdapter = /** @class */ (function () {\n    function HoverAdapter(_worker) {\n        this._worker = _worker;\n    }\n    HoverAdapter.prototype.provideHover = function (model, position, token) {\n        var resource = model.uri;\n        return this._worker(resource)\n            .then(function (worker) {\n            return worker.doHover(resource.toString(), fromPosition(position));\n        })\n            .then(function (info) {\n            if (!info) {\n                return;\n            }\n            return {\n                range: toRange(info.range),\n                contents: toMarkedStringArray(info.contents)\n            };\n        });\n    };\n    return HoverAdapter;\n}());\nexport { HoverAdapter };\n// --- definition ------\nfunction toLocation(location) {\n    return {\n        uri: Uri.parse(location.uri),\n        range: toRange(location.range)\n    };\n}\n// --- document symbols ------\nfunction toSymbolKind(kind) {\n    var mKind = languages.SymbolKind;\n    switch (kind) {\n        case jsonService.SymbolKind.File:\n            return mKind.Array;\n        case jsonService.SymbolKind.Module:\n            return mKind.Module;\n        case jsonService.SymbolKind.Namespace:\n            return mKind.Namespace;\n        case jsonService.SymbolKind.Package:\n            return mKind.Package;\n        case jsonService.SymbolKind.Class:\n            return mKind.Class;\n        case jsonService.SymbolKind.Method:\n            return mKind.Method;\n        case jsonService.SymbolKind.Property:\n            return mKind.Property;\n        case jsonService.SymbolKind.Field:\n            return mKind.Field;\n        case jsonService.SymbolKind.Constructor:\n            return mKind.Constructor;\n        case jsonService.SymbolKind.Enum:\n            return mKind.Enum;\n        case jsonService.SymbolKind.Interface:\n            return mKind.Interface;\n        case jsonService.SymbolKind.Function:\n            return mKind.Function;\n        case jsonService.SymbolKind.Variable:\n            return mKind.Variable;\n        case jsonService.SymbolKind.Constant:\n            return mKind.Constant;\n        case jsonService.SymbolKind.String:\n            return mKind.String;\n        case jsonService.SymbolKind.Number:\n            return mKind.Number;\n        case jsonService.SymbolKind.Boolean:\n            return mKind.Boolean;\n        case jsonService.SymbolKind.Array:\n            return mKind.Array;\n    }\n    return mKind.Function;\n}\nvar DocumentSymbolAdapter = /** @class */ (function () {\n    function DocumentSymbolAdapter(_worker) {\n        this._worker = _worker;\n    }\n    DocumentSymbolAdapter.prototype.provideDocumentSymbols = function (model, token) {\n        var resource = model.uri;\n        return this._worker(resource)\n            .then(function (worker) { return worker.findDocumentSymbols(resource.toString()); })\n            .then(function (items) {\n            if (!items) {\n                return;\n            }\n            return items.map(function (item) { return ({\n                name: item.name,\n                detail: '',\n                containerName: item.containerName,\n                kind: toSymbolKind(item.kind),\n                range: toRange(item.location.range),\n                selectionRange: toRange(item.location.range),\n                tags: []\n            }); });\n        });\n    };\n    return DocumentSymbolAdapter;\n}());\nexport { DocumentSymbolAdapter };\nfunction fromFormattingOptions(options) {\n    return {\n        tabSize: options.tabSize,\n        insertSpaces: options.insertSpaces\n    };\n}\nvar DocumentFormattingEditProvider = /** @class */ (function () {\n    function DocumentFormattingEditProvider(_worker) {\n        this._worker = _worker;\n    }\n    DocumentFormattingEditProvider.prototype.provideDocumentFormattingEdits = function (model, options, token) {\n        var resource = model.uri;\n        return this._worker(resource).then(function (worker) {\n            return worker\n                .format(resource.toString(), null, fromFormattingOptions(options))\n                .then(function (edits) {\n                if (!edits || edits.length === 0) {\n                    return;\n                }\n                return edits.map(toTextEdit);\n            });\n        });\n    };\n    return DocumentFormattingEditProvider;\n}());\nexport { DocumentFormattingEditProvider };\nvar DocumentRangeFormattingEditProvider = /** @class */ (function () {\n    function DocumentRangeFormattingEditProvider(_worker) {\n        this._worker = _worker;\n    }\n    DocumentRangeFormattingEditProvider.prototype.provideDocumentRangeFormattingEdits = function (model, range, options, token) {\n        var resource = model.uri;\n        return this._worker(resource).then(function (worker) {\n            return worker\n                .format(resource.toString(), fromRange(range), fromFormattingOptions(options))\n                .then(function (edits) {\n                if (!edits || edits.length === 0) {\n                    return;\n                }\n                return edits.map(toTextEdit);\n            });\n        });\n    };\n    return DocumentRangeFormattingEditProvider;\n}());\nexport { DocumentRangeFormattingEditProvider };\nvar DocumentColorAdapter = /** @class */ (function () {\n    function DocumentColorAdapter(_worker) {\n        this._worker = _worker;\n    }\n    DocumentColorAdapter.prototype.provideDocumentColors = function (model, token) {\n        var resource = model.uri;\n        return this._worker(resource)\n            .then(function (worker) { return worker.findDocumentColors(resource.toString()); })\n            .then(function (infos) {\n            if (!infos) {\n                return;\n            }\n            return infos.map(function (item) { return ({\n                color: item.color,\n                range: toRange(item.range)\n            }); });\n        });\n    };\n    DocumentColorAdapter.prototype.provideColorPresentations = function (model, info, token) {\n        var resource = model.uri;\n        return this._worker(resource)\n            .then(function (worker) {\n            return worker.getColorPresentations(resource.toString(), info.color, fromRange(info.range));\n        })\n            .then(function (presentations) {\n            if (!presentations) {\n                return;\n            }\n            return presentations.map(function (presentation) {\n                var item = {\n                    label: presentation.label\n                };\n                if (presentation.textEdit) {\n                    item.textEdit = toTextEdit(presentation.textEdit);\n                }\n                if (presentation.additionalTextEdits) {\n                    item.additionalTextEdits = presentation.additionalTextEdits.map(toTextEdit);\n                }\n                return item;\n            });\n        });\n    };\n    return DocumentColorAdapter;\n}());\nexport { DocumentColorAdapter };\nvar FoldingRangeAdapter = /** @class */ (function () {\n    function FoldingRangeAdapter(_worker) {\n        this._worker = _worker;\n    }\n    FoldingRangeAdapter.prototype.provideFoldingRanges = function (model, context, token) {\n        var resource = model.uri;\n        return this._worker(resource)\n            .then(function (worker) { return worker.getFoldingRanges(resource.toString(), context); })\n            .then(function (ranges) {\n            if (!ranges) {\n                return;\n            }\n            return ranges.map(function (range) {\n                var result = {\n                    start: range.startLine + 1,\n                    end: range.endLine + 1\n                };\n                if (typeof range.kind !== 'undefined') {\n                    result.kind = toFoldingRangeKind(range.kind);\n                }\n                return result;\n            });\n        });\n    };\n    return FoldingRangeAdapter;\n}());\nexport { FoldingRangeAdapter };\nfunction toFoldingRangeKind(kind) {\n    switch (kind) {\n        case jsonService.FoldingRangeKind.Comment:\n            return languages.FoldingRangeKind.Comment;\n        case jsonService.FoldingRangeKind.Imports:\n            return languages.FoldingRangeKind.Imports;\n        case jsonService.FoldingRangeKind.Region:\n            return languages.FoldingRangeKind.Region;\n    }\n    return void 0;\n}\nvar SelectionRangeAdapter = /** @class */ (function () {\n    function SelectionRangeAdapter(_worker) {\n        this._worker = _worker;\n    }\n    SelectionRangeAdapter.prototype.provideSelectionRanges = function (model, positions, token) {\n        var resource = model.uri;\n        return this._worker(resource)\n            .then(function (worker) { return worker.getSelectionRanges(resource.toString(), positions.map(fromPosition)); })\n            .then(function (selectionRanges) {\n            if (!selectionRanges) {\n                return;\n            }\n            return selectionRanges.map(function (selectionRange) {\n                var result = [];\n                while (selectionRange) {\n                    result.push({ range: toRange(selectionRange.range) });\n                    selectionRange = selectionRange.parent;\n                }\n                return result;\n            });\n        });\n    };\n    return SelectionRangeAdapter;\n}());\nexport { SelectionRangeAdapter };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as json from './_deps/jsonc-parser/main.js';\nexport function createTokenizationSupport(supportComments) {\n    return {\n        getInitialState: function () { return new JSONState(null, null, false, null); },\n        tokenize: function (line, state, offsetDelta, stopAtOffset) {\n            return tokenize(supportComments, line, state, offsetDelta, stopAtOffset);\n        }\n    };\n}\nexport var TOKEN_DELIM_OBJECT = 'delimiter.bracket.json';\nexport var TOKEN_DELIM_ARRAY = 'delimiter.array.json';\nexport var TOKEN_DELIM_COLON = 'delimiter.colon.json';\nexport var TOKEN_DELIM_COMMA = 'delimiter.comma.json';\nexport var TOKEN_VALUE_BOOLEAN = 'keyword.json';\nexport var TOKEN_VALUE_NULL = 'keyword.json';\nexport var TOKEN_VALUE_STRING = 'string.value.json';\nexport var TOKEN_VALUE_NUMBER = 'number.json';\nexport var TOKEN_PROPERTY_NAME = 'string.key.json';\nexport var TOKEN_COMMENT_BLOCK = 'comment.block.json';\nexport var TOKEN_COMMENT_LINE = 'comment.line.json';\nvar ParentsStack = /** @class */ (function () {\n    function ParentsStack(parent, type) {\n        this.parent = parent;\n        this.type = type;\n    }\n    ParentsStack.pop = function (parents) {\n        if (parents) {\n            return parents.parent;\n        }\n        return null;\n    };\n    ParentsStack.push = function (parents, type) {\n        return new ParentsStack(parents, type);\n    };\n    ParentsStack.equals = function (a, b) {\n        if (!a && !b) {\n            return true;\n        }\n        if (!a || !b) {\n            return false;\n        }\n        while (a && b) {\n            if (a === b) {\n                return true;\n            }\n            if (a.type !== b.type) {\n                return false;\n            }\n            a = a.parent;\n            b = b.parent;\n        }\n        return true;\n    };\n    return ParentsStack;\n}());\nvar JSONState = /** @class */ (function () {\n    function JSONState(state, scanError, lastWasColon, parents) {\n        this._state = state;\n        this.scanError = scanError;\n        this.lastWasColon = lastWasColon;\n        this.parents = parents;\n    }\n    JSONState.prototype.clone = function () {\n        return new JSONState(this._state, this.scanError, this.lastWasColon, this.parents);\n    };\n    JSONState.prototype.equals = function (other) {\n        if (other === this) {\n            return true;\n        }\n        if (!other || !(other instanceof JSONState)) {\n            return false;\n        }\n        return (this.scanError === other.scanError &&\n            this.lastWasColon === other.lastWasColon &&\n            ParentsStack.equals(this.parents, other.parents));\n    };\n    JSONState.prototype.getStateData = function () {\n        return this._state;\n    };\n    JSONState.prototype.setStateData = function (state) {\n        this._state = state;\n    };\n    return JSONState;\n}());\nfunction tokenize(comments, line, state, offsetDelta, stopAtOffset) {\n    if (offsetDelta === void 0) { offsetDelta = 0; }\n    // handle multiline strings and block comments\n    var numberOfInsertedCharacters = 0;\n    var adjustOffset = false;\n    switch (state.scanError) {\n        case 2 /* UnexpectedEndOfString */:\n            line = '\"' + line;\n            numberOfInsertedCharacters = 1;\n            break;\n        case 1 /* UnexpectedEndOfComment */:\n            line = '/*' + line;\n            numberOfInsertedCharacters = 2;\n            break;\n    }\n    var scanner = json.createScanner(line);\n    var lastWasColon = state.lastWasColon;\n    var parents = state.parents;\n    var ret = {\n        tokens: [],\n        endState: state.clone()\n    };\n    while (true) {\n        var offset = offsetDelta + scanner.getPosition();\n        var type = '';\n        var kind = scanner.scan();\n        if (kind === 17 /* EOF */) {\n            break;\n        }\n        // Check that the scanner has advanced\n        if (offset === offsetDelta + scanner.getPosition()) {\n            throw new Error('Scanner did not advance, next 3 characters are: ' + line.substr(scanner.getPosition(), 3));\n        }\n        // In case we inserted /* or \" character, we need to\n        // adjust the offset of all tokens (except the first)\n        if (adjustOffset) {\n            offset -= numberOfInsertedCharacters;\n        }\n        adjustOffset = numberOfInsertedCharacters > 0;\n        // brackets and type\n        switch (kind) {\n            case 1 /* OpenBraceToken */:\n                parents = ParentsStack.push(parents, 0 /* Object */);\n                type = TOKEN_DELIM_OBJECT;\n                lastWasColon = false;\n                break;\n            case 2 /* CloseBraceToken */:\n                parents = ParentsStack.pop(parents);\n                type = TOKEN_DELIM_OBJECT;\n                lastWasColon = false;\n                break;\n            case 3 /* OpenBracketToken */:\n                parents = ParentsStack.push(parents, 1 /* Array */);\n                type = TOKEN_DELIM_ARRAY;\n                lastWasColon = false;\n                break;\n            case 4 /* CloseBracketToken */:\n                parents = ParentsStack.pop(parents);\n                type = TOKEN_DELIM_ARRAY;\n                lastWasColon = false;\n                break;\n            case 6 /* ColonToken */:\n                type = TOKEN_DELIM_COLON;\n                lastWasColon = true;\n                break;\n            case 5 /* CommaToken */:\n                type = TOKEN_DELIM_COMMA;\n                lastWasColon = false;\n                break;\n            case 8 /* TrueKeyword */:\n            case 9 /* FalseKeyword */:\n                type = TOKEN_VALUE_BOOLEAN;\n                lastWasColon = false;\n                break;\n            case 7 /* NullKeyword */:\n                type = TOKEN_VALUE_NULL;\n                lastWasColon = false;\n                break;\n            case 10 /* StringLiteral */:\n                var currentParent = parents ? parents.type : 0 /* Object */;\n                var inArray = currentParent === 1 /* Array */;\n                type =\n                    lastWasColon || inArray ? TOKEN_VALUE_STRING : TOKEN_PROPERTY_NAME;\n                lastWasColon = false;\n                break;\n            case 11 /* NumericLiteral */:\n                type = TOKEN_VALUE_NUMBER;\n                lastWasColon = false;\n                break;\n        }\n        // comments, iff enabled\n        if (comments) {\n            switch (kind) {\n                case 12 /* LineCommentTrivia */:\n                    type = TOKEN_COMMENT_LINE;\n                    break;\n                case 13 /* BlockCommentTrivia */:\n                    type = TOKEN_COMMENT_BLOCK;\n                    break;\n            }\n        }\n        ret.endState = new JSONState(state.getStateData(), scanner.getTokenError(), lastWasColon, parents);\n        ret.tokens.push({\n            startIndex: offset,\n            scopes: type\n        });\n    }\n    return ret;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { WorkerManager } from './workerManager.js';\nimport * as languageFeatures from './languageFeatures.js';\nimport { createTokenizationSupport } from './tokenization.js';\nimport { languages } from './fillers/monaco-editor-core.js';\nexport function setupMode(defaults) {\n    var disposables = [];\n    var providers = [];\n    var client = new WorkerManager(defaults);\n    disposables.push(client);\n    var worker = function () {\n        var uris = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            uris[_i] = arguments[_i];\n        }\n        return client.getLanguageServiceWorker.apply(client, uris);\n    };\n    function registerProviders() {\n        var languageId = defaults.languageId, modeConfiguration = defaults.modeConfiguration;\n        disposeAll(providers);\n        if (modeConfiguration.documentFormattingEdits) {\n            providers.push(languages.registerDocumentFormattingEditProvider(languageId, new languageFeatures.DocumentFormattingEditProvider(worker)));\n        }\n        if (modeConfiguration.documentRangeFormattingEdits) {\n            providers.push(languages.registerDocumentRangeFormattingEditProvider(languageId, new languageFeatures.DocumentRangeFormattingEditProvider(worker)));\n        }\n        if (modeConfiguration.completionItems) {\n            providers.push(languages.registerCompletionItemProvider(languageId, new languageFeatures.CompletionAdapter(worker)));\n        }\n        if (modeConfiguration.hovers) {\n            providers.push(languages.registerHoverProvider(languageId, new languageFeatures.HoverAdapter(worker)));\n        }\n        if (modeConfiguration.documentSymbols) {\n            providers.push(languages.registerDocumentSymbolProvider(languageId, new languageFeatures.DocumentSymbolAdapter(worker)));\n        }\n        if (modeConfiguration.tokens) {\n            providers.push(languages.setTokensProvider(languageId, createTokenizationSupport(true)));\n        }\n        if (modeConfiguration.colors) {\n            providers.push(languages.registerColorProvider(languageId, new languageFeatures.DocumentColorAdapter(worker)));\n        }\n        if (modeConfiguration.foldingRanges) {\n            providers.push(languages.registerFoldingRangeProvider(languageId, new languageFeatures.FoldingRangeAdapter(worker)));\n        }\n        if (modeConfiguration.diagnostics) {\n            providers.push(new languageFeatures.DiagnosticsAdapter(languageId, worker, defaults));\n        }\n        if (modeConfiguration.selectionRanges) {\n            providers.push(languages.registerSelectionRangeProvider(languageId, new languageFeatures.SelectionRangeAdapter(worker)));\n        }\n    }\n    registerProviders();\n    disposables.push(languages.setLanguageConfiguration(defaults.languageId, richEditConfiguration));\n    var modeConfiguration = defaults.modeConfiguration;\n    defaults.onDidChange(function (newDefaults) {\n        if (newDefaults.modeConfiguration !== modeConfiguration) {\n            modeConfiguration = newDefaults.modeConfiguration;\n            registerProviders();\n        }\n    });\n    disposables.push(asDisposable(providers));\n    return asDisposable(disposables);\n}\nfunction asDisposable(disposables) {\n    return { dispose: function () { return disposeAll(disposables); } };\n}\nfunction disposeAll(disposables) {\n    while (disposables.length) {\n        disposables.pop().dispose();\n    }\n}\nvar richEditConfiguration = {\n    wordPattern: /(-?\\d*\\.\\d\\w*)|([^\\[\\{\\]\\}\\:\\\"\\,\\s]+)/g,\n    comments: {\n        lineComment: '//',\n        blockComment: ['/*', '*/']\n    },\n    brackets: [\n        ['{', '}'],\n        ['[', ']']\n    ],\n    autoClosingPairs: [\n        { open: '{', close: '}', notIn: ['string'] },\n        { open: '[', close: ']', notIn: ['string'] },\n        { open: '\"', close: '\"', notIn: ['string'] }\n    ]\n};\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel]  Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel]   ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\"></span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}