{"version":3,"sources":["node_modules/monaco-editor/esm/vs/language/typescript/workerManager.js","node_modules/monaco-editor/esm/vs/language/typescript/lib/lib.index.js","node_modules/monaco-editor/esm/vs/language/typescript/languageFeatures.js","node_modules/monaco-editor/esm/vs/language/typescript/tsMode.js","node_modules/parcel/src/builtins/hmr-runtime.js"],"names":["__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__generator","body","_","label","sent","t","trys","ops","f","y","g","verb","Symbol","iterator","n","v","op","TypeError","call","pop","length","push","WorkerManager","modeId","defaults","_this","_modeId","_defaults","_worker","_client","_configChangeListener","onDidChange","_stopWorker","_updateExtraLibsToken","_extraLibsChangeListener","onDidExtraLibsChange","_updateExtraLibs","prototype","dispose","myToken","proxy","_a","getProxy","updateExtraLibs","getExtraLibs","_getClient","editor","createWebWorker","moduleId","keepIdleModels","createData","compilerOptions","getCompilerOptions","extraLibs","customWorkerPath","workerOptions","p","getEagerModelSync","worker","withSyncedResources","getModels","filter","model","getModeId","map","uri","getLanguageServiceWorker","resources","_i","arguments","client","libFileSet","__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","hasOwnProperty","__","constructor","create","IndentStyle","flattenDiagnosticMessageText","diag","newLine","indent","undefined","i","messageText","kid","displayPartsToString","displayParts","displayPart","text","join","Adapter","_textSpanToRange","span","p1","getPositionAt","start","p2","startLineNumber","lineNumber","startColumn","column","endLineNumber","endColumn","LibFiles","_libFiles","_hasFetchedLibFiles","_fetchLibFilesPromise","isLibFile","path","indexOf","slice","getOrCreateModel","getModel","createModel","_containsLibFile","uris","uris_1","fetchLibFilesIfNecessary","_fetchLibFiles","w","getLibFiles","libFiles","DiagnosticCategory","DiagnosticsAdapter","_super","_selector","_disposables","_listener","onModelAdd","handle","changeSubscription","onDidChangeContent","clearTimeout","setTimeout","_doValidate","toString","onModelRemoved","setModelMarkers","key","onDidCreateModel","onWillDisposeModel","onDidChangeModelLanguage","event","recomputeDiagostics","forEach","promises","noSyntaxValidation","noSemanticValidation","noSuggestionDiagnostics","allDiagnostics","diagnostics","relatedUris","_b","isDisposed","getDiagnosticsOptions","getSyntacticDiagnostics","getSemanticDiagnostics","getSuggestionDiagnostics","all","reduce","c","concat","diagnosticCodesToIgnore","code","relatedInformation","file","Uri","parse","fileName","_convertDiagnostics","diagStart","diagLength","tags","reportsUnnecessary","MarkerTag","Unnecessary","reportsDeprecated","Deprecated","severity","_tsDiagnosticCategoryToMarkerSeverity","category","message","_convertRelatedInformation","info","relatedResource","relatedResourceUri","infoStart","infoLength","resource","Error","MarkerSeverity","Message","Info","Warning","Suggestion","Hint","SuggestAdapter","defineProperty","get","enumerable","configurable","provideCompletionItems","position","_context","token","wordInfo","wordRange","offset","suggestions","getWordUntilPosition","Range","getOffsetAt","getCompletionsAtPosition","entries","entry","range","replacementSpan","kindModifiers","languages","CompletionItemTag","name","insertText","sortText","kind","convertKind","resolveCompletionItem","item","myItem","details","getCompletionEntryDetails","detail","documentation","createDocumentationString","Kind","primitiveType","keyword","CompletionItemKind","Keyword","variable","localVariable","Variable","memberVariable","memberGetAccessor","memberSetAccessor","Field","function","memberFunction","constructSignature","callSignature","indexSignature","Function","enum","Enum","module","Module","class","Class","interface","Interface","warning","File","Property","documentationString","tag","tagToString","tagLabel","split","paramName","rest","SignatureHelpAdapter","signatureHelpTriggerCharacters","provideSignatureHelp","ret","getSignatureHelpItems","activeSignature","selectedItemIndex","activeParameter","argumentIndex","signatures","items","signature","parameters","prefixDisplayParts","a","parameter","separatorDisplayParts","suffixDisplayParts","QuickInfoAdapter","provideHover","contents","getQuickInfoAtPosition","textSpan","OccurrencesAdapter","provideDocumentHighlights","getOccurrencesAtPosition","isWriteAccess","DocumentHighlightKind","Write","Text","DefinitionAdapter","provideDefinition","entries_1","refModel","getDefinitionAtPosition","ReferenceAdapter","provideReferences","context","entries_2","getReferencesAtPosition","OutlineAdapter","provideDocumentSymbols","convert","getNavigationBarItems","bucket","containerLabel","outlineTypeTable","SymbolKind","spans","selectionRange","containerName","childItems","child","unknown","script","type","localFunction","constructorImplementation","typeParameter","alias","const","let","Method","FormatHelper","_convertOptions","options","ConvertTabsToSpaces","insertSpaces","TabSize","tabSize","IndentSize","Smart","NewLineCharacter","InsertSpaceAfterCommaDelimiter","InsertSpaceAfterSemicolonInForStatements","InsertSpaceBeforeAndAfterBinaryOperators","InsertSpaceAfterKeywordsInControlFlowStatements","InsertSpaceAfterFunctionKeywordForAnonymousFunctions","InsertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis","InsertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets","InsertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces","PlaceOpenBraceOnNewLineForControlBlocks","PlaceOpenBraceOnNewLineForFunctions","_convertTextChanges","change","newText","FormatAdapter","provideDocumentRangeFormattingEdits","startOffset","endOffset","edits","getFormattingEditsForRange","edit","FormatOnTypeAdapter","provideOnTypeFormattingEdits","ch","getFormattingEditsAfterKeystroke","CodeActionAdaptor","provideCodeActions","end","formatOptions","errorCodes","codeFixes","actions","getOptions","markers","m","Number","getCodeFixesAtPosition","fix","changes","isNewFile","_tsCodeFixActionToMonacoCodeAction","codeFix","_c","textChanges","textChange","action","title","description","RenameAdapter","provideRenameEdits","newName","renameInfo","renameLocations","renameLocations_1","renameLocation","getRenameInfo","allowRenameOfImportPath","canRename","rejectReason","localizedErrorMessage","fileToRename","findRenameLocations","javaScriptWorker","typeScriptWorker","setupTypeScript","setupMode","setupJavaScript","getJavaScriptWorker","getTypeScriptWorker","languageFeatures","registerCompletionItemProvider","registerSignatureHelpProvider","registerHoverProvider","registerDocumentHighlightProvider","registerDefinitionProvider","registerReferenceProvider","registerDocumentSymbolProvider","registerDocumentRangeFormattingEditProvider","registerOnTypeFormattingEditProvider","registerCodeActionProvider","registerRenameProvider","OVERLAY_ID","OldModule","bundle","moduleName","hot","data","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","JSON","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","id","every","generated","js","console","clear","hmrApply","hmrAcceptRun","reload","close","onclose","log","removeErrorOverlay","error","stack","overlay","createErrorOverlay","document","appendChild","getElementById","remove","createElement","stackTrace","innerText","innerHTML","getParents","modules","parents","k","dep","isArray","deps","cached","cache","some","cb"],"mappings":"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","file":"tsMode.36fe6354.js","sourceRoot":"..","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { editor } from './fillers/monaco-editor-core.js';\nvar WorkerManager = /** @class */ (function () {\n    function WorkerManager(modeId, defaults) {\n        var _this = this;\n        this._modeId = modeId;\n        this._defaults = defaults;\n        this._worker = null;\n        this._client = null;\n        this._configChangeListener = this._defaults.onDidChange(function () { return _this._stopWorker(); });\n        this._updateExtraLibsToken = 0;\n        this._extraLibsChangeListener = this._defaults.onDidExtraLibsChange(function () {\n            return _this._updateExtraLibs();\n        });\n    }\n    WorkerManager.prototype._stopWorker = function () {\n        if (this._worker) {\n            this._worker.dispose();\n            this._worker = null;\n        }\n        this._client = null;\n    };\n    WorkerManager.prototype.dispose = function () {\n        this._configChangeListener.dispose();\n        this._extraLibsChangeListener.dispose();\n        this._stopWorker();\n    };\n    WorkerManager.prototype._updateExtraLibs = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var myToken, proxy;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!this._worker) {\n                            return [2 /*return*/];\n                        }\n                        myToken = ++this._updateExtraLibsToken;\n                        return [4 /*yield*/, this._worker.getProxy()];\n                    case 1:\n                        proxy = _a.sent();\n                        if (this._updateExtraLibsToken !== myToken) {\n                            // avoid multiple calls\n                            return [2 /*return*/];\n                        }\n                        proxy.updateExtraLibs(this._defaults.getExtraLibs());\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    WorkerManager.prototype._getClient = function () {\n        var _this = this;\n        if (!this._client) {\n            this._worker = editor.createWebWorker({\n                // module that exports the create() method and returns a `TypeScriptWorker` instance\n                moduleId: 'vs/language/typescript/tsWorker',\n                label: this._modeId,\n                keepIdleModels: true,\n                // passed in to the create() method\n                createData: {\n                    compilerOptions: this._defaults.getCompilerOptions(),\n                    extraLibs: this._defaults.getExtraLibs(),\n                    customWorkerPath: this._defaults.workerOptions.customWorkerPath\n                }\n            });\n            var p = this._worker.getProxy();\n            if (this._defaults.getEagerModelSync()) {\n                p = p.then(function (worker) {\n                    if (_this._worker) {\n                        return _this._worker.withSyncedResources(editor\n                            .getModels()\n                            .filter(function (model) { return model.getModeId() === _this._modeId; })\n                            .map(function (model) { return model.uri; }));\n                    }\n                    return worker;\n                });\n            }\n            this._client = p;\n        }\n        return this._client;\n    };\n    WorkerManager.prototype.getLanguageServiceWorker = function () {\n        var _this = this;\n        var resources = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            resources[_i] = arguments[_i];\n        }\n        var _client;\n        return this._getClient()\n            .then(function (client) {\n            _client = client;\n        })\n            .then(function (_) {\n            if (_this._worker) {\n                return _this._worker.withSyncedResources(resources);\n            }\n        })\n            .then(function (_) { return _client; });\n    };\n    return WorkerManager;\n}());\nexport { WorkerManager };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n//\n// **NOTE**: Do not edit directly! This file is generated using `npm run import-typescript`\n//\n/** Contains all the lib files */\nexport var libFileSet = {};\nlibFileSet['lib.d.ts'] = true;\nlibFileSet['lib.dom.d.ts'] = true;\nlibFileSet['lib.dom.iterable.d.ts'] = true;\nlibFileSet['lib.es2015.collection.d.ts'] = true;\nlibFileSet['lib.es2015.core.d.ts'] = true;\nlibFileSet['lib.es2015.d.ts'] = true;\nlibFileSet['lib.es2015.generator.d.ts'] = true;\nlibFileSet['lib.es2015.iterable.d.ts'] = true;\nlibFileSet['lib.es2015.promise.d.ts'] = true;\nlibFileSet['lib.es2015.proxy.d.ts'] = true;\nlibFileSet['lib.es2015.reflect.d.ts'] = true;\nlibFileSet['lib.es2015.symbol.d.ts'] = true;\nlibFileSet['lib.es2015.symbol.wellknown.d.ts'] = true;\nlibFileSet['lib.es2016.array.include.d.ts'] = true;\nlibFileSet['lib.es2016.d.ts'] = true;\nlibFileSet['lib.es2016.full.d.ts'] = true;\nlibFileSet['lib.es2017.d.ts'] = true;\nlibFileSet['lib.es2017.full.d.ts'] = true;\nlibFileSet['lib.es2017.intl.d.ts'] = true;\nlibFileSet['lib.es2017.object.d.ts'] = true;\nlibFileSet['lib.es2017.sharedmemory.d.ts'] = true;\nlibFileSet['lib.es2017.string.d.ts'] = true;\nlibFileSet['lib.es2017.typedarrays.d.ts'] = true;\nlibFileSet['lib.es2018.asyncgenerator.d.ts'] = true;\nlibFileSet['lib.es2018.asynciterable.d.ts'] = true;\nlibFileSet['lib.es2018.d.ts'] = true;\nlibFileSet['lib.es2018.full.d.ts'] = true;\nlibFileSet['lib.es2018.intl.d.ts'] = true;\nlibFileSet['lib.es2018.promise.d.ts'] = true;\nlibFileSet['lib.es2018.regexp.d.ts'] = true;\nlibFileSet['lib.es2019.array.d.ts'] = true;\nlibFileSet['lib.es2019.d.ts'] = true;\nlibFileSet['lib.es2019.full.d.ts'] = true;\nlibFileSet['lib.es2019.object.d.ts'] = true;\nlibFileSet['lib.es2019.string.d.ts'] = true;\nlibFileSet['lib.es2019.symbol.d.ts'] = true;\nlibFileSet['lib.es2020.bigint.d.ts'] = true;\nlibFileSet['lib.es2020.d.ts'] = true;\nlibFileSet['lib.es2020.full.d.ts'] = true;\nlibFileSet['lib.es2020.intl.d.ts'] = true;\nlibFileSet['lib.es2020.promise.d.ts'] = true;\nlibFileSet['lib.es2020.string.d.ts'] = true;\nlibFileSet['lib.es2020.symbol.wellknown.d.ts'] = true;\nlibFileSet['lib.es5.d.ts'] = true;\nlibFileSet['lib.es6.d.ts'] = true;\nlibFileSet['lib.esnext.d.ts'] = true;\nlibFileSet['lib.esnext.full.d.ts'] = true;\nlibFileSet['lib.esnext.intl.d.ts'] = true;\nlibFileSet['lib.esnext.promise.d.ts'] = true;\nlibFileSet['lib.esnext.string.d.ts'] = true;\nlibFileSet['lib.scripthost.d.ts'] = true;\nlibFileSet['lib.webworker.d.ts'] = true;\nlibFileSet['lib.webworker.importscripts.d.ts'] = true;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { libFileSet } from './lib/lib.index.js';\nimport { editor, languages, Uri, Range, MarkerTag, MarkerSeverity } from './fillers/monaco-editor-core.js';\n//#region utils copied from typescript to prevent loading the entire typescriptServices ---\nvar IndentStyle;\n(function (IndentStyle) {\n    IndentStyle[IndentStyle[\"None\"] = 0] = \"None\";\n    IndentStyle[IndentStyle[\"Block\"] = 1] = \"Block\";\n    IndentStyle[IndentStyle[\"Smart\"] = 2] = \"Smart\";\n})(IndentStyle || (IndentStyle = {}));\nexport function flattenDiagnosticMessageText(diag, newLine, indent) {\n    if (indent === void 0) { indent = 0; }\n    if (typeof diag === 'string') {\n        return diag;\n    }\n    else if (diag === undefined) {\n        return '';\n    }\n    var result = '';\n    if (indent) {\n        result += newLine;\n        for (var i = 0; i < indent; i++) {\n            result += '  ';\n        }\n    }\n    result += diag.messageText;\n    indent++;\n    if (diag.next) {\n        for (var _i = 0, _a = diag.next; _i < _a.length; _i++) {\n            var kid = _a[_i];\n            result += flattenDiagnosticMessageText(kid, newLine, indent);\n        }\n    }\n    return result;\n}\nfunction displayPartsToString(displayParts) {\n    if (displayParts) {\n        return displayParts.map(function (displayPart) { return displayPart.text; }).join('');\n    }\n    return '';\n}\n//#endregion\nvar Adapter = /** @class */ (function () {\n    function Adapter(_worker) {\n        this._worker = _worker;\n    }\n    // protected _positionToOffset(model: editor.ITextModel, position: monaco.IPosition): number {\n    // \treturn model.getOffsetAt(position);\n    // }\n    // protected _offsetToPosition(model: editor.ITextModel, offset: number): monaco.IPosition {\n    // \treturn model.getPositionAt(offset);\n    // }\n    Adapter.prototype._textSpanToRange = function (model, span) {\n        var p1 = model.getPositionAt(span.start);\n        var p2 = model.getPositionAt(span.start + span.length);\n        var startLineNumber = p1.lineNumber, startColumn = p1.column;\n        var endLineNumber = p2.lineNumber, endColumn = p2.column;\n        return { startLineNumber: startLineNumber, startColumn: startColumn, endLineNumber: endLineNumber, endColumn: endColumn };\n    };\n    return Adapter;\n}());\nexport { Adapter };\n// --- lib files\nvar LibFiles = /** @class */ (function () {\n    function LibFiles(_worker) {\n        this._worker = _worker;\n        this._libFiles = {};\n        this._hasFetchedLibFiles = false;\n        this._fetchLibFilesPromise = null;\n    }\n    LibFiles.prototype.isLibFile = function (uri) {\n        if (!uri) {\n            return false;\n        }\n        if (uri.path.indexOf('/lib.') === 0) {\n            return !!libFileSet[uri.path.slice(1)];\n        }\n        return false;\n    };\n    LibFiles.prototype.getOrCreateModel = function (uri) {\n        var model = editor.getModel(uri);\n        if (model) {\n            return model;\n        }\n        if (this.isLibFile(uri) && this._hasFetchedLibFiles) {\n            return editor.createModel(this._libFiles[uri.path.slice(1)], 'javascript', uri);\n        }\n        return null;\n    };\n    LibFiles.prototype._containsLibFile = function (uris) {\n        for (var _i = 0, uris_1 = uris; _i < uris_1.length; _i++) {\n            var uri = uris_1[_i];\n            if (this.isLibFile(uri)) {\n                return true;\n            }\n        }\n        return false;\n    };\n    LibFiles.prototype.fetchLibFilesIfNecessary = function (uris) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!this._containsLibFile(uris)) {\n                            // no lib files necessary\n                            return [2 /*return*/];\n                        }\n                        return [4 /*yield*/, this._fetchLibFiles()];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    LibFiles.prototype._fetchLibFiles = function () {\n        var _this = this;\n        if (!this._fetchLibFilesPromise) {\n            this._fetchLibFilesPromise = this._worker()\n                .then(function (w) { return w.getLibFiles(); })\n                .then(function (libFiles) {\n                _this._hasFetchedLibFiles = true;\n                _this._libFiles = libFiles;\n            });\n        }\n        return this._fetchLibFilesPromise;\n    };\n    return LibFiles;\n}());\nexport { LibFiles };\n// --- diagnostics --- ---\nvar DiagnosticCategory;\n(function (DiagnosticCategory) {\n    DiagnosticCategory[DiagnosticCategory[\"Warning\"] = 0] = \"Warning\";\n    DiagnosticCategory[DiagnosticCategory[\"Error\"] = 1] = \"Error\";\n    DiagnosticCategory[DiagnosticCategory[\"Suggestion\"] = 2] = \"Suggestion\";\n    DiagnosticCategory[DiagnosticCategory[\"Message\"] = 3] = \"Message\";\n})(DiagnosticCategory || (DiagnosticCategory = {}));\nvar DiagnosticsAdapter = /** @class */ (function (_super) {\n    __extends(DiagnosticsAdapter, _super);\n    function DiagnosticsAdapter(_libFiles, _defaults, _selector, worker) {\n        var _this = _super.call(this, worker) || this;\n        _this._libFiles = _libFiles;\n        _this._defaults = _defaults;\n        _this._selector = _selector;\n        _this._disposables = [];\n        _this._listener = Object.create(null);\n        var onModelAdd = function (model) {\n            if (model.getModeId() !== _selector) {\n                return;\n            }\n            var handle;\n            var changeSubscription = model.onDidChangeContent(function () {\n                clearTimeout(handle);\n                handle = setTimeout(function () { return _this._doValidate(model); }, 500);\n            });\n            _this._listener[model.uri.toString()] = {\n                dispose: function () {\n                    changeSubscription.dispose();\n                    clearTimeout(handle);\n                }\n            };\n            _this._doValidate(model);\n        };\n        var onModelRemoved = function (model) {\n            editor.setModelMarkers(model, _this._selector, []);\n            var key = model.uri.toString();\n            if (_this._listener[key]) {\n                _this._listener[key].dispose();\n                delete _this._listener[key];\n            }\n        };\n        _this._disposables.push(editor.onDidCreateModel(onModelAdd));\n        _this._disposables.push(editor.onWillDisposeModel(onModelRemoved));\n        _this._disposables.push(editor.onDidChangeModelLanguage(function (event) {\n            onModelRemoved(event.model);\n            onModelAdd(event.model);\n        }));\n        _this._disposables.push({\n            dispose: function () {\n                for (var _i = 0, _a = editor.getModels(); _i < _a.length; _i++) {\n                    var model = _a[_i];\n                    onModelRemoved(model);\n                }\n            }\n        });\n        var recomputeDiagostics = function () {\n            // redo diagnostics when options change\n            for (var _i = 0, _a = editor.getModels(); _i < _a.length; _i++) {\n                var model = _a[_i];\n                onModelRemoved(model);\n                onModelAdd(model);\n            }\n        };\n        _this._disposables.push(_this._defaults.onDidChange(recomputeDiagostics));\n        _this._disposables.push(_this._defaults.onDidExtraLibsChange(recomputeDiagostics));\n        editor.getModels().forEach(onModelAdd);\n        return _this;\n    }\n    DiagnosticsAdapter.prototype.dispose = function () {\n        this._disposables.forEach(function (d) { return d && d.dispose(); });\n        this._disposables = [];\n    };\n    DiagnosticsAdapter.prototype._doValidate = function (model) {\n        return __awaiter(this, void 0, void 0, function () {\n            var worker, promises, _a, noSyntaxValidation, noSemanticValidation, noSuggestionDiagnostics, allDiagnostics, diagnostics, relatedUris;\n            var _this = this;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0: return [4 /*yield*/, this._worker(model.uri)];\n                    case 1:\n                        worker = _b.sent();\n                        if (model.isDisposed()) {\n                            // model was disposed in the meantime\n                            return [2 /*return*/];\n                        }\n                        promises = [];\n                        _a = this._defaults.getDiagnosticsOptions(), noSyntaxValidation = _a.noSyntaxValidation, noSemanticValidation = _a.noSemanticValidation, noSuggestionDiagnostics = _a.noSuggestionDiagnostics;\n                        if (!noSyntaxValidation) {\n                            promises.push(worker.getSyntacticDiagnostics(model.uri.toString()));\n                        }\n                        if (!noSemanticValidation) {\n                            promises.push(worker.getSemanticDiagnostics(model.uri.toString()));\n                        }\n                        if (!noSuggestionDiagnostics) {\n                            promises.push(worker.getSuggestionDiagnostics(model.uri.toString()));\n                        }\n                        return [4 /*yield*/, Promise.all(promises)];\n                    case 2:\n                        allDiagnostics = _b.sent();\n                        if (!allDiagnostics || model.isDisposed()) {\n                            // model was disposed in the meantime\n                            return [2 /*return*/];\n                        }\n                        diagnostics = allDiagnostics\n                            .reduce(function (p, c) { return c.concat(p); }, [])\n                            .filter(function (d) {\n                            return (_this._defaults.getDiagnosticsOptions().diagnosticCodesToIgnore || []).indexOf(d.code) ===\n                                -1;\n                        });\n                        relatedUris = diagnostics\n                            .map(function (d) { return d.relatedInformation || []; })\n                            .reduce(function (p, c) { return c.concat(p); }, [])\n                            .map(function (relatedInformation) {\n                            return relatedInformation.file ? Uri.parse(relatedInformation.file.fileName) : null;\n                        });\n                        return [4 /*yield*/, this._libFiles.fetchLibFilesIfNecessary(relatedUris)];\n                    case 3:\n                        _b.sent();\n                        if (model.isDisposed()) {\n                            // model was disposed in the meantime\n                            return [2 /*return*/];\n                        }\n                        editor.setModelMarkers(model, this._selector, diagnostics.map(function (d) { return _this._convertDiagnostics(model, d); }));\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    DiagnosticsAdapter.prototype._convertDiagnostics = function (model, diag) {\n        var diagStart = diag.start || 0;\n        var diagLength = diag.length || 1;\n        var _a = model.getPositionAt(diagStart), startLineNumber = _a.lineNumber, startColumn = _a.column;\n        var _b = model.getPositionAt(diagStart + diagLength), endLineNumber = _b.lineNumber, endColumn = _b.column;\n        var tags = [];\n        if (diag.reportsUnnecessary) {\n            tags.push(MarkerTag.Unnecessary);\n        }\n        if (diag.reportsDeprecated) {\n            tags.push(MarkerTag.Deprecated);\n        }\n        return {\n            severity: this._tsDiagnosticCategoryToMarkerSeverity(diag.category),\n            startLineNumber: startLineNumber,\n            startColumn: startColumn,\n            endLineNumber: endLineNumber,\n            endColumn: endColumn,\n            message: flattenDiagnosticMessageText(diag.messageText, '\\n'),\n            code: diag.code.toString(),\n            tags: tags,\n            relatedInformation: this._convertRelatedInformation(model, diag.relatedInformation)\n        };\n    };\n    DiagnosticsAdapter.prototype._convertRelatedInformation = function (model, relatedInformation) {\n        var _this = this;\n        if (!relatedInformation) {\n            return;\n        }\n        var result = [];\n        relatedInformation.forEach(function (info) {\n            var relatedResource = model;\n            if (info.file) {\n                var relatedResourceUri = Uri.parse(info.file.fileName);\n                relatedResource = _this._libFiles.getOrCreateModel(relatedResourceUri);\n            }\n            if (!relatedResource) {\n                return;\n            }\n            var infoStart = info.start || 0;\n            var infoLength = info.length || 1;\n            var _a = relatedResource.getPositionAt(infoStart), startLineNumber = _a.lineNumber, startColumn = _a.column;\n            var _b = relatedResource.getPositionAt(infoStart + infoLength), endLineNumber = _b.lineNumber, endColumn = _b.column;\n            result.push({\n                resource: relatedResource.uri,\n                startLineNumber: startLineNumber,\n                startColumn: startColumn,\n                endLineNumber: endLineNumber,\n                endColumn: endColumn,\n                message: flattenDiagnosticMessageText(info.messageText, '\\n')\n            });\n        });\n        return result;\n    };\n    DiagnosticsAdapter.prototype._tsDiagnosticCategoryToMarkerSeverity = function (category) {\n        switch (category) {\n            case DiagnosticCategory.Error:\n                return MarkerSeverity.Error;\n            case DiagnosticCategory.Message:\n                return MarkerSeverity.Info;\n            case DiagnosticCategory.Warning:\n                return MarkerSeverity.Warning;\n            case DiagnosticCategory.Suggestion:\n                return MarkerSeverity.Hint;\n        }\n        return MarkerSeverity.Info;\n    };\n    return DiagnosticsAdapter;\n}(Adapter));\nexport { DiagnosticsAdapter };\nvar SuggestAdapter = /** @class */ (function (_super) {\n    __extends(SuggestAdapter, _super);\n    function SuggestAdapter() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Object.defineProperty(SuggestAdapter.prototype, \"triggerCharacters\", {\n        get: function () {\n            return ['.'];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SuggestAdapter.prototype.provideCompletionItems = function (model, position, _context, token) {\n        return __awaiter(this, void 0, void 0, function () {\n            var wordInfo, wordRange, resource, offset, worker, info, suggestions;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        wordInfo = model.getWordUntilPosition(position);\n                        wordRange = new Range(position.lineNumber, wordInfo.startColumn, position.lineNumber, wordInfo.endColumn);\n                        resource = model.uri;\n                        offset = model.getOffsetAt(position);\n                        return [4 /*yield*/, this._worker(resource)];\n                    case 1:\n                        worker = _a.sent();\n                        return [4 /*yield*/, worker.getCompletionsAtPosition(resource.toString(), offset)];\n                    case 2:\n                        info = _a.sent();\n                        if (!info || model.isDisposed()) {\n                            return [2 /*return*/];\n                        }\n                        suggestions = info.entries.map(function (entry) {\n                            var _a;\n                            var range = wordRange;\n                            if (entry.replacementSpan) {\n                                var p1 = model.getPositionAt(entry.replacementSpan.start);\n                                var p2 = model.getPositionAt(entry.replacementSpan.start + entry.replacementSpan.length);\n                                range = new Range(p1.lineNumber, p1.column, p2.lineNumber, p2.column);\n                            }\n                            var tags = [];\n                            if (((_a = entry.kindModifiers) === null || _a === void 0 ? void 0 : _a.indexOf('deprecated')) !== -1) {\n                                tags.push(languages.CompletionItemTag.Deprecated);\n                            }\n                            return {\n                                uri: resource,\n                                position: position,\n                                offset: offset,\n                                range: range,\n                                label: entry.name,\n                                insertText: entry.name,\n                                sortText: entry.sortText,\n                                kind: SuggestAdapter.convertKind(entry.kind),\n                                tags: tags\n                            };\n                        });\n                        return [2 /*return*/, {\n                                suggestions: suggestions\n                            }];\n                }\n            });\n        });\n    };\n    SuggestAdapter.prototype.resolveCompletionItem = function (item, token) {\n        return __awaiter(this, void 0, void 0, function () {\n            var myItem, resource, position, offset, worker, details;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        myItem = item;\n                        resource = myItem.uri;\n                        position = myItem.position;\n                        offset = myItem.offset;\n                        return [4 /*yield*/, this._worker(resource)];\n                    case 1:\n                        worker = _a.sent();\n                        return [4 /*yield*/, worker.getCompletionEntryDetails(resource.toString(), offset, myItem.label)];\n                    case 2:\n                        details = _a.sent();\n                        if (!details) {\n                            return [2 /*return*/, myItem];\n                        }\n                        return [2 /*return*/, {\n                                uri: resource,\n                                position: position,\n                                label: details.name,\n                                kind: SuggestAdapter.convertKind(details.kind),\n                                detail: displayPartsToString(details.displayParts),\n                                documentation: {\n                                    value: SuggestAdapter.createDocumentationString(details)\n                                }\n                            }];\n                }\n            });\n        });\n    };\n    SuggestAdapter.convertKind = function (kind) {\n        switch (kind) {\n            case Kind.primitiveType:\n            case Kind.keyword:\n                return languages.CompletionItemKind.Keyword;\n            case Kind.variable:\n            case Kind.localVariable:\n                return languages.CompletionItemKind.Variable;\n            case Kind.memberVariable:\n            case Kind.memberGetAccessor:\n            case Kind.memberSetAccessor:\n                return languages.CompletionItemKind.Field;\n            case Kind.function:\n            case Kind.memberFunction:\n            case Kind.constructSignature:\n            case Kind.callSignature:\n            case Kind.indexSignature:\n                return languages.CompletionItemKind.Function;\n            case Kind.enum:\n                return languages.CompletionItemKind.Enum;\n            case Kind.module:\n                return languages.CompletionItemKind.Module;\n            case Kind.class:\n                return languages.CompletionItemKind.Class;\n            case Kind.interface:\n                return languages.CompletionItemKind.Interface;\n            case Kind.warning:\n                return languages.CompletionItemKind.File;\n        }\n        return languages.CompletionItemKind.Property;\n    };\n    SuggestAdapter.createDocumentationString = function (details) {\n        var documentationString = displayPartsToString(details.documentation);\n        if (details.tags) {\n            for (var _i = 0, _a = details.tags; _i < _a.length; _i++) {\n                var tag = _a[_i];\n                documentationString += \"\\n\\n\" + tagToString(tag);\n            }\n        }\n        return documentationString;\n    };\n    return SuggestAdapter;\n}(Adapter));\nexport { SuggestAdapter };\nfunction tagToString(tag) {\n    var tagLabel = \"*@\" + tag.name + \"*\";\n    if (tag.name === 'param' && tag.text) {\n        var _a = tag.text.split(' '), paramName = _a[0], rest = _a.slice(1);\n        tagLabel += \"`\" + paramName + \"`\";\n        if (rest.length > 0)\n            tagLabel += \" \\u2014 \" + rest.join(' ');\n    }\n    else if (tag.text) {\n        tagLabel += \" \\u2014 \" + tag.text;\n    }\n    return tagLabel;\n}\nvar SignatureHelpAdapter = /** @class */ (function (_super) {\n    __extends(SignatureHelpAdapter, _super);\n    function SignatureHelpAdapter() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.signatureHelpTriggerCharacters = ['(', ','];\n        return _this;\n    }\n    SignatureHelpAdapter.prototype.provideSignatureHelp = function (model, position, token) {\n        return __awaiter(this, void 0, void 0, function () {\n            var resource, offset, worker, info, ret;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        resource = model.uri;\n                        offset = model.getOffsetAt(position);\n                        return [4 /*yield*/, this._worker(resource)];\n                    case 1:\n                        worker = _a.sent();\n                        return [4 /*yield*/, worker.getSignatureHelpItems(resource.toString(), offset)];\n                    case 2:\n                        info = _a.sent();\n                        if (!info || model.isDisposed()) {\n                            return [2 /*return*/];\n                        }\n                        ret = {\n                            activeSignature: info.selectedItemIndex,\n                            activeParameter: info.argumentIndex,\n                            signatures: []\n                        };\n                        info.items.forEach(function (item) {\n                            var signature = {\n                                label: '',\n                                parameters: []\n                            };\n                            signature.documentation = {\n                                value: displayPartsToString(item.documentation)\n                            };\n                            signature.label += displayPartsToString(item.prefixDisplayParts);\n                            item.parameters.forEach(function (p, i, a) {\n                                var label = displayPartsToString(p.displayParts);\n                                var parameter = {\n                                    label: label,\n                                    documentation: {\n                                        value: displayPartsToString(p.documentation)\n                                    }\n                                };\n                                signature.label += label;\n                                signature.parameters.push(parameter);\n                                if (i < a.length - 1) {\n                                    signature.label += displayPartsToString(item.separatorDisplayParts);\n                                }\n                            });\n                            signature.label += displayPartsToString(item.suffixDisplayParts);\n                            ret.signatures.push(signature);\n                        });\n                        return [2 /*return*/, {\n                                value: ret,\n                                dispose: function () { }\n                            }];\n                }\n            });\n        });\n    };\n    return SignatureHelpAdapter;\n}(Adapter));\nexport { SignatureHelpAdapter };\n// --- hover ------\nvar QuickInfoAdapter = /** @class */ (function (_super) {\n    __extends(QuickInfoAdapter, _super);\n    function QuickInfoAdapter() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    QuickInfoAdapter.prototype.provideHover = function (model, position, token) {\n        return __awaiter(this, void 0, void 0, function () {\n            var resource, offset, worker, info, documentation, tags, contents;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        resource = model.uri;\n                        offset = model.getOffsetAt(position);\n                        return [4 /*yield*/, this._worker(resource)];\n                    case 1:\n                        worker = _a.sent();\n                        return [4 /*yield*/, worker.getQuickInfoAtPosition(resource.toString(), offset)];\n                    case 2:\n                        info = _a.sent();\n                        if (!info || model.isDisposed()) {\n                            return [2 /*return*/];\n                        }\n                        documentation = displayPartsToString(info.documentation);\n                        tags = info.tags ? info.tags.map(function (tag) { return tagToString(tag); }).join('  \\n\\n') : '';\n                        contents = displayPartsToString(info.displayParts);\n                        return [2 /*return*/, {\n                                range: this._textSpanToRange(model, info.textSpan),\n                                contents: [\n                                    {\n                                        value: '```typescript\\n' + contents + '\\n```\\n'\n                                    },\n                                    {\n                                        value: documentation + (tags ? '\\n\\n' + tags : '')\n                                    }\n                                ]\n                            }];\n                }\n            });\n        });\n    };\n    return QuickInfoAdapter;\n}(Adapter));\nexport { QuickInfoAdapter };\n// --- occurrences ------\nvar OccurrencesAdapter = /** @class */ (function (_super) {\n    __extends(OccurrencesAdapter, _super);\n    function OccurrencesAdapter() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    OccurrencesAdapter.prototype.provideDocumentHighlights = function (model, position, token) {\n        return __awaiter(this, void 0, void 0, function () {\n            var resource, offset, worker, entries;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        resource = model.uri;\n                        offset = model.getOffsetAt(position);\n                        return [4 /*yield*/, this._worker(resource)];\n                    case 1:\n                        worker = _a.sent();\n                        return [4 /*yield*/, worker.getOccurrencesAtPosition(resource.toString(), offset)];\n                    case 2:\n                        entries = _a.sent();\n                        if (!entries || model.isDisposed()) {\n                            return [2 /*return*/];\n                        }\n                        return [2 /*return*/, entries.map(function (entry) {\n                                return {\n                                    range: _this._textSpanToRange(model, entry.textSpan),\n                                    kind: entry.isWriteAccess\n                                        ? languages.DocumentHighlightKind.Write\n                                        : languages.DocumentHighlightKind.Text\n                                };\n                            })];\n                }\n            });\n        });\n    };\n    return OccurrencesAdapter;\n}(Adapter));\nexport { OccurrencesAdapter };\n// --- definition ------\nvar DefinitionAdapter = /** @class */ (function (_super) {\n    __extends(DefinitionAdapter, _super);\n    function DefinitionAdapter(_libFiles, worker) {\n        var _this = _super.call(this, worker) || this;\n        _this._libFiles = _libFiles;\n        return _this;\n    }\n    DefinitionAdapter.prototype.provideDefinition = function (model, position, token) {\n        return __awaiter(this, void 0, void 0, function () {\n            var resource, offset, worker, entries, result, _i, entries_1, entry, uri, refModel;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        resource = model.uri;\n                        offset = model.getOffsetAt(position);\n                        return [4 /*yield*/, this._worker(resource)];\n                    case 1:\n                        worker = _a.sent();\n                        return [4 /*yield*/, worker.getDefinitionAtPosition(resource.toString(), offset)];\n                    case 2:\n                        entries = _a.sent();\n                        if (!entries || model.isDisposed()) {\n                            return [2 /*return*/];\n                        }\n                        // Fetch lib files if necessary\n                        return [4 /*yield*/, this._libFiles.fetchLibFilesIfNecessary(entries.map(function (entry) { return Uri.parse(entry.fileName); }))];\n                    case 3:\n                        // Fetch lib files if necessary\n                        _a.sent();\n                        if (model.isDisposed()) {\n                            return [2 /*return*/];\n                        }\n                        result = [];\n                        for (_i = 0, entries_1 = entries; _i < entries_1.length; _i++) {\n                            entry = entries_1[_i];\n                            uri = Uri.parse(entry.fileName);\n                            refModel = this._libFiles.getOrCreateModel(uri);\n                            if (refModel) {\n                                result.push({\n                                    uri: uri,\n                                    range: this._textSpanToRange(refModel, entry.textSpan)\n                                });\n                            }\n                        }\n                        return [2 /*return*/, result];\n                }\n            });\n        });\n    };\n    return DefinitionAdapter;\n}(Adapter));\nexport { DefinitionAdapter };\n// --- references ------\nvar ReferenceAdapter = /** @class */ (function (_super) {\n    __extends(ReferenceAdapter, _super);\n    function ReferenceAdapter(_libFiles, worker) {\n        var _this = _super.call(this, worker) || this;\n        _this._libFiles = _libFiles;\n        return _this;\n    }\n    ReferenceAdapter.prototype.provideReferences = function (model, position, context, token) {\n        return __awaiter(this, void 0, void 0, function () {\n            var resource, offset, worker, entries, result, _i, entries_2, entry, uri, refModel;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        resource = model.uri;\n                        offset = model.getOffsetAt(position);\n                        return [4 /*yield*/, this._worker(resource)];\n                    case 1:\n                        worker = _a.sent();\n                        return [4 /*yield*/, worker.getReferencesAtPosition(resource.toString(), offset)];\n                    case 2:\n                        entries = _a.sent();\n                        if (!entries || model.isDisposed()) {\n                            return [2 /*return*/];\n                        }\n                        // Fetch lib files if necessary\n                        return [4 /*yield*/, this._libFiles.fetchLibFilesIfNecessary(entries.map(function (entry) { return Uri.parse(entry.fileName); }))];\n                    case 3:\n                        // Fetch lib files if necessary\n                        _a.sent();\n                        if (model.isDisposed()) {\n                            return [2 /*return*/];\n                        }\n                        result = [];\n                        for (_i = 0, entries_2 = entries; _i < entries_2.length; _i++) {\n                            entry = entries_2[_i];\n                            uri = Uri.parse(entry.fileName);\n                            refModel = this._libFiles.getOrCreateModel(uri);\n                            if (refModel) {\n                                result.push({\n                                    uri: uri,\n                                    range: this._textSpanToRange(refModel, entry.textSpan)\n                                });\n                            }\n                        }\n                        return [2 /*return*/, result];\n                }\n            });\n        });\n    };\n    return ReferenceAdapter;\n}(Adapter));\nexport { ReferenceAdapter };\n// --- outline ------\nvar OutlineAdapter = /** @class */ (function (_super) {\n    __extends(OutlineAdapter, _super);\n    function OutlineAdapter() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    OutlineAdapter.prototype.provideDocumentSymbols = function (model, token) {\n        return __awaiter(this, void 0, void 0, function () {\n            var resource, worker, items, convert, result;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        resource = model.uri;\n                        return [4 /*yield*/, this._worker(resource)];\n                    case 1:\n                        worker = _a.sent();\n                        return [4 /*yield*/, worker.getNavigationBarItems(resource.toString())];\n                    case 2:\n                        items = _a.sent();\n                        if (!items || model.isDisposed()) {\n                            return [2 /*return*/];\n                        }\n                        convert = function (bucket, item, containerLabel) {\n                            var result = {\n                                name: item.text,\n                                detail: '',\n                                kind: (outlineTypeTable[item.kind] || languages.SymbolKind.Variable),\n                                range: _this._textSpanToRange(model, item.spans[0]),\n                                selectionRange: _this._textSpanToRange(model, item.spans[0]),\n                                tags: [],\n                                containerName: containerLabel\n                            };\n                            if (item.childItems && item.childItems.length > 0) {\n                                for (var _i = 0, _a = item.childItems; _i < _a.length; _i++) {\n                                    var child = _a[_i];\n                                    convert(bucket, child, result.name);\n                                }\n                            }\n                            bucket.push(result);\n                        };\n                        result = [];\n                        items.forEach(function (item) { return convert(result, item); });\n                        return [2 /*return*/, result];\n                }\n            });\n        });\n    };\n    return OutlineAdapter;\n}(Adapter));\nexport { OutlineAdapter };\nvar Kind = /** @class */ (function () {\n    function Kind() {\n    }\n    Kind.unknown = '';\n    Kind.keyword = 'keyword';\n    Kind.script = 'script';\n    Kind.module = 'module';\n    Kind.class = 'class';\n    Kind.interface = 'interface';\n    Kind.type = 'type';\n    Kind.enum = 'enum';\n    Kind.variable = 'var';\n    Kind.localVariable = 'local var';\n    Kind.function = 'function';\n    Kind.localFunction = 'local function';\n    Kind.memberFunction = 'method';\n    Kind.memberGetAccessor = 'getter';\n    Kind.memberSetAccessor = 'setter';\n    Kind.memberVariable = 'property';\n    Kind.constructorImplementation = 'constructor';\n    Kind.callSignature = 'call';\n    Kind.indexSignature = 'index';\n    Kind.constructSignature = 'construct';\n    Kind.parameter = 'parameter';\n    Kind.typeParameter = 'type parameter';\n    Kind.primitiveType = 'primitive type';\n    Kind.label = 'label';\n    Kind.alias = 'alias';\n    Kind.const = 'const';\n    Kind.let = 'let';\n    Kind.warning = 'warning';\n    return Kind;\n}());\nexport { Kind };\nvar outlineTypeTable = Object.create(null);\noutlineTypeTable[Kind.module] = languages.SymbolKind.Module;\noutlineTypeTable[Kind.class] = languages.SymbolKind.Class;\noutlineTypeTable[Kind.enum] = languages.SymbolKind.Enum;\noutlineTypeTable[Kind.interface] = languages.SymbolKind.Interface;\noutlineTypeTable[Kind.memberFunction] = languages.SymbolKind.Method;\noutlineTypeTable[Kind.memberVariable] = languages.SymbolKind.Property;\noutlineTypeTable[Kind.memberGetAccessor] = languages.SymbolKind.Property;\noutlineTypeTable[Kind.memberSetAccessor] = languages.SymbolKind.Property;\noutlineTypeTable[Kind.variable] = languages.SymbolKind.Variable;\noutlineTypeTable[Kind.const] = languages.SymbolKind.Variable;\noutlineTypeTable[Kind.localVariable] = languages.SymbolKind.Variable;\noutlineTypeTable[Kind.variable] = languages.SymbolKind.Variable;\noutlineTypeTable[Kind.function] = languages.SymbolKind.Function;\noutlineTypeTable[Kind.localFunction] = languages.SymbolKind.Function;\n// --- formatting ----\nvar FormatHelper = /** @class */ (function (_super) {\n    __extends(FormatHelper, _super);\n    function FormatHelper() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    FormatHelper._convertOptions = function (options) {\n        return {\n            ConvertTabsToSpaces: options.insertSpaces,\n            TabSize: options.tabSize,\n            IndentSize: options.tabSize,\n            IndentStyle: IndentStyle.Smart,\n            NewLineCharacter: '\\n',\n            InsertSpaceAfterCommaDelimiter: true,\n            InsertSpaceAfterSemicolonInForStatements: true,\n            InsertSpaceBeforeAndAfterBinaryOperators: true,\n            InsertSpaceAfterKeywordsInControlFlowStatements: true,\n            InsertSpaceAfterFunctionKeywordForAnonymousFunctions: true,\n            InsertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis: false,\n            InsertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets: false,\n            InsertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces: false,\n            PlaceOpenBraceOnNewLineForControlBlocks: false,\n            PlaceOpenBraceOnNewLineForFunctions: false\n        };\n    };\n    FormatHelper.prototype._convertTextChanges = function (model, change) {\n        return {\n            text: change.newText,\n            range: this._textSpanToRange(model, change.span)\n        };\n    };\n    return FormatHelper;\n}(Adapter));\nexport { FormatHelper };\nvar FormatAdapter = /** @class */ (function (_super) {\n    __extends(FormatAdapter, _super);\n    function FormatAdapter() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    FormatAdapter.prototype.provideDocumentRangeFormattingEdits = function (model, range, options, token) {\n        return __awaiter(this, void 0, void 0, function () {\n            var resource, startOffset, endOffset, worker, edits;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        resource = model.uri;\n                        startOffset = model.getOffsetAt({\n                            lineNumber: range.startLineNumber,\n                            column: range.startColumn\n                        });\n                        endOffset = model.getOffsetAt({\n                            lineNumber: range.endLineNumber,\n                            column: range.endColumn\n                        });\n                        return [4 /*yield*/, this._worker(resource)];\n                    case 1:\n                        worker = _a.sent();\n                        return [4 /*yield*/, worker.getFormattingEditsForRange(resource.toString(), startOffset, endOffset, FormatHelper._convertOptions(options))];\n                    case 2:\n                        edits = _a.sent();\n                        if (!edits || model.isDisposed()) {\n                            return [2 /*return*/];\n                        }\n                        return [2 /*return*/, edits.map(function (edit) { return _this._convertTextChanges(model, edit); })];\n                }\n            });\n        });\n    };\n    return FormatAdapter;\n}(FormatHelper));\nexport { FormatAdapter };\nvar FormatOnTypeAdapter = /** @class */ (function (_super) {\n    __extends(FormatOnTypeAdapter, _super);\n    function FormatOnTypeAdapter() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Object.defineProperty(FormatOnTypeAdapter.prototype, \"autoFormatTriggerCharacters\", {\n        get: function () {\n            return [';', '}', '\\n'];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FormatOnTypeAdapter.prototype.provideOnTypeFormattingEdits = function (model, position, ch, options, token) {\n        return __awaiter(this, void 0, void 0, function () {\n            var resource, offset, worker, edits;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        resource = model.uri;\n                        offset = model.getOffsetAt(position);\n                        return [4 /*yield*/, this._worker(resource)];\n                    case 1:\n                        worker = _a.sent();\n                        return [4 /*yield*/, worker.getFormattingEditsAfterKeystroke(resource.toString(), offset, ch, FormatHelper._convertOptions(options))];\n                    case 2:\n                        edits = _a.sent();\n                        if (!edits || model.isDisposed()) {\n                            return [2 /*return*/];\n                        }\n                        return [2 /*return*/, edits.map(function (edit) { return _this._convertTextChanges(model, edit); })];\n                }\n            });\n        });\n    };\n    return FormatOnTypeAdapter;\n}(FormatHelper));\nexport { FormatOnTypeAdapter };\n// --- code actions ------\nvar CodeActionAdaptor = /** @class */ (function (_super) {\n    __extends(CodeActionAdaptor, _super);\n    function CodeActionAdaptor() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    CodeActionAdaptor.prototype.provideCodeActions = function (model, range, context, token) {\n        return __awaiter(this, void 0, void 0, function () {\n            var resource, start, end, formatOptions, errorCodes, worker, codeFixes, actions;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        resource = model.uri;\n                        start = model.getOffsetAt({\n                            lineNumber: range.startLineNumber,\n                            column: range.startColumn\n                        });\n                        end = model.getOffsetAt({\n                            lineNumber: range.endLineNumber,\n                            column: range.endColumn\n                        });\n                        formatOptions = FormatHelper._convertOptions(model.getOptions());\n                        errorCodes = context.markers\n                            .filter(function (m) { return m.code; })\n                            .map(function (m) { return m.code; })\n                            .map(Number);\n                        return [4 /*yield*/, this._worker(resource)];\n                    case 1:\n                        worker = _a.sent();\n                        return [4 /*yield*/, worker.getCodeFixesAtPosition(resource.toString(), start, end, errorCodes, formatOptions)];\n                    case 2:\n                        codeFixes = _a.sent();\n                        if (!codeFixes || model.isDisposed()) {\n                            return [2 /*return*/, { actions: [], dispose: function () { } }];\n                        }\n                        actions = codeFixes\n                            .filter(function (fix) {\n                            // Removes any 'make a new file'-type code fix\n                            return fix.changes.filter(function (change) { return change.isNewFile; }).length === 0;\n                        })\n                            .map(function (fix) {\n                            return _this._tsCodeFixActionToMonacoCodeAction(model, context, fix);\n                        });\n                        return [2 /*return*/, {\n                                actions: actions,\n                                dispose: function () { }\n                            }];\n                }\n            });\n        });\n    };\n    CodeActionAdaptor.prototype._tsCodeFixActionToMonacoCodeAction = function (model, context, codeFix) {\n        var edits = [];\n        for (var _i = 0, _a = codeFix.changes; _i < _a.length; _i++) {\n            var change = _a[_i];\n            for (var _b = 0, _c = change.textChanges; _b < _c.length; _b++) {\n                var textChange = _c[_b];\n                edits.push({\n                    resource: model.uri,\n                    edit: {\n                        range: this._textSpanToRange(model, textChange.span),\n                        text: textChange.newText\n                    }\n                });\n            }\n        }\n        var action = {\n            title: codeFix.description,\n            edit: { edits: edits },\n            diagnostics: context.markers,\n            kind: 'quickfix'\n        };\n        return action;\n    };\n    return CodeActionAdaptor;\n}(FormatHelper));\nexport { CodeActionAdaptor };\n// --- rename ----\nvar RenameAdapter = /** @class */ (function (_super) {\n    __extends(RenameAdapter, _super);\n    function RenameAdapter() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    RenameAdapter.prototype.provideRenameEdits = function (model, position, newName, token) {\n        return __awaiter(this, void 0, void 0, function () {\n            var resource, fileName, offset, worker, renameInfo, renameLocations, edits, _i, renameLocations_1, renameLocation;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        resource = model.uri;\n                        fileName = resource.toString();\n                        offset = model.getOffsetAt(position);\n                        return [4 /*yield*/, this._worker(resource)];\n                    case 1:\n                        worker = _a.sent();\n                        return [4 /*yield*/, worker.getRenameInfo(fileName, offset, {\n                                allowRenameOfImportPath: false\n                            })];\n                    case 2:\n                        renameInfo = _a.sent();\n                        if (renameInfo.canRename === false) {\n                            // use explicit comparison so that the discriminated union gets resolved properly\n                            return [2 /*return*/, {\n                                    edits: [],\n                                    rejectReason: renameInfo.localizedErrorMessage\n                                }];\n                        }\n                        if (renameInfo.fileToRename !== undefined) {\n                            throw new Error('Renaming files is not supported.');\n                        }\n                        return [4 /*yield*/, worker.findRenameLocations(fileName, offset, \n                            /*strings*/ false, \n                            /*comments*/ false, \n                            /*prefixAndSuffix*/ false)];\n                    case 3:\n                        renameLocations = _a.sent();\n                        if (!renameLocations || model.isDisposed()) {\n                            return [2 /*return*/];\n                        }\n                        edits = [];\n                        for (_i = 0, renameLocations_1 = renameLocations; _i < renameLocations_1.length; _i++) {\n                            renameLocation = renameLocations_1[_i];\n                            edits.push({\n                                resource: Uri.parse(renameLocation.fileName),\n                                edit: {\n                                    range: this._textSpanToRange(model, renameLocation.textSpan),\n                                    text: newName\n                                }\n                            });\n                        }\n                        return [2 /*return*/, { edits: edits }];\n                }\n            });\n        });\n    };\n    return RenameAdapter;\n}(Adapter));\nexport { RenameAdapter };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nimport { WorkerManager } from './workerManager.js';\nimport * as languageFeatures from './languageFeatures.js';\nimport { languages } from './fillers/monaco-editor-core.js';\nvar javaScriptWorker;\nvar typeScriptWorker;\nexport function setupTypeScript(defaults) {\n    typeScriptWorker = setupMode(defaults, 'typescript');\n}\nexport function setupJavaScript(defaults) {\n    javaScriptWorker = setupMode(defaults, 'javascript');\n}\nexport function getJavaScriptWorker() {\n    return new Promise(function (resolve, reject) {\n        if (!javaScriptWorker) {\n            return reject('JavaScript not registered!');\n        }\n        resolve(javaScriptWorker);\n    });\n}\nexport function getTypeScriptWorker() {\n    return new Promise(function (resolve, reject) {\n        if (!typeScriptWorker) {\n            return reject('TypeScript not registered!');\n        }\n        resolve(typeScriptWorker);\n    });\n}\nfunction setupMode(defaults, modeId) {\n    var client = new WorkerManager(modeId, defaults);\n    var worker = function () {\n        var uris = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            uris[_i] = arguments[_i];\n        }\n        return client.getLanguageServiceWorker.apply(client, uris);\n    };\n    var libFiles = new languageFeatures.LibFiles(worker);\n    languages.registerCompletionItemProvider(modeId, new languageFeatures.SuggestAdapter(worker));\n    languages.registerSignatureHelpProvider(modeId, new languageFeatures.SignatureHelpAdapter(worker));\n    languages.registerHoverProvider(modeId, new languageFeatures.QuickInfoAdapter(worker));\n    languages.registerDocumentHighlightProvider(modeId, new languageFeatures.OccurrencesAdapter(worker));\n    languages.registerDefinitionProvider(modeId, new languageFeatures.DefinitionAdapter(libFiles, worker));\n    languages.registerReferenceProvider(modeId, new languageFeatures.ReferenceAdapter(libFiles, worker));\n    languages.registerDocumentSymbolProvider(modeId, new languageFeatures.OutlineAdapter(worker));\n    languages.registerDocumentRangeFormattingEditProvider(modeId, new languageFeatures.FormatAdapter(worker));\n    languages.registerOnTypeFormattingEditProvider(modeId, new languageFeatures.FormatOnTypeAdapter(worker));\n    languages.registerCodeActionProvider(modeId, new languageFeatures.CodeActionAdaptor(worker));\n    languages.registerRenameProvider(modeId, new languageFeatures.RenameAdapter(worker));\n    new languageFeatures.DiagnosticsAdapter(libFiles, defaults, modeId, worker);\n    return worker;\n}\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel]  Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel]   ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\"></span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}